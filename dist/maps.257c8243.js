parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({131:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.manageGradientLegendSpace=exports._manageLegendSpace=void 0;var e=require("../lib/lib");function n(){var n,g,t,a,d=this,i=d.config,r=d.getChildren("legend")&&d.getChildren("legend")[0],o=d.getChildren("gLegend")&&d.getChildren("gLegend")[0],c=d.getFromEnv("dataSource").colorrange,l=i.hasLegend,h={},m=d.hasGradientLegend,p=d.getFromEnv("dataSource").chart,b=(0,e.pluckNumber)(p.mapbycategory,0);m&&c&&(0,e.pluckNumber)(c.gradient)&&!b?(n=o.conf,m=!0,i.gLegendEnabled=!0,a=.5,g=n.legendPosition):(n=r&&r.config,m=!1,i.gLegendEnabled=!1,a=(g=n&&n.legendPos)===e.POSITION_RIGHT?.8:.4),t=g===e.POSITION_RIGHT?i.availableWidth*a:i.availableHeight*a,m?h=d.manageGradientLegendSpace(t):!1!==l&&r&&!r.getState("removed")&&(h=r&&r._manageLegendPosition(t)),d._allocateSpace({bottom:h&&h.bottom||0,right:h&&h.right||0})}function g(n){var g,t,a,d,i=this,r=i.config,o=i.getFromEnv("gLegend"),c=o&&o.conf;return r.gLegendPadding=(0,e.pluckNumber)(i.getFromEnv("chart-attrib").legendpadding,10),a=Math.min(r.gLegendPadding,.5*n),c?(g=c.legendPosition,d=o.getLogicalSpace(n),t=g===e.POSITION_BOTTOM?{bottom:(d.height||0)+a}:{right:(d.width||0)+a}):t={bottom:0,right:0},t}exports._manageLegendSpace=n,exports.manageGradientLegendSpace=g;
},{"../lib/lib":20}],132:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){let a,r,d,o,s=t.getFromEnv("dataSource").dataset,n=a=t.getChildren().canvas[0].getChildren("vCanvas")[0],i=t.config.defaultDatasetType||"";return s?((d=t.getDSGroupdef())&&((0,e.componentFactory)(a,d,"datasetGroup_"+i,1,[s]),o=a.getChildren("datasetGroup_"+i)),o&&(n=o[0]),r=t.getDSdef(),void(0,e.datasetFactory)(n,r,"dataset",s.length,s)):void t.setChartMessage()};var e=require("../lib/lib");
},{"../lib/lib":20}],206:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={"*.legendItem.legendItem":()=>({"icon.appearing":()=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:1}}],"background.appearing":t=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:t.attr.opacity}}],"icon.disappearing":()=>[{finalAttr:{opacity:0},slot:"initial"}]})};
},{}],180:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../lib/lib"),t=require("../../lib/lib-graphics"),n=require("../../../core/component-interface"),a=l(n),r=require("../../dependency-manager"),i=require("../../animation-rules/legend-item-animation"),o=l(i);function l(e){return e&&e.__esModule?e:{default:e}}let s=e.preDefStr.POINTER,d="none",c="M",m="L",g=(e,t,n,a,r)=>{var i,o,l,s,d,g,h,u,p,b=[c];return"column"===r||"dragColumn"===r||"column3D"===r||"realtimeColumn"===r||"errorBar2D"===r?(o=.5*(i=.25*n),l=.7*a,s=.4*a,b=b.concat([e,t+a,"l",0,-l,i,0,0,l,"z","m",i+o,0,"l",0,-a,i,0,0,a,"z","m",i+o,0,"l",0,-s,i,0,0,s,"z"])):"bar2D"===r||"bar3D"===r?(i=.3*n,o=.6*n,s=(l=a/4)/2,b=b.concat([e,t,m,e+o,t,e+o,t+l,e,t+l,"Z",c,e,t+l+s,m,e+n,t+l+s,e+n,t+l+s+l,e,t+2*l+s,"Z",c,e,t+2*(l+s),m,e+i,t+2*(l+s),e+i,t+a,e,t+a,"Z"])):"area"===r||"area3d"===r||"areaspline"===r||"dragArea"===r||"realTimeArea"===r||"splinearea"===r?(i=.3*n,o=.6*n,l=.6*a,s=.2*a,d=.8*a,b=b.concat([e,t+d,m,e,t+l,e+i,t+s,e+o,t+l,e+n,t+s,e+n,t+d,"Z"])):"pie2D"===r||"pie3d"===r||"doughnut2D"===r||"doughnut3D"===r?(o=.9*(i=.5*n),1,1,g=e+i+1,u=t+i-1,h=e+i-1,p=t+i+1,b=b.concat([g,u,m,g,u-o+1,"A",o-1,o-1,0,0,1,g+o-1,u,"Z",c,h,p,m,h,p-o,"A",o,o,0,1,0,h+o,p,"Z"])):b=b.concat([e,t,m,e+n,t,e+n,t+a,e,t+a,"Z"]),{path:b}},h=function(n,a){let r=n.config,i=n.getLinkedParent().config,o=i.symbolWidth,l=(0,e.pluckNumber)(i.padding,4),d=.5*o,c=(i.initialItemX||0)+r._legendX+l,m=(i.initialItemY||0)+r._legendY-l,g=c+i.symbolPadding+d,h=m+(r._markerYGutter||0)+i.symbolPadding+d,u=(0,t.mapSymbolName)(r.anchorSide),p=r.symbol=u&&u.split("_")||[],b="spoke"===p[0]?1:0;return("line"===r.type||r.drawLine)&&(d*=.6),{path:(0,e.polyPathToPath)([p[1]||2,g,h,d,r.startAngle,r.spoke||b]),cursor:a.cursor||s,stroke:a.stroke,fill:a.fill,"stroke-width":a["stroke-width"]||.5}};(0,r.addDep)({name:"legendItemAnimation",type:"animationRule",extension:o.default});class u extends a.default{constructor(){super(),this._stateCosmetics={},this._legendState=[]}getName(){return"legendItem"}parseLegendCosmetics(){let t,n,a,r=this,i=this.getLinkedParent(),o=i.getLegendState(),l=r.getLegendState(),s=["default"],d={};for(s=s.concat(o,l),a=0;a<s.length;a++)t=i.getStateCosmetics(s[a]),n=r.getStateCosmetics(s[a]),t&&("function"==typeof t?d=t(d,r):(0,e.extend2)(d,t)),n&&("function"==typeof n?d=n(d,r):(0,e.extend2)(d,n));return d}getType(){return"legendItem"}configure(e){var t,n,a=this.config;for(t in e)if(e.hasOwnProperty(t))if("object"!=typeof e[t])a[t]=e[t];else{let r=a[t]?a[t]:{};for(n in e[t])r[n]=e[t][n];a[t]=r}}itemClickFn(){let t=this,n=t.getFromEnv("chart-attrib"),a=(0,e.pluckNumber)(n.interactivelegend,1),r=t.getLinkedItem("owner");a&&r.legendInteractivity(t)}dispose(){this.removeEventListener("click",this.click),this.removeEventListener("mouseover",this.mouseover),this._dispose()}getLegendState(){return this._legendState}hasState(e){var t,n,a=this.getLegendState();for(t=0,n=a.length;t<n;t++)if(a[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,n,a=1;if(e)for(t=0,n=this._legendState.length;t<n&&a;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),a=0);else this._legendState.length=0;this.asyncDraw()}removeStateCosmetics(e){delete this._stateCosmetics[e]}setStateCosmetics(e,t){this._stateCosmetics[e]=t}getStateCosmetics(e){return this._stateCosmetics[e]}draw(){var n,a,r,i,o,l,u,p,b,k,y,f,S,_,v,C,L,I,w,E,x,A,G,P,D,N,T,Y,Z,F,q,B,W,H,M,O,R,X,j=this.getLinkedParent(),z=j.getFromEnv("chart").config,K=this,J=K.getFromEnv("animationManager"),Q=K.config,U=j.config,V=U.legendHeight,$=U.symbolPadding,ee=U.symbolWidth,te=U.interactiveLegend,ne=U.textPadding||2,ae=(0,e.pluckNumber)(U.padding,4),re=U.itemHoverStyle,ie=j.getChildContainer("itemGroup"),oe=U.drawCustomLegendIcon,le=K.hasState("hidden"),se={};r=(n=K.parseLegendCosmetics()).symbol,i=U.initialItemX||0,o=U.initialItemY||0,b=Q.type,w=n.symbol.stroke||"000000",E=n.symbol.fill,a=n.symbol.lineWidth||U.lineWidth,A=Q.anchorSide,G=Q.drawLine,k=i+Q._legendX+ae,y=o+Q._legendY-ae,q=K.getGraphicalElement("legendItemBackground"),p=K.getGraphicalElement("legendItemText"),f=K.getGraphicalElement("legendItemLine"),_=K.getGraphicalElement("legendItemSymbol"),(te=(0,e.pluck)(Q.interactiveLegend,te))||(n.cursor="default"),B=n.text,R=k+V+ne-2,X=y+(Q._legendTestY||0),B.text=Q.name,B.x=R,B.y=X,u=J.setAnimation({el:p||"text",attr:B,component:K,container:ie,label:"icon"}),p||(u=K.addGraphicalElement("legendItemText",u)),u.data("legendItem",Q),W=!1,oe&&!1!==Q.customLegendIcon?(N=!le&&r.borderColor,T=(0,e.pluck)(r.borderAlpha),P=!le&&r.bgColor,D=(0,e.pluck)(r.bgAlpha,"100"),Y=n.symbol.rawFillColor,E=le?n.symbol.fill:P||Y,E=(0,t.convertColor)(E,D),Z=n.symbol.rawStrokeColor,w=le?n.symbol.stroke:N||Z||Y,w=(0,t.convertColor)(w,T),v=k+$+(C=.5*ee),l=y+(Q._markerYGutter||0)+$+C,L="spoke"===(I=(0,t.mapSymbolName)(r.sides)&&(0,t.mapSymbolName)(r.sides).split("_")||[])[0]?1:0,H={path:(0,e.polyPathToPath)([I[1]||2,v,l,C,r.startAngle||0,L]),cursor:n.symbol.cursor||s,stroke:w,fill:E,"stroke-width":(0,e.pluckNumber)(r.borderThickness,1)}):"line"===b||G?(l=y+(Q._markerYGutter||0)+$+.5*ee,O={path:[c,k+$,l,m,k+$+ee,l]},W=!0,se={opacity:z.legendiconalpha||1,"stroke-width":a,stroke:w,cursor:n.cursor||s},A&&(H=h(K,n.symbol))):A?H=h(K,n.symbol):"line"!==b&&(w=Q.symbolStroke||w,H={path:g(k+$,y+(Q._markerYGutter||0)+$,ee,ee,b).path,"stroke-width":.5,stroke:w,fill:E,cursor:n.cursor||s}),O&&W?(Object.assign(O,se),f=J.setAnimation({el:f||"path",attr:O,component:K,callback:function(){this.show()},container:ie}),!K.getGraphicalElement("legendItemLine")&&(f=K.addGraphicalElement("legendItemLine",f))):f&&f.hide(),H&&(H.opacity=(0,e.pluckNumber)(n.symbol.opacity,1),S=J.setAnimation({el:_||"path",attr:H,component:K,callback:function(){this.show()},container:ie,label:"icon"}),(!_||!_.node)&&(S=K.addGraphicalElement("legendItemSymbol",S)),S.data("legendItem",Q)),x=n.background&&n.background.legendBackgroundColor?(0,t.convertColor)(n.background.legendBackgroundColor,n.background.alpha):e.TRACKER_FILL,M={x:k,y:y,width:Q._totalWidth,height:Q._legendH,r:0,fill:x,opacity:1,"stroke-width":1,stroke:d,cursor:n.symbol.cursor||s},F=J.setAnimation({el:q||"rect",attr:M,css:void 0,component:K,label:"background",container:ie}),q||K.addGraphicalElement("legendItemBackground",F),F.data("legendItem",K).data("interactive",te).data("itemHoverStyle",re).data("itemStyle",n)}}exports.default=u;
},{"../../lib/lib":20,"../../lib/lib-graphics":21,"../../../core/component-interface":62,"../../dependency-manager":17,"../../animation-rules/legend-item-animation":206}],179:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let e=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"plot"}],t=[{slot:"plot",startEnd:{start:0,end:.5}}],l=[{slot:"intial"}];exports.default={"*.legend.legend":()=>({"legendGroup.appearing":e,"legendGroup.updating":t,"legendGroup.disappearing":l,"scroller.appearing":e,"scroller.updating":t,"scroller.disappearing":l})};
},{}],146:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../lib/lib"),t=require("../../lib/lib-graphics"),i=require("../../../core/component-interface"),n=c(i),r=require("./legend-item"),o=c(r),l=require("../../dependency-manager"),a=require("../../animation-rules/legend-animation"),g=c(a),d=require("../../schedular");function c(e){return e&&e.__esModule?e:{default:e}}let s,h={left:e.POSITION_START,right:e.POSITION_END,center:e.POSITION_MIDDLE},m=Math,u=m.min,p=m.max,f=m.floor,v=m.ceil,S=",",b="none",L=e.preDefStr.NORMAL,w=e.preDefStr.BOLD,x=e.preDefStr.noneStr,I={fontWeight:{1:w,0:L},fontStyle:{1:"italic",0:L},textDecoration:{1:"underline",0:x}},C=function(e){let t,i;return{dragstart:()=>{t=e.config.xL||e.config.xPos,i=e.config.yL||e.config.yPos},dragmove:n=>{let r,o,l=n.originalEvent.data[0],a=n.originalEvent.data[1],g=e.config,c=e.getFromEnv("chartConfig"),s=(g.borderWidth||0)+2;r=u(p(t+l,s),c.width-g.width-s),o=u(p(i+a,s),c.height-g.height-s),g.xPos=g.xL=r,g.yPos=g.yL=o,e.addJob("draw",e.dragDraw,d.priorityList&&d.priorityList.draw)}}};(0,l.addDep)({name:"legendAnimation",type:"animationRule",extension:g.default});class N extends n.default{constructor(){super();let e=this;e._stateCosmetics={},e._legendState=[],e.dragDraw=function(){e.draw()},e.drawScroll=function(){e.createItemGroup()},e.config.handlers=C(e)}createItem(e){var t;return t=new o.default,this.attachChild(t,"legendItem"),t.setLinkedItem("owner",e),t.addEventListener("mouseover",function(){t.setLegendState("hover",!0)}),t.addEventListener("mouseout",function(){t.removeLegendState("hover")}),t.getId()}getItem(e){var t=this.getChildren().legendItem;if(e===s)return!1;if(t)for(let i=0;i<t.length;i++)if(t[i].getId()===e)return t[i]}getSortedLegendItems(){let e,t,i=this.getChildren("legendItem")||[],n=this.config.reverselegend,r={},o=[];for(e=0,t=i.length;e<t;e++)i[e].config.index===s?r[t+e]=i[e]:r[i[e].config.index]=i[e];return Object.keys(r).sort(function(e,t){return n?t-e:e-t}).forEach(e=>{o.push(r[e])}),o}disposeItem(e){var t=this.getItem(e);t&&t.remove()}getName(){return"legend"}getType(){return"legend"}__setDefaultConfig(){super.__setDefaultConfig();let t=this.config;t.enabled=!0,t.symbolWidth=12,t.borderRadius=1,t.lastScrollPos=0,t.oriSymbolPadding=3,t.textPadding=4,t.scrollY=0,t.backgroundColor="#FFFFFF",t.initialItemX=0,t.title={text:e.BLANKSTRING,x:0,y:0,padding:2},t.scroll={},t.itemStyle={}}createLegendGroup(){let e,t=this,i=t.config,n=t.getFromEnv("chart"),r=n.config,o=t.getFromEnv("animationManager"),l=.5*(i.borderWidth||0)+2,a=t.getContainer("legendGroup");i.xL&&(i.xL=u(p(i.xL,l),r.width-i.width-l)),i.yL&&(i.yL=u(p(i.yL,l),r.height-i.height-l)),e=o.setAnimation({el:a||"group",attr:{name:"legendGroup",transform:["T",i.xL||i.xPos,i.yL||i.yPos]},container:n.getChildContainer("legendGroup"),component:t}),a||t.addContainer("legendGroup",e)}draw(){this.createLegendGroup(),this.drawLegendBox(),this.createItemGroup(),this.drawCaption(),this.decideScroll()}decideScroll(){let e=this,t=e.getFromEnv("animationManager"),i=e.config,n=e.getLinkedItem("legendScrollBar");i.scroll.enabled?(this.createScrollGroup(),this.createScrollBar()):i.hasScroll&&(e.removeLinkedItem("legendScrollBar"),t.setAnimation({el:e.getChildContainer("itemGroup"),attr:{"clip-rect":null,transform:"none"},component:e}),n.config.node.hide(),i.scrollY=0,i.hasScroll=!1)}createItemGroup(){var e,t=this,i=t.getFromEnv("animationManager"),n=t.getContainer("legendGroup"),r=t.getChildContainer("itemGroup");return e=i.setAnimation({el:r||"group",attr:{name:"item",transform:["T",0,t.config.scrollY||0]},container:n,component:t}),r||t.addChildContainer("itemGroup",e),e}createScrollGroup(){let e,t=this,i=t.getFromEnv("animationManager"),n=t.getChildContainer("scrollGroup"),r=t.getContainer("legendGroup");e=i.setAnimation({el:n||"group",attr:{name:"scrollGroup"},container:r,component:t,label:"scroller"}),n||t.addChildContainer("scrollGroup",e)}createScrollBar(){var i,n,r,o,l,a,g,c=this,s=c.config,h=c.getLinkedItem("legendScrollBar"),m=c.getChildContainer("itemGroup"),u=c.getFromEnv("toolbox"),p=c.getFromEnv("toolBoxAPI"),f=p&&p.Scroller,v=s.borderWidth||0,b=(0,e.pluckNumber)(s.padding,4),L=.5*b,w=s.scroll,x=s.width,I=s.height;i={conf:{isHorizontal:!1,color:(0,t.convertColor)(c.getFromEnv("chart-attrib").legendscrollbgcolor)},handler:{scroll:function(e){s.lastScrollPos=e,s.scrollY=(r-s.totalHeight)*e,c.addJob("scrollDraw",c.drawScroll,d.priorityList&&d.priorityList.draw)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},h||((h=new f).configure(i.conf,(u.idCount||0)+1,u.pId,c.getFromEnv("chartInstance").id),h.attachEventHandlers(i.handler),this.setLinkedItem("legendScrollBar",h),this.config.hasScroll=!0),n=S+x+S+(r=I-b),m.attr({"clip-rect":"0,"+L+n}),l=x-10+L-v,a=.5*v,g=I-v,o={scrollPosition:w.scrollPosition||0,scrollRatio:(r+b)/s.totalHeight,showButtons:!1,displayStyleFlat:w.flatScrollBars},h.draw(l,a,{height:g,scrollRatio:o.scrollRatio,startPercent:0,scrollPosition:s.lastScrollPos||0,color:s.legendScrollBgColor,parentLayer:c.getChildContainer("scrollGroup")})}drawCaption(){var t,i,n,r,o=this,l=o.getChildContainer("itemGroup"),a=o.getGraphicalElement("caption"),g=this.getFromEnv("animationManager"),d=this.config,c=(0,e.pluckNumber)(d.padding,4),s=d.scroll.enabled,h=d.width;if(d.title&&d.title.text!==e.BLANKSTRING&&d.validLegendItem){switch(d.title.align){case e.POSITION_START:n=c;break;case e.POSITION_END:n=h-c-(s?10:0);break;default:n=.5*h}i=d.title.style,t={text:d.title.text,title:d.title.originalText||e.BLANKSTRING,x:n,y:c,fill:d.title.style.color,direction:d.textDirection,"line-height":i.lineHeight,"vertical-align":e.POSITION_TOP,"text-anchor":d.title.align,opacity:1},r={"font-weight":i.fontWeight,"font-style":i.fontStyle,"font-family":i.fontFamily,"font-size":i.fontSize},a?g.setAnimation({el:a,attr:t,component:o}):(a=g.setAnimation({el:"text",attr:t,component:o,container:l}),(a=this.addGraphicalElement("caption",a)).css(r),a.show()),o.getFromEnv("toolTipController").enableToolTip(a,d.title.originalText)}else a&&g.setAnimation({el:a,component:o,callback:function(){a.hide()}})}drawLegendBox(){var e,t=this,i=this.getFromEnv("animationManager"),n=t.config,r=t.getContainer("legendGroup"),o=n.width,l=t.getGraphicalElement("box"),a=n.height,g=n.borderRadius,d=n.backgroundColor,c=n.borderColor,s=n.borderAlpha,h=n.backgroundAlpha,m=n.borderWidth||0;return e=i.setAnimation({el:l||"rect",attr:{x:0,y:0,width:o,height:a,r:g,stroke:c,"stroke-width":m,fill:d||b,"stroke-opacity":s/100,"fill-opacity":h/100,cursor:n.legendAllowDrag?"move":"default"},container:r,component:t,label:"legendGroup"}),l||(t.addGraphicalElement("box",e),e.shadow(n.shadow)),e}getPosition(){var t,i,n,r,o,l=this.getFromEnv("chart").config,a=this.config,g=l.height-l.canvasBottom,d=l.canvasLeft,c=l.canvasWidth,s=a.chartMarginLeft||0,h=a.chartMarginRight||0,m=a.chartMarginBottom||0,u=l.actionBarHeight||0,p=a.actualCanvasMarginLeft||0,f=l.actualCanvasMarginBottom||0,v=l.actualCanvasMarginRight||0,S=a.alignLegendWithCanvas,b=l.height,L=l.canvasTop,w=a.width||0,x=a.height||0,I=l.borderWidth,C=l.oriCanvasLeft,N=l.oriTopSpace,k=l.oriBottomSpace,y=0,T=a.borderWidth||0;return a.legendPos===e.POSITION_RIGHT&&(a.align=e.POSITION_RIGHT,a.verticalAlign=e.POSITION_MIDDLE,o=a.layout="vertical"),o?(t=l.width-h-v-w-I,i=(y=(0,e.pluckNumber)(N,L))+.5*(b-(0,e.pluckNumber)(k,g)-y-x)+(a.y||0)):(n=l.width-(s+p+(h+v)),r=S?c-w:n-w,t=(S?(0,e.pluckNumber)(C,d):s+p)+r/2,i=b-x-f-m-u),(0,e.crispBound)(t,i,w,x,T)}reverseLegendFn(){var e,t,i=this,n=i.config.items||[],r=[],o=n.length,l=0,a=i.config;for(e=o-1;0<=e;e--)n[e].configuration.mainDS?(t=e,r=r.concat(n.splice(t,l+1)),l=0):l++;r.length&&(a.orderReversed=!0,i.config.items=r.slice(0))}allocatePosition(){var e=this.config,t=this.getPosition();e.xPos=t.x,e.yPos=t.y,e.width=t.width,e.height=t.height}_manageLegendPosition(t){var i=this,n=i.config,r=i.getFromEnv("chart").hasSubDataset,o=n.legendPos,l=i.getChildren().legendItem;return n.reversed===n.prevReversed?r&&n.orderReversed&&i.reverseLegendFn():r?!n.orderReversed&&i.reverseLegendFn():l&&l.reverse(),n.prevReversed=n.reversed,o===e.POSITION_RIGHT?i._placeLegendBlockRight(t):i._placeLegendBlockBottom(t)}_placeLegendBlockBottom(t){var i,n,r,o,l,a,g,d,c,s,h,m,S,b,L,w,x,I,C,N,k,y,T,B,_,P,E,R=this,G=R.getFromEnv("chart"),O=G.config,A=O.width,F=O.height,W=O.canvasLeft,D=O.width-(O.canvasRight||0),M=G.getFromEnv("smartLabel"),H=R.config,z=H.chartMarginLeft,Y=H.chartMarginRight,K=H.chartMarginTop,X=H.alignLegendWithCanvas,q=H.minimiseWrappingInLegend,$=H.legendScale,U=H.numColumns,j=H.padding,J=2*t,V=2*j,Q={width:V,height:V},Z=H.title,ee=Z.padding,te=R.getStateCosmetics("default"),ie=parseInt(te.text["font-size"],10)||10,ne=R.getSortedLegendItems(),re=ne.length,oe=H.oriSymbolPadding,le=H.textPadding,ae=H.legendPadding,ge=O.canvasMarginRight,de=O.canvasMarginLeft,ce=G.getChildren("yAxis"),se=ce&&ce[0].config.isVertical?ce:G.getChildren("xAxis"),he=se&&se[0],me=se&&se[1],ue=he&&he.config||{},pe=me&&me.config||{},fe=ue.nameMaxW,ve=pe.nameMaxW,Se=ue.name&&ue.name.style||{},be=pe.name&&pe.name.style||{},Le=ue.axisName||e.BLANKSTRING,we=pe.axisName||e.BLANKSTRING,xe=0,Ie=0,Ce=0,Ne=0,ke=0,ye=0,Te=0,Be=0,_e=[],Pe=!1,Ee=0,Re=0,Ge=O.canvasWidth-O.canvasMarginLeft-O.canvasMarginRight,Oe=Ge;if(H.paddingBottom=O.height-O.canvasBottom,M.useEllipsesOnOverflow(O.useEllipsesWhenOverflow),M.setStyle(Se),x=M.getOriSize(Le),M.setStyle(be),I=M.getOriSize(we),0>=(C=ie+1)&&(C=1),oe*=$,0>=(C=u(C*=$,Ge-=V))&&(oe=C=0),H.symbolWidth=C,H.textPadding=4,H.legendHeight=s=C+2*oe,H.rowHeight=r=p(parseInt(te.text["line-height"],10)||12,s),n=le+oe+j,M.setStyle((0,e.extend2)({},te.text)),l=M.getOriSize(e.TESTSTR).height,o=ae+H.borderWidth/2+1,o=u(o,t-l-8),ae=.05*r,(x||I)&&(L=(0,e.pluckNumber)(x.height,0)>(0,e.pluckNumber)(I.height,0)?(w=fe)&&x.width:(w=ve)&&I.width),Ge=X?Ge:A-(L+K>F-t?2*w+Y+z+ge+de:Y+z+de+ge),H.initialItemY=0,H.initialItemX=0,H.showLegend&&0!==re){for(a=0;a<re;a+=1)B=_=(i=ne[a]).config||(i.config={}),(P=_.name=(0,e.parseUnsafeString)(B.label))===e.BLANKSTRING||0===B.enabled||!1===B.enabled||i.getState("removed")?_.enabled=0:(_.enabled=1,Ce+=1,g=!0,d=M.getOriSize(P),xe=p(xe,d.width),ye=p(ye,u(d.height,J)),Ie+=d.width);if(H.validLegendItem=g,Ne=Ie/Ce,Ie+=(c=s+ae+le+oe+V)*Ce,H.x=(W-z-D+Y)/2,H.x=!X&&Ie>Oe?0:H.x,g){for(Ne+=c,xe+=c,0<U&&Ce<U&&(U=Ce),Ie<=Ge&&(0>=U||U===Ce)?(U=Ce,ke=Ne=Ie/Ce,Pe=!0,ye>r&&(Be=(ye-r)/2,r=ye)):0<U&&(ke=Ge/U)>Ne?ke>xe&&(ke=xe):Ge>xe&&(q||1.5*Ne>xe)?(Ce<(U=f(Ge/xe))&&(U=Ce),ke=xe):Ge>=2*Ne?(Ce<(U=f(Ge/Ne))&&(U=Ce),(ke=f(Ge/U))>xe&&(ke=xe)):(U=1,ke=Ge),H.itemWidth=ke,0>(S=v(ke-c))&&(oe=S=le=0),H.symbolPadding=oe,H.textPadding=le,H.width=ke*U-ae,Z.text!==e.BLANKSTRING&&(M.setStyle(Z.style),d=M.getSmartText(Z.text,Ge,J),Z.text=d.text,d.tooltext&&(Z.originalText=d.tooltext),T=d.width+V,H.width<T&&(H.initialItemX=(T-H.width)/2,H.width=T),H.initialItemY=Te=d.height+ee),M.setStyle((0,e.extend2)({},te.text)),a=0;a<re;a+=1)if(0!==(_=(i=ne[a]).config).enabled){if(0===S&&(_e[Re]=!0,_.name=e.BLANKSTRING,b=1,h=parseInt(Re/U,10),m=Re%U,_._legendX=m*ke,_._legendY=h*r+V,_._legendH=b*r,_._totalWidth=C+oe),Pe)(d=M.getOriSize(_.name)).height<r&&(_._legendTestY=(r-d.height)/2),_._markerYGutter=Be,_._legendX=Ee,_._legendY=V,_._legendH=r,_._totalWidth=C+n+d.width,Ee+=d.width+c;else{for(d=M.getSmartText(_.name,S,J),_.name=d.text,d.tooltext&&(_.originalText=d.tooltext);!0===_e[Re];)Re+=1;for(k=d.height/r,y=Re,b=0;b<k;b+=1,y+=U)_e[y]=!0;d.height<r&&(_._legendTestY=(r-d.height)/2),h=parseInt(Re/U,10),m=Re%U,_._legendX=m*ke,_._legendY=h*r+V,_._legendH=b*r,_._totalWidth=C+n+d.width}Re++}N=Pe?1:v(_e.length/U),Q.height+=N*r+Te,H.height=H.totalHeight=Q.height,H.rowHeight=r,H.legendNumColumns=U,H.height-2*oe>t?(H.height=t,(E=H.scroll||(H.scroll={})).enabled=!0,E.flatScrollBars=H.flatScrollBars,E.scrollBar3DLighting=H.scrollBar3DLighting,H.width=H.width+12>Ge?H.width:H.width+12):H.scroll.enabled=!1,o+=H.height,H.isActive=!0,H.enabled=!0}else H.enabled=!1,H.width=0,o=0}else o=0,H.height=0,H.width=0;return{bottom:o,right:0}}_placeLegendBlockRight(t){var i,n,r,o,l,a,g,d,c,s,h=this,m=h.config,f=h.getFromEnv("chart"),v=f.config,S=f.getFromEnv("smartLabel"),b=f.getChildren("canvas")[0].config.canvasBorderThickness||0,L=m.textPadding,w=m.title.padding,x=m.oriSymbolPadding,I=m.legendPadding,C=m.legendScale,N=h.getStateCosmetics("default"),k=parseInt(N.text["font-size"],10),y=2*v.canvasHeight,T=0,B=2*m.padding,_={width:B,height:B},P={},E=!1,R=h.getSortedLegendItems(),G=R.length,O=0;if(m.initialItemY=0,m.initialItemX=0,0>=(o=k+1)&&(o=1),x*=C,0>=(o=u(o*=C,t-=B+I))&&(x=o=0),m.symbolPadding=x,m.symbolWidth=o,m.legendHeight=l=o+2*x,m.rowHeight=p(parseInt(N.text["line-height"],10)||12,l),i=I+m.borderWidth/2+b,0>(r=t-l-I-L)&&(r=0),S.useEllipsesOnOverflow(v.useEllipsesWhenOverflow),S.setStyle((0,e.extend2)({},N.text)),m.showLegend&&0!==G){for(O=0;O<G;O+=1)c=a=(s=R[O]).config||(s.config={}),g=a.name=(0,e.parseUnsafeString)(c.label),a._legendX=0,a._legendY=_.height,0!==c.enabled&&!1!==c.enabled&&g!==e.BLANKSTRING?(a.enabled=1,E=!0,0===r?(_.height+=a._legendH=l,a.name=e.BLANKSTRING,a._totalWidth=o+x):(n=S.getSmartText(g,r,y),a.name=n.text,n.tooltext&&(a.originalText=n.tooltext),n.height<l&&(a._legendTestY=(l-n.height)/2),a._totalWidth=o+x+L+n.width+I,_.height+=a._legendH=p(n.height,l),T=p(n.width,T))):a.enabled=0;m.validLegendItem=E,E?(m.itemWidth=T+l+I+L,m.width=m.itemWidth+B,m.title.text!==e.BLANKSTRING&&(S.setStyle(m.title.style),n=S.getSmartText(m.title.text,t,y),m.title.text=n.text,n.tooltext&&(m.title.originalText=n.tooltext),d=n.width+B,m.width<d&&(m.initialItemX=(d-m.width)/2,m.width=d),m.initialItemY=n.height+w,_.height+=m.initialItemY),m.height=m.totalHeight=_.height,i=u(m.width+i,t),P.right=i+I,m.isActive=!0,m.enabled=!0):(m.enabled=!1,m.width=0,P.right=0)}else P.right=0,m.height=0,m.width=0;return P}postSpaceManager(){var t=this.config,i=t.legendPos,n=this.getFromEnv("chart").config.canvasHeight;i===e.POSITION_RIGHT&&(t.height>n?(t.height=n,t.scroll.enabled=!0,t.scroll.flatScrollBars=t.flatScrollBars,t.scroll.scrollBar3DLighting=t.scrollBar3DLighting,t.width+=(t.scroll.scrollBarWidth=10)+(t.scroll.scrollBarPadding=2)):t.scroll.enabled=!1)}configure(){var i,n,r,o,l,a=this,g=a.config,d=a.getFromEnv("chart"),c=d.config,s=a.getFromEnv("style"),m=d.getFromEnv("chart-attrib"),u=d.config.is3D,f=a.getFromEnv("color-manager"),v=u?e.chartPaletteStr.chart3D:e.chartPaletteStr.chart2D,S=g.interactiveLegend=!1!==d.hasInteractiveLegend&&!!(0,e.pluckNumber)(m.interactivelegend,1),b=(0,e.pluckNumber)(m.useroundedges,0),L=s.outCancolor,w=(0,e.pluck)(m.legenditemfont,s.outCanfontFamily),x=(0,e.pluckNumber)(m.legendiconscale,1),C=(0,e.pluckFontSize)(m.legenditemfontsize,s.fontSize)+"px",N=(0,e.pluck)(m.legenditemfontcolor,L).replace(/^#?([a-f0-9]+)/gi,"#$1"),k=(0,e.getFirstColor)((0,e.pluck)(m.legenditemhoverfontcolor,N));g.isActive=!1,g.chartMarginTop=c.origMarginTop,g.chartMarginRight=c.origMarginRight,g.chartMarginBottom=c.origMarginBottom,g.chartMarginLeft=c.origMarginLeft,g.reverselegend=(0,e.pluckNumber)(m.reverselegend,0),g.showLegend=(0,e.pluckNumber)(m.showlegend,!d.dontShowLegendByDefault,1),i=(0,e.setLineHeight)({fontSize:C}),g.legendPos=(0,e.pluck)(m.legendposition,d.legendposition,e.POSITION_BOTTOM).toLowerCase(),g.numColumns=(0,e.pluckNumber)(m.legendnumcolumns,0),g.xL=g.yL=0,(0>=x||5<x)&&(x=1),g.drawCustomLegendIcon=(0,e.pluckNumber)(m.drawcustomlegendicon,0),g.legendScale=x,g.legendPadding=(0,e.pluckNumber)(m.legendpadding,7),g.alignLegendWithCanvas=c.alignLegendWithCanvas,g.title.style={fontFamily:(0,e.pluck)(m.legendcaptionfont,w),fontSize:(0,e.pluckFontSize)(m.legendcaptionfontsize,s.fontSize)+"px",color:(0,e.pluck)(m.legendcaptionfontcolor,L).replace(/^#?([a-f0-9]+)/gi,"#$1"),fontWeight:I.fontWeight[(0,e.pluckNumber)(m.legendcaptionfontbold,1)]||e.BLANKSTRING},l=m.legendcaptionalignment?m.legendcaptionalignment.toLowerCase():h.center,g.title.align=h[l]||h.center,g.title.style["text-anchor"]=g.title.align,g.padding=4,n=(0,e.pluck)(m.legendbordercolor,f.getColor(v.legendBorderColor)),r=g.borderAlpha=(0,e.pluckNumber)(m.legendborderalpha,100),g.borderColor=(0,t.convertColor)(n,r),g.borderWidth=(0,e.pluckNumber)(m.legendborderthickness,!b||m.legendbordercolor?1:0),g.borderRadius=(0,e.pluckNumber)(b,0),g.backgroundAlpha=o=(0,e.pluckNumber)(m.legendbgalpha,100),g.backgroundColor=(0,t.convertColor)((0,e.pluck)(m.legendbgcolor,f.getColor(v.legendBgColor)),o),g.symbol3DLighting=!!(0,e.pluckNumber)(m.use3dlighting,m.useplotgradientcolor,1),g.shadow=!!(0,e.pluckNumber)(m.legendshadow,1),g.shadow&&(g.shadow={enabled:g.shadow,opacity:p(r,o)/100}),g.prevReversed=!!(0,e.pluckNumber)(g.reversed,0),g.reversed=!!(0,e.pluckNumber)(m.reverselegend,0),g.lineWidth=(0,e.pluckNumber)(m.linethickness,2),g.borderRadius=(0,e.pluckNumber)(m.legendborderradius,b?3:0),g.legendAllowDrag=!!(0,e.pluckNumber)(m.legendallowdrag,0),g.title.text=(0,e.parseUnsafeString)((0,e.getFirstValue)(m.legendcaption,e.BLANKSTRING)),g.legendScrollBgColor=(0,e.getFirstColor)((0,e.pluck)(m.legendscrollbgcolor,m.scrollcolor,f.getColor("altHGridColor"))),g.legendScrollBarColor=(0,e.pluck)(m.legendscrollbarcolor,n),g.legendScrollBtnColor=(0,e.pluck)(m.legendscrollbtncolor,n),g.minimiseWrappingInLegend=(0,e.pluckNumber)(m.minimisewrappinginlegend,0),g.flatScrollBars=(0,e.pluckNumber)(m.flatscrollbars,0),g.scrollBar3DLighting=(0,e.pluckNumber)(m.scrollbar3dlighting,1),g.orderReversed=!1,a.setStateCosmetics("hidden",{symbol:{fill:(0,t.convertColor)((0,e.pluck)(m.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1")),stroke:(0,t.convertColor)((0,e.pluck)(m.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))},text:{fill:(0,t.convertColor)((0,e.pluck)(m.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))}}),a.setStateCosmetics("default",{text:{fill:(0,t.convertColor)(N),"font-family":w,cursor:S?e.preDefStr.POINTER:"default","font-size":C,"line-height":i,"vertical-align":e.POSITION_TOP,"text-anchor":e.POSITION_START,"font-weight":I.fontWeight[(0,e.pluckNumber)(m.legenditemfontbold,0)]||e.BLANKSTRING},symbol:{bgColor:(0,e.pluck)(m.legendiconbgcolor),cursor:S?e.preDefStr.POINTER:"default",borderColor:(0,e.pluck)(m.legendiconbordercolor),bgAlpha:(0,e.pluck)(m.legendiconbgalpha,m.legendiconalpha,100),borderAlpha:(0,e.pluck)(m.legendiconborderalpha,m.legendiconalpha,100),borderThickness:(0,e.pluckNumber)(m.legendiconborderthickness),startAngle:(0,e.pluckNumber)(m.legendiconstartangle,45),sides:(0,e.pluckNumber)(m.legendiconsides,4)}}),a.setStateCosmetics("hover",function(e,i){return i.hasState("hidden")||(!e.text&&(e.text={}),e.text.fill=(0,t.convertColor)(k.replace(/^#?([a-f0-9]+)/gi,"#$1")),e.text.cursor="inherit"),e}),g.legendAllowDrag&&!g._dragEvtListenerBinded?(a.addEventListener("dragstart",g.handlers.dragstart),a.addEventListener("dragmove",g.handlers.dragmove),g._dragEvtListenerBinded=!0):(a.removeEventListener("dragstart",g.handlers.dragstart),a.removeEventListener("dragmove",g.handlers.dragmove),g._dragEvtListenerBinded=!1)}getLegendState(){return this._legendState}hasState(e){var t,i,n=this.getLegendState();for(t=0,i=n.length;t<i;t++)if(n[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,i,n=1;if(e)for(t=0,i=this._legendState.length;t<i&&n;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),n=0);else this._legendState.length=0;this.asyncDraw()}setStateCosmetics(e,t){this._stateCosmetics[e]=t}removeStateCosmetics(e){delete this._stateCosmetics[e]}getStateCosmetics(e){return this._stateCosmetics[e]}hide(){var e=this.getFromEnv("chart").getChildContainer("legendGroup");e&&e.hide()}}exports.default=N;
},{"../../lib/lib":20,"../../lib/lib-graphics":21,"../../../core/component-interface":62,"./legend-item":180,"../../dependency-manager":17,"../../animation-rules/legend-animation":179,"../../schedular":18}],133:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(n){let t;(0,e.componentFactory)(n,r.default,"legend"),(t=n.getChildren("legend")[0]).configure(),n.addToEnv("legend",t),n.config.showLegend||t.remove()};var e=require("../lib/lib"),n=require("../legend/discrete/legend"),r=t(n);function t(e){return e&&e.__esModule?e:{default:e}}
},{"../lib/lib":20,"../legend/discrete/legend":146}],116:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./cartesian"),t=l(e),a=require("../_internal/common-chart-api/legend-spacemanager"),r=require("../_internal/factories/multiseries-dataset"),n=l(r),i=require("../_internal/factories/legend"),s=l(i);function l(e){return e&&e.__esModule?e:{default:e}}class o extends t.default{constructor(){super(),this.registerFactory("dataset",n.default,["vCanvas"]),this.registerFactory("legend",s.default)}static getName(){return"MSCartesian"}getName(){return"MSCartesian"}getType(){return"chartAPI"}_createLayers(){super._createLayers();let e=this.getFromEnv("animationManager");this.getChildContainer("legendGroup")||this.addChildContainer("legendGroup",e.setAnimation({el:"group",attr:{name:"legend"},component:this,container:this.getContainer("parentgroup"),label:"group"}))}_manageLegendSpace(){a._manageLegendSpace.call(this)}manageGradientLegendSpace(e){return a.manageGradientLegendSpace.call(this,e)}}exports.default=o;
},{"./cartesian":58,"../_internal/common-chart-api/legend-spacemanager":131,"../_internal/factories/multiseries-dataset":132,"../_internal/factories/legend":133}],187:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t={}){this.rawConfig=JSON.parse(JSON.stringify(t)),this.config={animConfig:{}},this.store={}}getType(){return this._getConfig("type")}_setToStore(t,e){this.store[t]=e}_getFromStore(t){return this.store[t]}_setConfig(t,e){this.config[t]=e}_getConfig(t=""){return""===t?this.config:this.config[t]}getAttribute(t=""){return""===t?this.rawConfig:this.rawConfig[t]}show(){let t=this._getFromStore("element");this._setConfig("isVisible",!0),t&&t.show()}hide(){let t=this._getFromStore("element"),e=this._getFromStore("animationManager");this._setConfig("isVisible",!1),t&&e.setAnimation({el:t,component:this._getFromStore("component"),doNotRemove:!0,callback:function(){this.hide()},label:this.rawConfig.animationLabel})}dispose(){let t,e,o=this._getFromStore("controller").retrieveItem(this.getId(),!0);o&&(t=o._getFromStore("animationManager"),(e=o._getFromStore("element"))&&t.setAnimation({el:e,component:o._getFromStore("component"),label:this.rawConfig.animationLabel}))}}exports.default=t;
},{}],222:[function(require,module,exports) {
function t(t){return"[object Object]"===Object.prototype.toString.call(t)}module.exports=t;
},{}],221:[function(require,module,exports) {
var r=require("./internal/_curry3"),e=require("./internal/_has"),n=r(function(r,n,i){var u,a={};for(u in n)e(u,n)&&(a[u]=e(u,i)?r(u,n[u],i[u]):n[u]);for(u in i)e(u,i)&&!e(u,a)&&(a[u]=i[u]);return a});module.exports=n;
},{"./internal/_curry3":209,"./internal/_has":224}],207:[function(require,module,exports) {
var r=require("./internal/_curry3"),e=require("./internal/_isObject"),n=require("./mergeWithKey"),i=r(function r(i,t,u){return n(function(n,t,u){return e(t)&&e(u)?r(i,t,u):i(n,t,u)},t,u)});module.exports=i;
},{"./internal/_curry3":209,"./internal/_isObject":222,"./mergeWithKey":221}],196:[function(require,module,exports) {
var e=require("./internal/_curry2"),r=require("./mergeDeepWithKey"),n=e(function(e,n){return r(function(e,r,n){return n},e,n)});module.exports=n;
},{"./internal/_curry2":186,"./mergeDeepWithKey":207}],188:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let e=1.2,t=/\{br\}\s*/gi,r="",n="<br />";const i=function(){var e={};return function(t){var r,n,i,o,a,l,f=(t=t||this)&&t.FCcolor||t,u=f.color,p=f.ratio,g=f.angle,c=f.alpha,h=f.r,x=f.cx,d=f.cy,v=f.fx,N=f.fy,F=f.gradientUnits,y=f.x1,b=f.y1,z=f.x2,j=f.y2,S=f.radialGradient,H=1;if("string"==typeof t)return e[l="~"+t]||(e[l]=t.replace(/^#?([a-f0-9]{3,6})/gi,"#$1"));if(!(u=u||""))return n;if(r=new RegExp(/[\(\)\s,\xb0#]/g),l=[u,c,p,g,h,x,d,F,v,N,y,z,b,j,S].join("_").replace(r,"_"),e[l])return e[l];if(p=p&&(p+"").split(",")||[],c=(c||0===c)&&(c+"").split(",")||[],u=u.split(","))if(n="",1===u.length)a=u[0].replace(/^#?([a-f0-9]{3,6})/gi,"$1"),n=c.length?"rgba("+s(a).join(",")+","+.01*parseFloat(c[0])+")":a.replace(/^#?([a-f0-9]{3,6})/gi,"#$1");else{for(i=0,o=u.length;i<o;i++)a=u[i].replace(/^#?([a-f0-9]{3,6})/gi,"$1"),isNaN(p[i])||(p[i]=parseFloat(p[i]),a+=":"+p[i],!isNaN(p[i+1])&&(p[i+1]=parseFloat(p[i+1])+p[i])),isNaN(c[i])||""===c[i]||(H=.01*c[i]),u[i]="rgba("+s(a).join(",")+","+H+")",isNaN(p[i])||(p[i]===p[i-1]&&(p[i]+=.001),u[i]=u[i]+":"+p[i]);n+=u.join("-"),void 0!==h||void 0!==v||void 0!==x||f.radialGradient?n="xr("+[v,N,h,x,d,F].join(",")+")"+n:(n="-"+n,(void 0!==y||void 0!==b||void 0!==z||void 0!==j)&&(n="("+[y,b,z,j,F].join(",")+")"+n),void 0===g&&(g=0),n=360-parseFloat(g)%360+n)}return e[l]=n,n}}();function o(e){return"string"==typeof e?e.replace(t,n):r}function a(...e){var t,r,n;for(r=0,n=e.length;r<n;r+=1)if(((t=e[r])||!1===t||0===t)&&!isNaN(t=+t))return t}function l(...e){let t,r,n;for(r=0,n=e.length;r<n;r++)if(!0===(t=e[r])||!1===t)return t;return!1}function s(e){var t=Math.floor,r=parseInt(e,16),n=t(r/65536),i=t((r-65536*n)/256);return[n,i,t(r-65536*n-256*i)]}function f(...e){var t,r,n;for(r=0,n=e.length;r<n;r+=1)if((t=e[r])||!1===t||0===t||""===t)return t}function u(...e){var t,r,n;for(r=0,n=e.length;r<n;r+=1)if(((t=e[r])||!1===t||0===t)&&!isNaN(t=+t))return 1>t?1:t;return 1}function p(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function g(...e){var t,r,n;for(r=0,n=e.length;r<n;r+=1)if((t=e[r])||!1===t||0===t)return t;return""}function c(e,t){return[e,t]}function h(t){!(t=parseFloat(t))||0>t||(e=t)}function x(){return e}function d(e,t){return"object"==typeof e?((e.fontSize||e["font-size"])&&(!e.fontSize&&e["font-size"]&&(e.fontSize=e["font-size"],delete e["font-size"]),e.lineHeight=(parseFloat(e.fontSize)||t||10)*x()+"px",delete e["line-height"]),!e.lineHeight&&e["line-height"]&&(e.lineHeight=e["line-height"],delete e["line-height"]),e.lineHeight):""}function v(e,t=-1/0,r=1/0){return e<=t?t:e>=r?r:e}function N(e,t){return e||!1===e||0===e?e:t}function F(){var e,t,r,n;return e=arguments[0],1===arguments.length?(t=e.angle,r=e.x,n=e.y):(t=e,r=arguments[1],n=arguments[2]),"r"+(t=t||0)+","+r+","+n}function y(e){return e.replace(/^\s+|\s+$/g,"")}exports.pluckNumber=a,exports.pluckBoolean=l,exports.pluck=f,exports.pluckFontSize=u,exports.toPrecision=p,exports.getFirstValue=g,exports.toRaphaelColor=i,exports.getDashStyle=c,exports.setLineHeight=d,exports.getLineHeightFactor=x,exports.setLineHeightFactor=h,exports.clampNumber=v,exports.getValidValue=N,exports.getSuggestiveRotation=F,exports.parseUnsafeString=o,exports.trim=y;
},{}],225:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let e,t={type:"TypeException",range:"ValueRangeException",impl:"NotImplementedException",param:"ParameterException",run:"RuntimeException",comp:"DesignTimeError",undefined:"UnspecifiedException"},n={},i=0;function r(e,t,n,i){try{e[0].call(t,n,i||{})}catch(e){setTimeout(function(){throw e},0)}}function o(t,n,i){let o,a=0;if(t instanceof Array&&!n.cancelled)for(;a<t.length&&((t[a][1]===n.sender||t[a][1]===e)&&(o=t[a][1]===n.sender?n.sender:{},r(t[a],o,n,i),!0===n.detached&&(t.splice(a,1),a-=1,n.detached=!1)),!0!==n.cancelled);a+=1);}function a(){this.originalEvent&&this.originalEvent.stopPropagation&&this.originalEvent.stopPropagation.call&&this.originalEvent.stopPropagation()}function s(){this.cancelled=!0,this.originalEvent&&this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation.call?this.originalEvent.stopImmediatePropagation():this.originalEvent&&this.originalEvent.stopPropagation&&this.originalEvent.stopPropagation.call&&this.originalEvent.stopPropagation()}function l(){return 0==(this.detached=!0)}function p(){this.defaultPrevented=!0,this.originalEvent&&this.originalEvent.preventDefault&&this.originalEvent.preventDefault.call&&this.originalEvent.preventDefault()}function c(e,t,n){let i,r=e.length;for(i=0;i<r;i+=1)if(e[i][0]===t&&e[i][1]===n)return!0}function f(e,t,i){var r,o,a;if(e instanceof Array){for(r=[],o=0;o<e.length;o+=1)r.push(f(e[o],t,i));return r}return"string"==typeof e?"function"==typeof t?(e=e.toLowerCase(),i?(!i._evtListeners&&(i._evtListeners={}),!(i._evtListeners[e]instanceof Array)&&(i._evtListeners[e]=[]),a=i._evtListeners[e]):(!(n[e]instanceof Array)&&(n[e]=[]),a=n[e]),!c(a,t,i)&&(a.push([t,i]),t)):void h(i,"03091550","param","::addListener",new Error("Invalid Event Listener")):void h(i,"03091549","param","::addListener",new Error("Unspecified Event Type"))}function d(e,t,n){var i,r;if("function"==typeof t){if(e instanceof Array)for(r=0;r<e.length;r+=1)d(e[r],t,n);else if((i=g(e,n))instanceof Array&&i.length)for(r=i.length-1;0<=r;r-=1)i[r][0]===t&&i[r][1]===n&&i.splice(r,1)}else h(n,"03091560","param","::removeListener",new Error("Invalid Event Listener"))}function v(e,t,r,c,f,d){var v,u,h,E,m;return u=g(e=e.toLowerCase(),t),h=g("*",t),E=n[e],m=n["*"],(u&&u.length||h&&h.length||E&&E.length||m&&m.length)&&(o(m,v={type:e,eventType:e,eventId:i+=1,sender:t||new Error("Orphan Event"),stopPropagation:a,stopImmediatePropagation:s,cancelled:!1,preventDefault:p,defaultPrevented:!1,originalEvent:c,detached:!1,data:r,detachHandler:l},r),o(E,v,r),o(g("*",t),v,r),o(g(e,t),v,r)),v&&v.defaultPrevented?d&&"function"==typeof d&&d.call(t,v,r||{}):f&&"function"==typeof f&&f.call(t,v,r||{}),!0}function g(e,t){return"string"==typeof e?(e=e.toLowerCase(),t?t._evtListeners&&t._evtListeners[e]:n[e]):void h(t,"03091559","param","::removeListener",new Error("Unspecified Event Type"))}function u(e,n,i,r,o,a){let s,l="#"+n+" "+(e?e.id:"unknown-source")+r+" "+a+" >> ";o instanceof Error?(o.name=t[i],o.module="FusionCharts"+r,o.level=a,o.message=l+o.message,l=o.message,setTimeout(function(){throw o},0)):l+=o,v(a,e,s={id:n,nature:t[i],source:"FusionCharts"+r,message:l})}function h(e,t,n,i,r){u(e,t,n,i,r,"Error")}exports.addListener=f,exports.removeListener=d,exports.triggerEvent=v,exports.getListeners=g;
},{}],220:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./annotation-interface"),t=n(e),r=require("./event-manager");function n(e){return e&&e.__esModule?e:{default:e}}const i={click:!0,dragstart:!0,dragmove:!0,dragend:!0,dblclick:!0,mousedown:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0};let o=0;function s(e){return!!i[e]}function l(e,t){if(e&&e.hasOwnProperty&&t&&t.call){let r,n,i,o;for(r in e)if(e.hasOwnProperty(r))if((n=e[r])instanceof Array)for(o=n.length,i=0;i<o;i++)t(n[i],r,i);else t(n,r)}}function d(e,t,r){var n;t&&r&&(n=(e=>{e.on&&e.on(t,r)}),e.getGraphicalElement&&l(e.getGraphicalElement(),n),e.getChildContainer&&l(e.getChildContainer(),n))}function a(e,t,r){var n;t&&r&&(n=(e=>{e.off&&e.off(t,r)}),l(e.getGraphicalElement(),n),l(e.getChildContainer(),n))}class u extends t.default{constructor(e={}){super(e),o++}setEditor(e){this.store.editor=e}_setGroupElement(e){this.store.groupElement=e}_getGroupElement(){return this.store.groupElement}getId(e){return this.config.id||`annotation_${e}_${o}`}getGraphicalElement(){let e={};return e[this.getId()]=this._getFromStore("element"),e}getElement(){return this._getFromStore("element")}getBounds(){return this.getElement().getBBox()}addEventListener(e,t){let n,i=this;return!!(e&&e.toLowerCase&&(e=e.toLowerCase(),(0,r.addListener)(e,t,i)))&&(s(e)&&((n=(0,r.getListeners)(e,i))&&1===n.length&&(!i._middleListeners&&(i._middleListeners={}),!i._middleListeners[e]&&(i._middleListeners[e]=function(t){i.fireEvent(e,void 0,void 0,void 0,t)}),d(i,e,i._middleListeners[e]))),t)}removeEventListener(e,t){let n;e&&e.toLowerCase&&(e=e.toLowerCase(),(0,r.removeListener)(e,t,this),s(e)&&((n=(0,r.getListeners)(e,this))&&0===n.length&&this._middleListeners&&this._middleListeners[e]&&a(this,e,this._middleListeners[e])))}fireEvent(e,t,n,i,o){(0,r.triggerEvent)(e,this,t,o,n,i)}}exports.default=u;
},{"./annotation-interface":187,"./event-manager":225}],189:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils"),t=require("./annotation-base"),o=a(t),i=require("ramda/src/mergeDeepRight"),g=a(i);function a(e){return e&&e.__esModule?e:{default:e}}const r=!0,n=100,l="#FF0000",f=0,s=0;class c extends o.default{constructor(e={}){super(e),this.groups=[],this.items=[]}setAttribute(t){var o,i=this,a=i.config;o=(0,g.default)(i.rawConfig,t),i.rawConfig=o,a.id=i.rawConfig.id||i.getId("group"),a.autoScale=(0,e.pluckNumber)(i.rawConfig.autoScale,1),a.scaleText=(0,e.pluckNumber)(i.rawConfig.scaleText,0),a.scaleX=a.origScaleX=(0,e.pluckNumber)(i.rawConfig.xScale)/100,a.scaleY=a.origScaleY=(0,e.pluckNumber)(i.rawConfig.yScale)/100,a.scaleImages=(0,e.pluckNumber)(i.rawConfig.scaleImages,0),a.constrainedScale=(0,e.pluckNumber)(i.rawConfig.constrainedScale,1),a.origH=+i.rawConfig.origH,a.origW=+i.rawConfig.origW,a.link=i.rawConfig.link,a.color=i.rawConfig.color||l,a.alpha=(0,e.pluckNumber)(parseFloat(i.rawConfig.alpha),n),a.showShadow=(0,e.pluckNumber)(i.rawConfig.showShadow,f),a.x=(0,e.pluckNumber)(i.rawConfig.x,i.rawConfig.xPos,s),a.y=(0,e.pluckNumber)(i.rawConfig.y,i.rawConfig.yPos,s),a.font=(0,e.pluck)(i.rawConfig.font,"Verdana, sans"),a.fontSize=(0,e.pluckFontSize)(i.rawConfig.fontSize,10),a.textAlign=(0,e.pluck)(i.rawConfig.textAlign),a.textVAlign=(0,e.pluck)(i.rawConfig.textVAlign),a.rotateText=(0,e.pluck)(i.rawConfig.rotateText),a.wrapText=(0,e.pluck)(i.rawConfig.wrapText),a.grpXShift=(0,e.pluckNumber)(i.rawConfig.grpXShift,0),a.grpYShift=(0,e.pluckNumber)(i.rawConfig.grpYShift,0),a.xShift=(0,e.pluckNumber)(i.rawConfig.xShift,0),a.yShift=(0,e.pluckNumber)(i.rawConfig.yShift,0),a.toolText=i.rawConfig.toolText,a.isVisible=(0,e.pluckBoolean)(i.rawConfig.isVisible,r)}updateScale(){var e=Math.min;let t,o,i,g,a,r=this,n=r._getConfig("origScaleX"),l=r._getConfig("origScaleY"),f=r._getFromStore("paper"),s=f.height,c=f.width,C=r._getConfig("autoScale"),u=r._getConfig("constrainedScale");r._setConfig("origW",+r._getConfig("origW")||c),r._setConfig("origH",+r._getConfig("origH")||s),C?(o=c/r._getConfig("origW")*(+n||1),i=s/r._getConfig("origH")*(+l||1)):o=i=1,t=e(o,i),r._setConfig("scaleValue",t),(0<C||isNaN(r._getConfig("scaleX")))&&(g=u?t:o,r._setConfig("scaleX",g)),(0<C||isNaN(r._getConfig("scaleY")))&&(a=u?t:i,r._setConfig("scaleY",a)),r._setConfig("scaleFont",r._getConfig("scaleText")?e(r._getConfig("scaleX"),r._getConfig("scaleY")):1),r._setConfig("scaleImageX",r._getConfig("scaleImages")?r._getConfig("scaleX"):1),r._setConfig("scaleImageY",r._getConfig("scaleImages")?r._getConfig("scaleY"):1)}updateAttr(e){let t,o,i,g=this,a=g.config;for(t in e)e[t]&&(a[t]=e[t]);o=g.getScaledVal(g._getConfig("grpXShift"))+g._getConfig("xShift"),i=g.getScaledVal(g._getConfig("grpYShift"))+g._getConfig("yShift"),g._setConfig("attr",{transform:`T${o},${i}`})}attachItem(e){this.items.push(e),e._setToStore("annotation-group",this),e.groupConfig={},e._setGroupElement(this._getFromStore("element"))}retrieveItem(e){return find.call(this.items,t=>t.getId()===e)}getScaledVal(e,t){let o,i=this;return i?e*(o=t?i._getConfig("scaleX"):(!1===t?i._getConfig("scaleY"):i._getConfig("scaleValue"))||1):e}getScaledFont(e){return this?e*this._getConfig("scaleFont"):e}getScaledImageVal(e,t){let o,i=this;return i?e*(o=(t?i._getConfig("scaleImageX"):i._getConfig("scaleImageY"))||1):e}_draw(){var e,t,o=this,i=o._getGroupElement(),g=this._getFromStore("element"),a=o._getConfig("attr")||{},r=o._getFromStore("animationManager");e=o.getScaledVal(o._getConfig("grpXShift"))+o._getConfig("xShift"),t=o.getScaledVal(o._getConfig("grpYShift"))+o._getConfig("yShift"),a.name=o._getConfig("id"),a.transform=a.transform||`T${e},${t}`,a.opacity=o._getConfig("isVisible")?o._getConfig("alpha")/100:0,g=r.setAnimation({el:g||"group",attr:a,container:i,component:o._getFromStore("component"),dom:"group"}),o._setToStore("element",g)}dispose(){let e,t,o,i,g=this._getFromStore("controller"),a=g.retrieveGroup(this.getId(),!0),r=a.items||[];for(i=0;i<r.length;i++)(o=g.retrieveItem(r[i].getId(),!0))&&o.dispose();e=a._getFromStore("animationManager"),(t=a._getFromStore("element"))&&e.setAnimation({el:t,component:a._getFromStore("component")})}}exports.default=c;
},{"./utils":188,"./annotation-base":220,"ramda/src/mergeDeepRight":196}],216:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=require("ramda/src/mergeDeepRight"),e=a(o),t=require("./annotation-base"),r=a(t),i=require("./utils");function a(o){return o&&o.__esModule?o:{default:o}}let n,g;const l="#FF0000",f="#000000",s=100,p=0,c=2,h=5,C=3,u=360,d=0,w=0,m="",_="radial",x=0,k=!0,y=1e3,b=o=>{let{height:e,width:t,vAlign:r,align:i,x:a,y:n}=o,g={x:a,y:n};return"center"===i?g.x=a-t/2:"right"===i&&(g.x=a-t),"middle"===r?g.y=n-e/2:"bottom"===r&&(g.y=n-e),g},S=o=>o===g?g:1;class F extends r.default{setAttribute(o){let t=this,r={},a=t.config,n=t._getFromStore("annotation-group");null!=n&&(this.groupConfig.x=n._getConfig("x"),this.groupConfig.y=n._getConfig("y"),this.groupConfig.grpXShift=n._getConfig("grpXShift"),this.groupConfig.grpYShift=n._getConfig("grpYShift"),this.groupConfig.color=n._getConfig("color"),this.groupConfig.alpha=n._getConfig("alpha"),this.groupConfig.font=n._getConfig("font"),this.groupConfig.fontSize=n._getConfig("fontSize"),this.groupConfig.textAlign=n._getConfig("textAlign"),this.groupConfig.textVAlign=n._getConfig("textVAlign"),this.groupConfig.rotateText=n._getConfig("rotateText"),this.groupConfig.wrapText=n._getConfig("wrapText"),this.groupConfig.toolText=n._getConfig("toolText"),this.groupConfig.scaleX=n._getConfig("scaleX"),this.groupConfig.scaleY=n._getConfig("scaleY"),this.groupConfig.scaleImageX=n._getConfig("scaleImageX"),this.groupConfig.scaleImageY=n._getConfig("scaleImageY"),this.groupConfig.link=n._getConfig("link")),r=(0,e.default)(t.rawConfig,o),t.rawConfig=r,a.id=(0,i.pluck)(t.rawConfig.id,t.getId("shape")),a.type=t.rawConfig.type,a.color=t._getFillColor(t.rawConfig,this.groupConfig),a.link=(0,i.pluck)(t.rawConfig.link,t.groupConfig.link),a.borderThickness=(0,i.pluckNumber)(parseFloat(t.rawConfig.borderThickness),parseFloat(t.rawConfig.thickness),c),a.showBorder=(0,i.pluckNumber)(t.rawConfig.showBorder,parseFloat(t.rawConfig.borderThickness),parseFloat(t.rawConfig.thickness),S(t.rawConfig.borderColor),S(t.rawConfig.borderAlpha),p),a.borderColor=t._getBorderColor(t.rawConfig),a.dashed=(0,i.pluckNumber)(t.rawConfig.dashed,d),a.dashLen=(0,i.pluckNumber)(t.rawConfig.dashLen,h),a.dashGap=(0,i.pluckNumber)(parseFloat(t.rawConfig.dashGap),C),a.dashArrayStr=a.dashed?(0,i.getDashStyle)(a.dashLen,a.dashGap):"none",a.x=(0,i.pluckNumber)(t.rawConfig.x,t.rawConfig.xPos,0),a.y=(0,i.pluckNumber)(t.rawConfig.y,t.rawConfig.yPos,0),a.tox=(0,i.pluckNumber)(t.rawConfig.toX,a.x,0),a.toy=(0,i.pluckNumber)(t.rawConfig.toY,a.y,0),0<=a.toy&&0<=a.y&&a.toy<a.y&&([a.y,a.toy]=[a.toy,a.y]),0<=a.tox&&0<=a.x&&a.tox<a.x&&([a.x,a.tox]=[a.tox,a.x]),a.showShadow=(0,i.pluckNumber)(t.rawConfig.showShadow,n.config.showShadow,w),a.toolText=(0,i.getFirstValue)(t.rawConfig.toolText,this.groupConfig.toolText,m),a.isVisible=(0,i.pluckBoolean)(t.rawConfig.isVisible,k),a.animConfig.animDuration=(0,i.pluckNumber)(t.rawConfig.animConfig&&t.rawConfig.animConfig.animDuration,y),t._configureShape(t.rawConfig)}_getEditorConfig(){return this}_getBorderColor(o){let e=this,t="none",r={color:"",alpha:""};return"line"!==e.getType()&&(r.color=e.config.rawBorderColor=(0,i.pluck)(o.borderColor,o.fillColor,o.color,f),0===e.config.showBorder?(r.alpha=1,e.config.borderThickness=1):r.alpha=e.config.rawBorderAlpha=(0,i.pluckNumber)(parseFloat(o.borderAlpha),parseFloat(o.alpha),s),t=(0,i.toRaphaelColor)(r)),t}_getFillColor(o,e){let t=this,r=t.getType(),a={color:"",alpha:"",angle:"",ratio:"",radialGradient:"circle"===r||"arc"===r};return"line"===r||"image"===r?(a.color=o.color||e.color||l,a.alpha=(0,i.pluckNumber)(parseFloat(o.alpha),e.alpha,s)):(a.color=o.fillColor||o.color||e.color||l,a.alpha=(0,i.pluck)(o.fillAlpha,parseFloat(o.alpha),e.alpha,s),a.angle=u-(0,i.pluckNumber)(o.fillAngle,x),a.ratio=(0,i.pluck)(o.fillRatio),o.fillPattern&&(a.radialGradient=o.fillPattern.toLowerCase()===_||(0,i.pluckNumber)(o.fillPattern)),a.radialGradient&&(a.gradientUnits="objectBoundingBox",a.cx=.5,a.cy=.5,a.fx=.5,a.fy=.5)),t.config.rawColor=a.color,t.config.rawAlpha=a.alpha,t.config.rawAngle=a.angle,t.config.rawFillPattern=a.radialGradient?"radial":"linear",t.config.rawRatio=a.ratio,(0,i.toRaphaelColor)(a)}static destroySelectionBox(){n&&n.remove()}_applyAttr(o){var e,t=this,r=t._getFromStore("annotation-group"),i=t.rawConfig.animationLabel,a=r.rawConfig.animationLabel,n=t.store,g=t._getFromStore("animationManager"),l=t.config.elementType,f=t._getFromStore("element"),s=t._getFromStore("toolTipController"),p=t._getConfig("toolText");("image"!==l||t.config.url)&&(e=t.rawConfig.css||{},t.rawConfig.link&&(e.cursor=e.cursor||"pointer"),(f=g.setAnimation({el:f||l,attr:o,css:e,container:t._getGroupElement(),component:t._getFromStore("component"),label:i||a||l})).shadow({opacity:0===t.config.showShadow?0:1,useFilter:"path"===l?0:1}),f.on("click",function(){t.config.link&&t._getFromStore("clickFN").call({link:t.config.link},!0)}),n.element||"image"!==l||(f.on("load",function(){let o=f._.RefImg,e=o.height,r=o.width,i=t._getConfig("align"),a=t._getConfig("vAlign"),n=t._getConfig("xScale"),g=e*t._getConfig("yScale"),l=r*n,s=b({x:f.attr("x"),y:f.attr("y"),height:g,width:l,align:i,vAlign:a});f.attr({x:s.x,y:s.y,height:g,width:l}),t.rawConfig.onload&&t.rawConfig.onload.call(t,f.getBBox())}),f.on("error",function(){t.rawConfig.onerror&&t.rawConfig.onerror.call(t,f)})),n.element=f,t.config.isVisible?f.show():f.hide(),f&&(p&&""!==p?s&&s.enableToolTip(f,p):s&&s.disableToolTip(f)))}getScaledVal(o,e){let t=this._getFromStore("annotation-group");return t?t.getScaledVal(o,e):o}getScaledFont(o){let e=this._getFromStore("annotation-group");return e?e.getScaledFont(o):o}getScaledImageVal(o,e){let t=this._getFromStore("annotation-group");return t?t.getScaledImageVal(o,e):o}_draw(){var o,e=this,t=e._getFromStore("paper");o=e._getAnnotationAttrs(t),e._applyAttr(o)}}exports.default=F;
},{"ramda/src/mergeDeepRight":196,"./annotation-base":220,"./utils":188}],190:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils"),a=require("./annotation-shape"),r=i(a);function i(e){return e&&e.__esModule?e:{default:e}}const t=180,l=360,n=0,s=0,u=360,d=700,o=350,c=e=>e.startAngle===s&&e.endAngle===u,g=e=>0<e.innerRadius||0<e.innerYRadius;function f(e){return e*(Math.PI/t)}class p extends r.default{_configureShape(a){let r=this,i=r._getFromStore("paper"),t=i&&i.width||d,l=i&&i.height||o,f=Math.max(t,l),p=Math.sqrt(f);r.config.radius=a.radius,r.config.xRadius=(0,e.pluckNumber)(parseFloat(a.radius),parseFloat(a.xRadius),p),r.config.yRadius=(0,e.pluckNumber)(parseFloat(a.yRadius),r.config.xRadius),r.config.startAngle=(0,e.pluckNumber)(parseFloat(a.startAngle),s),r.config.endAngle=(0,e.pluckNumber)(parseFloat(a.endAngle),u),r.config.innerRadius=(0,e.pluckNumber)(parseFloat(a.innerRadius),n),r.config.innerYRadius=(0,e.pluckNumber)(parseFloat(a.innerYRadius),r.config.innerRadius,n),r.config.elementType="arc"===r.config.type?"ringpath":c(r.config)&&!g(r.config)?"ellipse":"ringpath"}_getExtraEditableRequests(){let a=this,r=[{name:"radius",value:(0,e.toPrecision)(a.config.xRadius,2)},{name:"startAngle",value:a.config.startAngle},{name:"endAngle",value:a.config.endAngle},{name:"fillColor",value:a.config.rawColor},{name:"fillAlpha",value:a.config.rawAlpha},{name:"fillRatio",value:(0,e.getFirstValue)(a.config.rawRatio,"")},{name:"fillAngle",value:a.config.rawAngle},{name:"fillPattern",value:"radial"===a.config.rawFillPattern},{name:"showBorder",value:1===a.config.showBorder},{name:"borderColor",value:a.config.rawBorderColor},{name:"borderThickness",value:a.config.borderThickness},{name:"borderAlpha",value:a.config.rawBorderAlpha}];return"arc"===a.config.type&&r.push({name:"innerRadius",value:a.config.innerRadius}),r}updateAttr(a){let r,i,t=this,n=this.config,s=t._getFromStore("paper"),u=t.getScaledVal(n.xRadius),d=t.getScaledVal(n.yRadius),o=t.getScaledVal(n.innerRadius),c=t.getScaledVal(n.innerYRadius);switch((0,e.pluck)(n.radius)||(n.radius=s.width<s.height?t.getScaledVal(s.width):t.getScaledVal(s.height),n.radius*=.3,o>n.radius&&(o+=n.radius,n.radius=o-n.radius,o-=n.radius),u=d=n.radius,c=o),n.elementType){case"ringpath":r={ringpath:i=[(0,e.pluckNumber)(a.x,t.getScaledVal(n.x,!0)),(0,e.pluckNumber)(a.y,t.getScaledVal(n.y,!1)),u,o,f(l-n.endAngle),f(l-n.startAngle),d,c]};break;default:r={cx:(0,e.pluckNumber)(a.x,t.getScaledVal(n.x,!0)),cy:(0,e.pluckNumber)(a.y,t.getScaledVal(n.y,!1))}}t._setConfig("attr",r)}_getAnnotationAttrs(){let e,a=this,r=a.config,i=a._getConfig("attr")||{},t=r.x,n=r.y,s=a.getScaledVal(r.xRadius),u=a.getScaledVal(r.yRadius),d=a.getScaledVal(r.innerRadius),o=a.getScaledVal(r.innerYRadius),c=r.startAngle,g=r.endAngle,p=r.borderColor,h=r.borderThickness,m=r.dashArrayStr,R=r.color;switch(r.xRadius||(s=0),r.yRadius||(u=0),i.fill=R,i.stroke=p,i["stroke-width"]=h,i["stroke-dasharray"]=m,a.config.elementType){case"ringpath":e=[a.getScaledVal(t,!0),a.getScaledVal(n,!1),s,d,f(l-g),f(l-c),u,o],i.ringpath=i.ringpath||e;break;default:i.rx=s,i.ry=u,i.cx=void 0===i.cx?a.getScaledVal(t,!0):i.cx,i.cy=void 0===i.cy?a.getScaledVal(n,!1):i.cy}return i}}exports.default=p;
},{"./utils":188,"./annotation-shape":216}],191:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./utils"),e=require("./annotation-shape"),a=l(e);function l(t){return t&&t.__esModule?t:{default:t}}function r(t){return"9">=t&&"0"<=t||"-"===t||"."===t?0:"z">=t&&"a"<=t||"Z">=t&&"A"<=t?1:2}class o extends a.default{_configureShape(e){let a=this;a.config.pathStr=(0,t.pluck)(e.path),a.config.x=(0,t.pluckNumber)(e.x,0),a.config.y=(0,t.pluckNumber)(e.y,0),a.config.tox=(0,t.pluckNumber)(e.toX,a.config.x),a.config.toy=(0,t.pluckNumber)(e.toY,a.config.y),a.config.elementType="path"}getExtraEditableRequests(){let t=this;return[{name:"thickness",value:t.config.borderThickness},{name:"color",value:t.config.rawColor},{name:"alpha",value:t.config.rawAlpha}]}getScaledPath(){let e,a,l,o,c,g=this,n=g.config.pathStr,i=[],S="";for(c=n&&n.length,l=0;l<c;l++){for(o=l,a="",e=r(n[l]);o<c&&r(n[o])===e;)a+=n[o],o++;""!==(a=(0,t.trim)(a))&&2>e&&i.push(a),l=o===l?o:o-1}for(c=i.length,l=0;l<c;)switch(S+=i[l],i[l].toLowerCase()){case"m":case"l":case"t":S+=g.getScaledVal(+i[l+1],!0).toString()+",",S+=g.getScaledVal(+i[l+2],!1).toString(),l+=3;break;case"s":case"q":S+=g.getScaledVal(+i[l+1],!0).toString()+",",S+=g.getScaledVal(+i[l+2],!1).toString()+",",S+=g.getScaledVal(+i[l+3],!0).toString()+",",S+=g.getScaledVal(+i[l+4],!1).toString(),l+=5;break;case"h":S+=g.getScaledVal(+i[l+1],!0).toString(),l+=2;break;case"v":S+=g.getScaledVal(+i[l+1],!1).toString(),l+=2;break;case"c":S+=g.getScaledVal(+i[l+1],!0).toString()+",",S+=g.getScaledVal(+i[l+2],!1).toString()+",",S+=g.getScaledVal(+i[l+3],!0).toString()+",",S+=g.getScaledVal(+i[l+4],!1).toString()+",",S+=g.getScaledVal(+i[l+5],!0).toString()+",",S+=g.getScaledVal(+i[l+6],!1).toString(),l+=7;break;case"a":S+=g.getScaledVal(+i[l+1],!0).toString()+",",S+=g.getScaledVal(+i[l+2],!1).toString()+",",S+=g.getScaledVal(+i[l+3],!0).toString()+",",S+=i[l+4]+",",S+=i[l+5]+",",S+=g.getScaledVal(+i[l+6],!0).toString()+",",S+=g.getScaledVal(+i[l+7],!1).toString(),l+=8;break;case"z":default:l++}return S.toString()}updateAttr(e){let a,l,r,o,c=this,g=c.config,n={};a=(0,t.pluckNumber)(e.x,c.getScaledVal(g.x,!0)),l=(0,t.pluckNumber)(e.y,c.getScaledVal(g.y,!1)),r=(0,t.pluckNumber)(e.toX,a,c.getScaledVal(g.tox,!0)),o=(0,t.pluckNumber)(e.toY,l,c.getScaledVal(g.toy,!1)),g.pathStr?(n.path=c.getScaledPath(),n.transform=`T${a},${l}`):n.path=`M${a},${l}L${r},${o}`,c._setConfig("attr",n)}_getAnnotationAttrs(){let t,e,a,l,r,o=this,c=o.config,g=o._getConfig("attr")||{},n=c.borderThickness,i=c.dashArrayStr,S=c.color;return g.stroke=S,g.fill=S,g["stroke-width"]=n,g["stroke-dasharray"]=i,t=g.x||o.getScaledVal(c.x,!0),e=g.y||o.getScaledVal(c.y,!1),a=g.toX||o.getScaledVal(c.tox,!0),l=g.toY||o.getScaledVal(c.toy,!1),g.path?g:((r=o.getScaledPath())?(g.path=r,g.transform=g.transform||`T${t},${e}`):g.path=g.path||`M${t},${e}L${a},${l}`,g)}}exports.default=o;
},{"./utils":188,"./annotation-shape":216}],192:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils"),a=require("./annotation-shape"),t=r(a);function r(e){return e&&e.__esModule?e:{default:e}}const l=0;class o extends t.default{_configureShape(a){this.config.xRadius=(0,e.pluckNumber)(parseFloat(a.radius),l),this.config.elementType="rect"}getExtraEditableRequests(){let a=this;return[{name:"radius",value:(0,e.toPrecision)(a.config.xRadius,2)},{name:"fillColor",value:a.config.rawColor},{name:"fillAlpha",value:a.config.rawAlpha},{name:"fillRatio",value:(0,e.getFirstValue)(a.config.rawRatio,"")},{name:"fillAngle",value:a.config.rawAngle},{name:"fillPattern",value:"radial"===a.config.rawFillPattern},{name:"showBorder",value:1===a.config.showBorder},{name:"borderColor",value:a.config.rawBorderColor},{name:"borderThickness",value:a.config.borderThickness},{name:"borderAlpha",value:a.config.rawBorderAlpha}]}updateAttr(a){var t=Math.abs;let r,l,o,i,n=this,d=this.config;r=(0,e.pluckNumber)(a.x,n.getScaledVal(d.x,!0)),l=(0,e.pluckNumber)(a.y,n.getScaledVal(d.y,!1)),o=(0,e.pluckNumber)(a.toX,n.getScaledVal(d.tox,!0)),0<=(i=(0,e.pluckNumber)(a.toY,n.getScaledVal(d.toy,!1)))&&0<=l&&i<l&&([l,i]=[i,l]),0<=o&&0<=r&&o<r&&([r,o]=[o,r]),n._setConfig("attr",{x:r,y:l,width:t(o-r),height:t(i-l)})}_getAnnotationAttrs(){var e=Math.abs;let a=this,t=a.config,r=a._getConfig("attr")||{},l=a.getScaledVal(t.x),o=a.getScaledVal(t.y),i=t.xRadius,n=a.getScaledVal(t.tox),d=a.getScaledVal(t.toy),s=t.borderColor,u=t.borderThickness,c=t.dashArrayStr,g=t.color;return r.x=void 0===r.x?l:r.x,r.y=void 0===r.y?o:r.y,r.width=void 0===r.width?e(n-l):r.width,r.height=void 0===r.height?e(d-o):r.height,r.r=a.getScaledVal(i),r.fill=g,r.stroke=s,r["stroke-width"]=u,r["stroke-dasharray"]=c,r}}exports.default=o;
},{"./utils":188,"./annotation-shape":216}],193:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./annotation-shape"),a=r(e),l=require("./utils");function r(e){return e&&e.__esModule?e:{default:e}}const t=5,o=0;class i extends a.default{_configureShape(e){let a=this;a.config.sides=(0,l.pluckNumber)((0,l.clampNumber)(e.sides,3),t),a.config.startAngle=(0,l.pluckNumber)(parseFloat(e.startAngle),o),a.config.xRadius=(0,l.pluckNumber)(parseFloat(e.radius),0),a.config.elementType="polypath"}getExtraEditableRequests(){let e=this;return[{name:"radius",value:(0,l.toPrecision)(e.config.xRadius,2)},{name:"sides",value:e.config.sides},{name:"startAngle",value:e.config.startAngle},{name:"fillColor",value:e.config.rawColor},{name:"fillAlpha",value:e.config.rawAlpha},{name:"fillRatio",value:(0,l.getFirstValue)(e.config.rawRatio,"")},{name:"fillAngle",value:e.config.rawAngle},{name:"fillPattern",value:"radial"===e.config.rawFillPattern},{name:"showBorder",value:1===e.config.showBorder},{name:"borderColor",value:e.config.rawBorderColor},{name:"borderThickness",value:e.config.borderThickness},{name:"borderAlpha",value:e.config.rawBorderAlpha}]}updateAttr(e){let a,r=this,t=r.config;a=[t.sides,(0,l.pluckNumber)(e.x,r.getScaledVal(t.x,!0)),(0,l.pluckNumber)(e.y,r.getScaledVal(t.y,!1)),r.getScaledVal(t.xRadius),t.startAngle,0],r._setConfig("attr",{polypath:a})}_getAnnotationAttrs(){let e=this,a=e.config,l=e._getConfig("attr")||{},r=a.sides,t=a.x,o=a.y,i=a.color,n=a.startAngle,s=a.borderColor,u=a.borderThickness,c=a.dashArrayStr,d=a.xRadius;return l.fill=i,l.stroke=s,l["stroke-width"]=u,l["stroke-dasharray"]=c,l.polypath=l.polypath||[r,e.getScaledVal(t,!0),e.getScaledVal(o,!1),e.getScaledVal(d),n,0],l}}exports.default=i;
},{"./annotation-shape":216,"./utils":188}],217:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t={overflow:"hidden",whitespace:"nowrap","text-overflow":"ellipsis","vertical-align":"middle",position:"relative","text-align":"right","padding-right":"4px","font-size":"0.8em","font-weight":"500"},e={"vertical-align":"middle",border:"1px solid #cccccc",position:"relative","padding-left":"4px","padding-right":"4px","padding-top":"2px","font-size":"0.8em","padding-bottom":"2px"};let i={id:{label:{innerHTML:"Identifier",attrs:{for:"fc-editor-id-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-id-input","data-config-key":"id"},styles:e}},color:{label:{innerHTML:"Color",attrs:{for:"fc-editor-color-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-color-input","data-config-key":"color"},styles:e}},alpha:{label:{innerHTML:"Alpha",attrs:{for:"fc-editor-alpha-input"},styles:t},input:{attrs:{type:"number",min:0,max:100,id:"fc-editor-alpha-input","data-config-key":"alpha"},styles:e}},showBorder:{label:{innerHTML:"Show Border",attrs:{for:"fc-editor-show-border-input"},styles:t},input:{attrs:{type:"checkbox",id:"fc-editor-show-border-input","data-config-key":"showborder"},props:{},styles:e}},dashed:{label:{innerHTML:"Dashed",attrs:{for:"fc-editor-dashed-input"},styles:t},input:{attrs:{type:"checkbox",id:"fc-editor-dashed-input","data-config-key":"dashed"},props:{},styles:e}},dashLen:{label:{innerHTML:"Dash Length",attrs:{for:"fc-editor-dash-len-input"},styles:t},input:{attrs:{type:"number",id:"fc-editor-dash-len-input","data-config-key":"dashlen"},styles:e}},dashGap:{label:{innerHTML:"Dash Gap",attrs:{for:"fc-editor-dash-gap-input"},styles:t},input:{attrs:{type:"number",id:"fc-editor-dash-gap-input","data-config-key":"dashgap"},styles:e}},tooltext:{label:{innerHTML:"Tool Text",attrs:{for:"fc-editor-tool-text-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-tool-text-input","data-config-key":"tooltext"},styles:e}},url:{label:{innerHTML:"URL",attrs:{for:"fc-editor-url-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-url-input","data-config-key":"url"},styles:e}},radius:{label:{innerHTML:"Radius",attrs:{for:"fc-editor-radius-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-url-input","data-config-key":"xradius"},styles:e}},startAngle:{label:{innerHTML:"Start Angle",attrs:{for:"fc-editor-start-angle-input"},styles:t},input:{attrs:{type:"number",min:0,max:360,id:"fc-editor-start-angle-input","data-config-key":"startangle"},styles:e}},endAngle:{label:{innerHTML:"End Angle",attrs:{for:"fc-editor-end-angle-input"},styles:t},input:{attrs:{type:"number",min:0,max:360,id:"fc-editor-end-angle-input","data-config-key":"endangle"},styles:e}},innerRadius:{label:{innerHTML:"Inner Radius",attrs:{for:"fc-editor-inner-radius-input"},styles:t},input:{attrs:{type:"number",id:"fc-editor-inner-radius-input","data-config-key":"innerradius"},styles:e}},fillColor:{label:{innerHTML:"Fill Color",attrs:{for:"fc-editor-fill-color-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-fill-color-input","data-config-key":"fillcolor"},styles:e}},fillAlpha:{label:{innerHTML:"Fill Alpha",attrs:{for:"fc-editor-fill-alpha-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-fill-alpha-input","data-config-key":"fillalpha"},styles:e}},fillRatio:{label:{innerHTML:"Fill Ratio",attrs:{for:"fc-editor-fill-ratio-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-fill-ratio-input","data-config-key":"fillratio"},styles:e}},fillAngle:{label:{innerHTML:"Fill Angle",attrs:{for:"fc-editor-fill-angle-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-fill-angle-input","data-config-key":"fillangle"},styles:e}},fillPattern:{label:{innerHTML:"Radial Gradient",attrs:{for:"fc-editor-fill-pattern-input"},styles:t},input:{attrs:{type:"checkbox",id:"fc-editor-fill-pattern-input","data-config-key":"fillpattern"},props:{},styles:e}},borderColor:{label:{innerHTML:"Border Color",attrs:{for:"fc-editor-border-color-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-border-color-input","data-config-key":"bordercolor"},styles:e}},borderThickness:{label:{innerHTML:"Border Thickness",attrs:{for:"fc-editor-border-thickness-input"},styles:t},input:{attrs:{type:"number",id:"fc-editor-border-thickness-input","data-config-key":"borderthickness"},styles:e}},borderAlpha:{label:{innerHTML:"Border Alpha",attrs:{for:"fc-editor-border-alpha-input"},styles:t},input:{attrs:{type:"number",min:0,max:100,id:"fc-editor-border-alpha-input","data-config-key":"borderalpha"},styles:e}},thickness:{label:{innerHTML:"Thickness",attrs:{for:"fc-editor-thickness-input"},styles:t},input:{attrs:{type:"number",id:"fc-editor-thickness-input","data-config-key":"thickness"},styles:e}},sides:{label:{innerHTML:"Sides",attrs:{for:"fc-editor-sides-input"},styles:t},input:{attrs:{type:"number",min:3,id:"fc-editor-sides-input","data-config-key":"sides"},styles:e}},text:{label:{innerHTML:"Text",attrs:{for:"fc-editor-text-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-text-input","data-config-key":"text"},styles:e}},font:{label:{innerHTML:"Font",attrs:{for:"fc-editor-text-font-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-text-font-input","data-config-key":"font"},styles:e}},fontSize:{label:{innerHTML:"Font Size",attrs:{for:"fc-editor-text-size-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-text-size-input","data-config-key":"fontsize"},styles:e}},bold:{label:{innerHTML:"Bold",attrs:{for:"fc-editor-text-bold-input"},styles:t},input:{attrs:{type:"checkbox",id:"fc-editor-text-bold-input","data-config-key":"bold"},props:{},styles:e}},italic:{label:{innerHTML:"Italics",attrs:{for:"fc-editor-text-italic-input"},styles:t},input:{attrs:{type:"checkbox",id:"fc-editor-text-italic-input","data-config-key":"italic"},props:{},styles:e}},textBackground:{label:{innerHTML:"Background",attrs:{for:"fc-editor-text-bg-input"},styles:t},input:{attrs:{type:"text",id:"fc-editor-text-bg-input","data-config-key":"bgcolor"},styles:e}}};function r(r){let n,s,l,a,o,d,p,f=[],c=0,u=[];for(n=0,s=r.length;n<s;n++)l=r[n].name,a=r[n].value,o=r[n].labelStyle,d=r[n].inputStyle,"checkbox"===(p=JSON.parse(JSON.stringify(i[l]))).input.attrs.type?p.input.props.checked=a:p.input.attrs.value=a,p.label.styles=o||t,p.input.styles=d||e,u.push(p),2==++c?(f.push(u),u=[],c=0):n===s-1&&(f.push(u),u=[],c=0);return f}exports.default=r;
},{}],194:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./annotation-shape"),t=u(e),l=require("./utils"),i=require("./editable-properties"),a=u(i);function u(e){return e&&e.__esModule?e:{default:e}}class r extends t.default{_configureShape(e){let t=this,i=t.config,a=t.groupConfig.scaleX||1,u=t.groupConfig.scaleY||1;i.url=(0,l.getValidValue)(e.url),i.xScale=(0,l.pluckNumber)(e.xScale,100)/100,i.yScale=(0,l.pluckNumber)(e.yScale,100)/100,i.width=(0,l.pluckNumber)(e.width,0),i.height=(0,l.pluckNumber)(e.height,0),i.align=(0,l.pluck)(e.align,"left"),i.vAlign=(0,l.pluck)(e.vAlign,"top"),i.xScale*=a,i.yScale*=u,i.elementType="image"}getEditorConfig(){let e=this;return e.editorConfig=(0,a.default)([{name:"id",value:e.config.id},{name:"url",value:e.config.url},{name:"tooltext",value:e.config.toolText}]),e.editorConfig}updateAttr(e){let t=this,i=t.config;t._setConfig("attr",{x:(0,l.pluckNumber)(e.x,t.getScaledVal(i.x,!0)),y:(0,l.pluckNumber)(e.y,t.getScaledVal(i.y,!1))})}_getAnnotationAttrs(){let e=this,t=e.config,l=e._getConfig("attr")||{},i=t.url,a=t.x,u=t.y;return l.x=void 0===l.x?e.getScaledVal(a,!0):l.x,l.y=void 0===l.y?e.getScaledVal(u,!1):l.y,l.src=i,l.width=t.width,l.height=t.height,l}}exports.default=r;
},{"./annotation-shape":216,"./utils":188,"./editable-properties":217}],195:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./annotation-shape"),e=l(t),o=require("./editable-properties"),a=l(o),i=require("./utils");function l(t){return t&&t.__esModule?t:{default:t}}const n="bottom",r="top",g="middle",f="bold",c=0,u=2,p=1,d="#FF0000",s=100,h=360,x="radial",m=0,b=10,S="italic",k="normal",w={left:"start",right:"end",center:"middle"},y={top:"bottom",middle:"middle",bottom:"top"},A={0:"0",1:"270",right:"90",cw:"90",left:"270",ccw:"270"};function C(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)?t:/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(t)&&"#"+t}class v extends e.default{_configureShape(t){let e=this,o=e.groupConfig;e.config.text=(0,i.parseUnsafeString)((0,i.pluck)(t.text,t.label,"")),e.config.font=(0,i.pluck)(t.font,o.font,"Verdana, sans"),e.config.fontSize=(0,i.pluckFontSize)(t.fontSize,o.fontSize,b),e.config.align=(0,i.pluck)(w[t.align],w[o.textAlign],"middle"),e.config.vAlign=(0,i.pluck)(y[t.vAlign],y[o.textVAlign],"middle"),e.config.radius=(0,i.pluckNumber)(parseFloat(t.radius),c),e.config.fontWeight=(0,i.pluckNumber)(t.bold,0)?f:k,e.config.fontStyle=(0,i.pluckNumber)(t.italic,0)?S:k,e.config.bgColor=C(t.bgColor)?t.bgColor:"none",e.config.borderThickness=(0,i.pluckNumber)(parseFloat(e.rawConfig.borderThickness),parseFloat(e.rawConfig.thickness),p),e.config.rotateText=(0,i.pluck)(t.rotateText,o.rotateText,"0"),e.config.rotateAngle=A[e.config.rotateText],e.config.wrap=(0,i.pluckNumber)(t.wrap,o.wrapText,t.wrapHeight,t.wrapWidth,1),e.config.wrap&&(e.config.wrapWidth=(0,i.pluckNumber)(t.wrapWidth),e.config.wrapHeight=(0,i.pluckNumber)(t.wrapHeight)),e.config.leftMargin=(0,i.pluckNumber)(t.leftMargin,0),e.config.elementType="text"}getEditorConfig(){let t=this,e=[{name:"id",value:t.config.id},{name:"text",value:t.config.text},{name:"font",value:t.config.font},{name:"fontSize",value:t.config.fontSize},{name:"bold",value:t.config.fontWeight===f},{name:"italic",value:t.config.fontStyle===S},{name:"textBackground",value:t.config.bgColor?t.config.bgColor:""}];return(0,a.default)(e)}getText(){let t,e=this,o=e.config,a=e._getFromStore("smartLabel"),l=o.wrap,n=e._getFromStore("annotation-group"),r=n&&n._getConfig("scaleText"),g=r?e.getScaledVal(o.wrapWidth,!0):o.wrapWidth,f=r?e.getScaledVal(o.wrapHeight,!1):o.wrapHeight,c={fontStyle:o.fontStyle,fontFamily:o.font,fontWeight:o.fontWeight,fontSize:o.fontSize+"px","text-anchor":o.align,"vertical-align":o.vAlign};return(0,i.setLineHeight)(c),a&&a.setStyle(c),t=a&&l?a.getSmartText(o.text,g,f,0).text:o.text}_getFillColor(t,e){let o=this,a=o.getType(),l={color:"",alpha:"",angle:"",ratio:"",radialGradient:"circle"===a||"arc"===a};return l.color=t.fontColor||t.fillColor||t.color||e.color||d,l.alpha=(0,i.pluck)(t.fillAlpha,parseFloat(t.alpha),e.alpha,s),l.angle=h-(0,i.pluckNumber)(t.fillAngle,m),l.ratio=(0,i.pluck)(t.fillRatio),t.fillPattern&&(l.radialGradient=t.fillPattern===x||(0,i.pluckNumber)(t.fillPattern)),l.radialGradient&&(l.gradientUnits="objectBoundingBox",l.cx=.5,l.cy=.5,l.fx=.5,l.fy=.5),o.config.rawColor=l.color,o.config.rawAlpha=l.alpha,o.config.rawAngle=l.angle,o.config.rawFillPattern=l.radialGradient?"radial":"linear",o.config.rawRatio=l.ratio,(0,i.toRaphaelColor)(l)}updateAttr(t){let e,o=this,a=o.config,l=(0,i.pluckNumber)(t.x,o.getScaledVal(a.x,!0)),n=(0,i.pluckNumber)(t.y,o.getScaledVal(a.y,!0));"0"!==a.rotateText&&(e=(0,i.getSuggestiveRotation)(parseFloat(a.rotateAngle),l,n)),o._setConfig("attr",{x:l,y:n,transform:e})}_getAnnotationAttrs(){let t=this,e=t.config,o=t._getConfig("attr")||{},a=t.getText(),l=t.getScaledVal(e.x,!0),n=t.getScaledVal(e.y,!1);return o.x=void 0===o.x?l:o.x,o.y=void 0===o.y?n:o.y,o.text=a,o.fill=e.color,o["text-bound"]=[(0,i.toRaphaelColor)(e.bgColor),e.borderColor,e.borderThickness,u,e.radius,e.dashArrayStr],o["font-style"]=e.fontStyle,o["font-weight"]=e.fontWeight,o["font-family"]=e.font,o["font-size"]=t.getScaledFont(e.fontSize),o["text-anchor"]=e.align,o["vertical-align"]=e.vAlign,"0"!==e.rotateText&&(o.transform=o.transform||(0,i.getSuggestiveRotation)(parseFloat(e.rotateAngle),l,n)),o}}exports.default=v;
},{"./annotation-shape":216,"./editable-properties":217,"./utils":188}],156:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./annotation-interface"),t=w(e),r=require("ramda/src/mergeDeepRight"),o=w(r),i=require("./utils"),n=require("./annotation-group"),s=w(n),u=require("./annotation-circle"),a=w(u),p=require("./annotation-path"),l=w(p),h=require("./annotation-rect"),c=w(h),f=require("./annotation-polygon"),g=w(f),d=require("./annotation-image"),m=w(d),S=require("./annotation-text"),_=w(S);function w(e){return e&&e.__esModule?e:{default:e}}const y=0,b=!0,v=1e3;function T(e){let t;return"circle"===e||"arc"===e?t=new a.default:"line"===e||"path"===e?t=new l.default:"rectangle"===e?t=new c.default:"polygon"===e?t=new g.default:"image"===e?t=new m.default:"text"===e&&(t=new _.default),t}class D extends t.default{constructor(e={}){super(e),this.groups=[],this.setAttribute(e)}setAttribute(e={}){let t={};t=(0,o.default)(e,this.rawConfig),this.rawConfig=t,this.config.groupXShift=(0,i.pluckNumber)(t.groupXShift,y),this.config.groupYShift=(0,i.pluckNumber)(t.groupYShift,y),this.config.isVisible=(0,i.pluckBoolean)(t.isVisible,b),this.config.animConfig.animDuration=(0,i.pluckNumber)(t.animConfig&&t.animConfig.animDuration,v)}createItem(e,t){let r,o;if("group"===e.annotationType)e.groupXShift=(0,i.pluckNumber)(e.groupXShift,this.config.groupXShift),e.groupYShift=(0,i.pluckNumber)(e.groupYShift,this.config.groupYShift),r=new s.default(e),this.groups.push(r);else if(!(r=T(o=e.type&&e.type.toLowerCase())))return;return t instanceof s.default?t.attachItem(r):r._setGroupElement(t),r.setAttribute(e),r._setToStore("controller",this),r}attachModule(e){let t=this;e._setToStore("component",t.resolveDependency("component")),e._setToStore("animationManager",t.resolveDependency("animationManager")),e._setToStore("paper",t.resolveDependency("paper")),e._setToStore("smartLabel",t.resolveDependency("smartLabel")),e._setToStore("toolTipController",t.resolveDependency("toolTipController")),e._setToStore("clickFN",t.resolveDependency("clickFN")),e._setToStore("controller",t)}drawItem(e,t){e._setGroupElement(t),e._draw()}retrieveItem(e,t){var r,o,i,n,s,u=this.groups&&this.groups.length;for(r=0;r<u;r++)for(n=(s=this.groups[r]).items&&s.items.length,o=0;o<n;o++)if((i=s.items[o]).getId()===e)return t&&s.items.splice(o,1),i}retrieveGroup(e,t){var r,o,i=this.groups&&this.groups.length;for(r=0;r<i;r++)if((o=this.groups[r]).getId()===e)return t&&this.groups.splice(r,1),o}injectDependency(e,t){this._setToStore(e,t)}resolveDependency(e){return this._getFromStore(e)}show(e){super.show(e),this.groups.forEach(t=>{t.show(e),t.items.forEach(t=>{t.show(e)})})}hide(e){super.hide(e),this.groups.forEach(t=>{t.hide(e),t.items.forEach(t=>{t.hide(e)})})}dispose(e,t){this.groups.forEach(r=>{r.items.forEach(r=>{r.dispose(e,t)}),r.items=[],r.dispose()}),this.groups=[]}}exports.default=D;
},{"./annotation-interface":187,"ramda/src/mergeDeepRight":196,"./utils":188,"./annotation-group":189,"./annotation-circle":190,"./annotation-path":191,"./annotation-rect":192,"./annotation-polygon":193,"./annotation-image":194,"./annotation-text":195}],157:[function(require,module,exports) {
var r=require("./internal/_curry2"),e=r(function(r,e){var n={};for(var u in e)r(e[u],u,e)&&(n[u]=e[u]);return n});module.exports=e;
},{"./internal/_curry2":186}],154:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=void 0,t="_",r="$",n=".",a=2*Math.PI,i=window,o="",s=",",l=1e-5,c=e=>e*(Math.PI/180),p=(e,t,r=!0)=>{return r||(t=c(t)),{x:e*Math.cos(t),y:e*Math.sin(t)}},h=(e,t,r)=>e.x>=t?e.y<=r?0:3:e.y<=r?1:2,d=e=>{var t=Math.abs,r=Math.min,n=Math.max;let i,o,s,l,c,d,u,x,g,f,y,_=[],m=[-a,-3*a/2,-a/2,-a/4],k=[],C=e.ringpath,w=1/0,v=1/0,b=-1/0,A=-1/0;i=C[2],o=C[3],s=C[4]%a,l=C[5]%a,x=C[0],g=C[1],c=p(i,s),d=p(i,l),c.x+=x,d.x+=x,c.y+=g,d.y+=g,_.push(h(c,C[0],C[1])),_.push(h(d,C[0],C[1])),_.sort(),s===l&&0===s?(f=0,y=4):(f=_[0],y=_[1]);for(let e=f;e<y;e++)(u=p(i,m[e])).x+=x,u.y+=g,k.push(u);k.push(c),k.push(d),c=p(o,s),d=p(o,l),c.x+=x,d.x+=x,c.y+=g,d.y+=g,k.push(c),k.push(d);for(let e=0;e<k.length;e++)b=n(b,k[e].x),w=r(w,k[e].x),A=n(A,k[e].y),v=r(v,k[e].y);return{x:w,y:v,width:t(b-w),height:t(v-A)}},u=(e,t,r)=>{var n=Math.sqrt,i=Math.abs;let o,s,l;return o=e*t/n(t*t+e*e*(l=Math.tan(r))*l),s=e*t/n(e*e+t*t/(l*l)),r>a/4&&r<3*a/4?o*=-1:o=i(o),r>a/2&&r<a?s*=-1:s=i(s),i(o)<=1e-5&&(o=0),i(s)<=1e-5&&(s=0),{x:o,y:s}},x=(e,t)=>{let r,n,a=t.props.element.attr,i=a.radiusYFactor,o=a.r,s=o*i,l=a.cx,c=a.cy,p=a.sAngle,h=a.eAngle;return"x"===e||"middlex"===e||"centerx"===e?n=u(o,s,r=(p+h)/2).x+l:"y"===e||"middley"===e||"centery"===e?n=u(o,s,r=(p+h)/2).y+c:"startx"===e?n=u(o,s,p).x+l:"starty"===e?n=u(o,s,p).y+c:"endx"===e?n=u(o,s,h).x+l:"endy"===e&&(n=u(o,s,h).y+c),n},g=(e,t)=>{let r,n,a,i,o,s,l,c,h=t.props.element.attr.ringpath;return n=h[0],a=h[1],i=h[2],s=h[4],l=h[5],"x"===e||"middlex"===e||"centerx"===e?o=(r=p(i,c=(s+l)/2)).x+n:"y"===e||"middley"===e||"centery"===e?o=(r=p(i,c=(s+l)/2)).y+a:"startx"===e?o=p(i,l).x+n:"starty"===e?o=p(i,l).y+a:"endx"===e?o=p(i,s).x+n:"endy"===e&&(o=p(i,s).y+a),o},f=(e,t)=>{let r,n,a,i,o,s=e.config||e;return"column3D"===t||"bar2D"===t||"bar3D"===t||"paretoColumn"===t||"waterFall2D"===t||"errorBar2D"===t||"candlestick"===t||"heatMap"===t||"dragColumn"===t||"sparkColumn"===t||"marimekko"===t||"task"===t||"column"===t?r={x:(n=s.props.element.attr).x,y:n.y,width:n.width,height:n.height}:"line"===t||"zoomLine"===t||"zoomScatter"===t||"scatter"===t||"spline"===t||"splinearea"===t||"multiaxisline"===t||"stepLine"===t||"errorScatter"===t||"errorLine"===t||"radar"===t||"selectScatter"===t||"dragLine"===t||"dragArea"===t||"kagi"===t||"sparkLine"===t||"area"===t?(a=e._xPos,i=e._yPos,r={x:a-(o=+s.anchorProps.radius||0),y:i-o,width:2*o,height:2*o}):"bubble"===t?r={x:(n=s.props.element.attr).cx-n.r,y:n.cy-n.r,width:2*n.r,height:2*n.r}:"dragNode"===t?(n=s.props.element.attr,"rect"===s.shapeType?r={x:n.x,y:n.y,width:n.width,height:n.height}:(a=s._xPos,i=s._yPos,r={x:a-(o=+s.radius||0),y:i-o,width:2*o,height:2*o})):"boxandwhisker2D"===t?r={x:(n=s.props.upperBoxElem.attr).x,y:n.y,width:n.width,height:n.height}:"category"===t||"polarCategory"===t||"log"===t||"numeric"===t?(r={x:(n=s.props.label.attr).x-s.width/2,y:n.y-s.height/2,width:s.width,height:s.height},"end"===n["text-anchor"]||"left"===n["text-anchor"]?r.x=n.x-s.width:("start"===n["text-anchor"]||"right"===n["text-anchor"])&&(r.x=n.x),"top"===n["vertical-align"]?r.y=n.y:"bottom"===n["vertical-align"]&&(r.y=n.y-s.height)):("doughnut2D"===t||"multiLevelPie"===t||"pie2D"===t)&&(n=s.props.element.attr,r=d(n)),r},y=e=>{let t,r,n="";for(t=0,r=e.length;t<r;t++)" "!==e[t]&&(n+=e[t]);return n},_=(e=[])=>{let t,r,n=[],a=[];for(r=e.length,t=0;t<r;t++)"text"===e[t].type?a.push(e[t]):n.push(e[t]);return n.concat(a)};function m(){var t,r,n;for(r=0,n=arguments.length;r<n;r+=1)if((t=arguments[r])||!1===t||0===t)return t;return e}const k=(e,t)=>{return"startx"===e?t.x:"starty"===e?t.y:"x"===e||"middlex"===e||"centerx"===e?t.x+t.width/2:"y"===e||"middley"===e||"centery"===e?t.y+t.height/2:"endx"===e?t.x+t.width:"endy"===e?t.y+t.height:0},C=function(e,t){return function(r){let n,a,i,o,s=r.split(".").slice(1),l=isNaN(+s[0])?0:+s[0],c=isNaN(+s[0])?s[1]:s[2],p=isNaN(+s[0])?s[2]:s[3];return c=+c,(o=(n=e.getChildren(t)[l]).components).labelIndexArr&&(c=o.labelIndexArr[c]),a=o.labels[c].config,i=f(a,n.getName()),k(p,i)}},w=(e,t,r)=>{let n=t._getFromStore("element"),a=r.getFromEnv("getMouseCoordinate")(r.getFromEnv("chart-container"),e,r),i=t._getFromStore("annotation-group");return{element:n,rawConfig:t.getAttribute(),pageX:a.pageX,pageY:a.pageY,chartX:a.chartX,chartY:a.chartY,annotationId:t.getId(),groupId:i&&i.getId(),annotationOptions:t.rawConfig,groupOptions:i&&i.rawConfig}},v=(t,r)=>(function(n){r.fireChartInstanceEvent("annotationclick",w(n,t,r),e,e,n)}),b=(t,r)=>(function(n){r.fireChartInstanceEvent("annotationrollover",w(n,t,r),e,e,n)}),A=(t,r)=>(function(n){r.fireChartInstanceEvent("annotationrollout",w(n,t,r),e,e,n)}),E=function(){var t=/^@window_/g;return function(r,n,a){var s,l,c,p,h=r.replace(/\[[\'\"]/g,".").replace(/[\'\"]\]/g,o).replace(/\[/g,".@window_").replace(/\]/g,o).split("."),d=i,u=o;for(c=h.length,p=0;p<c;p+=1){if(s=d,(l=h[p]).match(t))d=d[i[l.replace(t,o)]];else{if(d===e||null===d)throw(u||l).replace(t,o)+" is not defined";d=d[l]}u=l}if(!d||"function"!=typeof d.call&&d!==i.alert){if("void"===u)return;setTimeout(function(){throw l.replace(t,o)+"() is not a function"},0)}else d===i.alert?d(n):a?d.apply(s,n.split("__FC_ARG_SEP__")):d.call(s,n)}}();function P(...e){var t,r,n;for(r=0,n=e.length;r<n;r+=1)if(((t=e[r])||!1===t||0===t)&&!isNaN(t=+t))return t}function R(e,t){var r,n={chart:{}},a=t;if(e=e.toLowerCase(),a.linkeddata)for(r=0;r<a.linkeddata.length;r+=1)a.linkeddata[r].id.toLowerCase()===e&&(n=a.linkeddata[r].linkedchart||a.linkeddata[r].linkedmap);return n}function I(e,t){E(e.substr(0,e.indexOf("__FC_ARG_SEP__")),e.substr(e.indexOf("__FC_ARG_SEP__")).replace(/__FC_ARG_SEP__/,""),t)}function F(e){/^j\s*\-/.test(e)?I(e.replace(/^j\s*\-/,o).replace(/\-/,"__FC_ARG_SEP__")):I(e.replace(/^javascript\s*\:/i,o).replace(/[\'\"]?\s*\,\s*[\'\"]?/g,"__FC_ARG_SEP__").replace(/\(\s*[\'\"]?(.*)\)\;?/,"__FC_ARG_SEP__$1").replace(/[\'\"]?$/,""),!0)}function M(t,r){var n=function(e){return e};return function(a){if(!a||!r.config.clickURLOverridesPlotLinks){var l,c,p,h,d,u,x,g,f,y,_=P((t.chart||t.map||{}).unescapelinks,1),m=this.entity||e,k=this.entityBox||e,C=this.link,w=C;if(C!==e){switch(_&&(C=i.decodeURIComponent?i.decodeURIComponent(C):i.unescape(C)),-1!==(C=C.replace(/^\s+/,o).replace(/\s+$/,o)).search(/^[a-z]*\s*[\-\:]\s*/i)&&(y=(d=C.split(/\s*[\-\:]\s*/)[0].toLowerCase()).length),a&&(r.config.hotElemClicked=!0),d){case"j":case"javascript":F(C);break;case"n":C.replace(/^n\s*\-/i,"n-"),i.open(n(C.slice(2)));break;case"f":-1===(l=(C=C.replace(/^f\s*\-/i,"f-")).indexOf("-",2))?i.open(n(C.slice(2))):(c=C.substr(2,l-2))&&i.frames[c]?i.frames[c].location=n(C.slice(l+1)):i.open(n(C.slice(l+1)),c);break;case"p":l=(C=C.replace(/p\s*\-/i,"p-")).indexOf("-",2),p=C.indexOf(s,2),-1===l&&(l=1),h=n(C.slice(l+1)),(f=i.open(h,C.substr(2,p-2),C.substr(p+1,l-p-1)))&&f.focus();break;case"newchart":case"newmap":":"===C.charAt(y)&&(l=C.indexOf("-",y+1),g=C.substring(y+1,l),y=l),l=C.indexOf("-",y+1),"xmlurl"===(u=C.substring(y+1,l).toLowerCase())||"jsonurl"===u?x=C.substring(l+1,C.length):("xml"===u||"json"===u)&&(x=R(C.substring(l+1,C.length),t),u="json"),r.fireChartInstanceEvent("linkedChartInvoked",{alias:g,linkType:u.toUpperCase(),data:x,clickedEntity:m,clickedEntityBox:k});break;default:i.location.href=n(C)}r.fireChartInstanceEvent("linkClicked",{linkProvided:w,linkInvoked:C,linkAction:d&&d.toLowerCase()})}}}}exports.deg2Rad=c,exports.polarToCartesian=p,exports.getQuadrant=h,exports.computePlotBounds=f,exports.computePieSliceBBox=d,exports.computeSliceBounds=g,exports.compute3DSliceBounds=x,exports.cleanMacro=y,exports.pluck=m,exports.arrangeItems=_,exports.axisMacroParser=C,exports.xyCalculator=k,exports.UNDEF=e,exports.UNDERSCORE="_",exports.defaultAnnotationClick=v,exports.defaultAnnotationRollOut=A,exports.defaultAnnotationRollOver=b,exports.DEFAULT_MACRO_PREFIX="$",exports.DEFAULT_MACRO_SEPARATOR=".",exports.getLinkAction=M;
},{}],155:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let a=()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"initial"}];exports.default={"initial.extension.annotation":()=>({"polypath.appearing":a,"text.appearing":a,"image.appearing":a,"ellipse.appearing":a,"ringpath.appearing":a,"path.appearing":a,"rect.appearing":a,"*":null})};
},{}],152:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var e=Math,n=e.cos,a=e.sin,i=e.abs,r=e.pow,s=e.PI,u=2*s,o=r(2,-24),p=.01;t.define&&t.define([{name:"ringpath",ringpath:function(){return this.path(void 0,t._lastArgIfGroup(arguments))},ca:function(t,e,r,h,c,f,A,d){var M,g,l,v,N,_,Z,b,x,I,L,P,j,m,w=f%u-c%u,y=f-c,G=.0001745329;return isNaN(A)&&(A=r),isNaN(d)&&(d=h),this._.ringangle=.5*(c+f),i(y)<o?_=["M",t+r*(M=n(c)),e+A*(g=a(c)),"L",t+h*M,e+d*g,"Z"]:i(y)>o&&+(i(y)%u<o||u-i(y)%u<o)?(_=["M",t-r,e,"A",r,A,0,0,0,t+r,e,"A",r,A,0,0,0,t-r,e],(0!==h||0!==d)&&(_=_.concat(["M",t-h,e,"A",h,d,0,0,1,t+h,e,"A",h,d,0,0,1,t-h,e])),_.push("Z")):(M=n(c),g=a(c),l=n(f),v=a(f),0>(w%=u)&&(w+=u),N=w<s?0:1,L=e+A*g,P=e+A*v,x=t+h*l,j=e+d*v,i((Z=t+r*M)-(b=t+r*l))<p&&i(L-P)<p&&(Z=t+r*n(c+G),L=e+A*a(c+G)),_=["M",Z,L,"A",r,A,0,N,1,b,P,"L",x,j],(0!==h||0!==d)&&(m=e+d*g,i(x-(I=t+h*M))<p&&i(j-m)<p&&(I=t+h*n(c+G),m=e+d*a(c+G)),_.push("A",h,d,0,N,0,I,m)),_.push("Z")),{path:_}}}])};
},{}],153:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){t.define&&t.define([{name:"arcpath",arcpath:function(){return this.path(void 0,t._lastArgIfGroup(arguments))},ca:function(t,e,a,r){var n=r,i=Math.PI*((n-90)/180);return{path:["M",t,e-a,"A",a,a,0,180<n?1:0,1,t+a*Math.cos(i),e+a*Math.sin(i)]}}}])};
},{}],122:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../vendors/fusioncharts-annotations/src/annotation-controller"),e=d(t),o=require("../../../../core/component-interface"),n=d(o),a=require("ramda/src/pickBy"),i=d(a),r=require("./utils"),l=require("../../../dependency-manager"),s=require("./annotation-animation"),c=d(s),h=require("../../../redraphael/redraphael-shapes/redraphael-shapes.ringpath"),g=d(h),p=require("../../../redraphael/redraphael-shapes/redraphael-shapes.arcpath"),u=d(p);function d(t){return t&&t.__esModule?t:{default:t}}const f={animDuration:0},m=["pie2d","doughnut2d"],x=["pie3d","doughnut3d"],w={},y=t=>~t.indexOf(r.DEFAULT_MACRO_PREFIX),k=t=>{var e=+t[0];for(let o,n,a=1,i=t.length;a<i;++a)n=t[a],a%2?o=n:"+"===o?e+=+n:"-"===o&&(e-=+n);return e},b=t=>{let e,o,n,a,i=t.config,l=t.getChildren(),s=l.caption[0],c=l.subCaption[0],h=l.legend&&l.legend[0]||{},g=l.gLegend&&l.gLegend[0]||{},p=s.config,u=c.config,d=p.width||0,f=u.width||0;return"end"===p.align?(e=p.x-d,n=p.x-f):"start"===p.align?e=n=p.x:(e=p.x-d/2,n=p.x-f/2),o=i.gLegendEnabled?g.conf:h.config,a={canvasendx:i.canvasRight,canvasendy:i.canvasBottom,canvasheight:i.canvasHeight,canvasstartx:i.canvasLeft,canvasstarty:i.canvasTop,canvaswidth:i.canvasWidth,canvascenterx:i.canvasCenterX||i.canvasLeft+(i.canvasRight-i.canvasLeft)/2,canvascentery:i.canvasCenterY||i.canvasTop+(i.canvasBottom-i.canvasTop)/2,chartcenterx:i.width/2,chartcentery:i.height/2,chartstartx:0,chartstarty:0,chartendx:i.width,chartendy:i.height,chartheight:i.height,chartwidth:i.width,chartleftmargin:i.marginLeft,chartrightmargin:i.marginRight,chartbottommargin:i.marginBottom,charttopmargin:i.marginTop,captionendx:e+p.width,captionendy:p.y+p.height,captionheight:p.height,captionstartx:e,captionstarty:p.y,captionwidth:d,subcaptionendx:n+u.width,subcaptionendy:u.y+u.height,subcaptionheight:u.height,subcaptionstartx:n,subcaptionstarty:u.y,subcaptionwidth:f,legendendx:o&&o.xPos+o.width,legendendy:o&&o.yPos+o.height,legendheight:o&&o.height,legendstartx:o&&o.xPos,legendstarty:o&&o.yPos,legendwidth:o&&o.width,dataset:function(e){let o,n,a,i=e.split(r.DEFAULT_MACRO_SEPARATOR).slice(1),l=[],s=[];return t.iterateComponents(function(t){"dataset"===t.getType()&&s.push(t)}),s.sort((t,e)=>t.getJSONIndex()-e.getJSONIndex()),o=(l=(n=s[+i[0]]).components.data)[+i[2]],-1<m.indexOf(n.getName().toLowerCase())?(0,r.computeSliceBounds)(i[3],o.config):-1<x.indexOf(n.getName().toLowerCase())?(0,r.compute3DSliceBounds)(i[3],o.config):(a=(0,r.computePlotBounds)(o,n.getName()),(0,r.xyCalculator)(i[3],a))},xaxis:(0,r.axisMacroParser)(t,"xAxis"),yaxis:(0,r.axisMacroParser)(t,"yAxis"),gaugestartx:i.gaugeStartX,gaugestarty:i.gaugeStartY,gaugeendx:i.gaugeEndX,gaugeendy:i.gaugeEndY,gaugecenterx:i.gaugeCenterX,gaugecentery:i.gaugeCenterY,gaugestartangle:i.gaugeStartAngle,gaugeendangle:i.gaugeEndAngle,gaugeradius:i.gaugeRadius,plotwidth:i.plotWidth,plotsemiwidth:i.plotSemiWidth}},v=t=>{let e;switch(w.axis){case"x":case"toX":e=w.scaleX;break;case"y":case"toY":e=w.scaleY;break;default:e=w.scaleValue||1}return t*e},C=(t,e,o=r.DEFAULT_MACRO_PREFIX)=>{let n,a,i,l,s,c,h=t.split(/([+])/),g=[],p=h.length;for(a=0;a<p;a++)if("+"!==(l=h[a])){for(i=0,c=(n=(l=h[a]).split(/([-])/)).length;i<c;i++)"-"!==(s=n[i])&&(g.push(n[i]),i<c-1&&g.push("-"));a<p-1&&g.push("+")}return g.map(t=>{let n,a,i,l="",s="",c="";if(t.charAt(0)===o){if(c=(s=t.replace(/[\$ ]/g,"")).split(r.DEFAULT_MACRO_SEPARATOR)[0],!isNaN(+s))return+s;for(l in e)if(c===l){if(a=new RegExp(l,"g"),"function"==typeof e[l])try{n=c.replace(a,e[l](s))}catch(t){n=c.replace(a,0)}else n=c.replace(a,e[l]||0);break}}else i=+t,isNaN(i)?"+"!==t&&"-"!==t&&(t=0):t=v(i).toString(),n=t;return n})},A=function(t,e){let o,n=this.config,a={x:(0,r.pluck)(t.x,n.x),y:(0,r.pluck)(t.y,n.y),toX:(0,r.pluck)(t.toX,n.tox),toY:(0,r.pluck)(t.toY,n.toy)},i={};for(var l in a)a.hasOwnProperty(l)&&(void 0!==(o=a[l])&&(o=o.toString(),w.axis=l,i[l]=k(C((0,r.cleanMacro)(o.toLowerCase()),e)),!y(o)&&(i[l]=v(i[l]))));return i},S=t=>{let e,o,n,a,i,r,l,s,c,h,g,p,u=t.getChildren(),d=u.annotation&&u.annotation[0];if(d)for(e=d.annotation,o=b(t),c=e.groups&&e.groups.length,n=0;n<c;n++){for(r=(i=e.groups[n]).rawConfig,w.scaleX=i._getConfig("scaleX"),w.scaleY=i._getConfig("scaleY"),w.scaleValue=i._getConfig("scaleValue"),g=A.call(i,r,o),i.updateAttr(g),g.x=g.x||0,g.y=g.y||0,h=i.items&&i.items.length,a=0;a<h;a++)s=(l=i.items[a]).rawConfig,(p=A.call(l,s,o)).x+=g.x,p.y+=g.y,isNaN(+p.toX)?p.toX=p.x:p.toX+=g.x,isNaN(+p.toY)||(p.toY+=g.y),l.updateAttr(p),l.rawConfig.hasTemporaryInvisibility&&l.show(f);i.rawConfig.hasTemporaryInvisibility&&i.show(f)}},E=t=>0!==parseInt(t,10),T=(t,e={},o={})=>{let n={annotationType:"shape",id:t.id,type:t.type&&t.type.toLowerCase(),toolText:(0,r.pluck)(t.tooltext,t.toolText),animationLabel:(0,r.pluck)(t.animationlabel,t.animationLabel),dashed:t.dashed,dashLen:(0,r.pluck)(t.dashlen,t.dashLen),dashGap:(0,r.pluck)(t.dashgap,t.dashGap),thickness:t.thickness,showBorder:(0,r.pluck)(t.showborder,t.showBorder),borderColor:(0,r.pluck)(t.bordercolor,t.borderColor),borderAlpha:(0,r.pluck)(t.borderalpha,t.borderAlpha),borderThickness:(0,r.pluck)(t.borderthickness,t.borderThickness),alpha:t.alpha,color:t.color,fillColor:(0,r.pluck)(t.fillcolor,t.fillColor),fontColor:(0,r.pluck)(t.fontcolor,t.fontColor),fillAlpha:(0,r.pluck)(t.fillalpha,t.fillAlpha),fillAngle:(0,r.pluck)(t.fillangle,t.fillAngle),fillRatio:(0,r.pluck)(t.fillratio,t.fillRatio),fillPattern:(0,r.pluck)(t.fillpattern,t.fillPattern),sides:t.sides,radius:t.radius,yRadius:(0,r.pluck)(t.yradius,t.yRadius),innerRadius:(0,r.pluck)(t.innerradius,t.innerRadius),endAngle:(0,r.pluck)(t.endangle,t.endAngle),startAngle:(0,r.pluck)(t.startangle,t.startAngle),hasTemporaryInvisibility:!0===E(t.visible),isVisible:!1,x:t.x,y:t.y,xPos:(0,r.pluck)(t.xpos,t.xPos),yPos:(0,r.pluck)(t.ypos,t.yPos),toY:(0,r.pluck)(t.toy,t.toY),toX:(0,r.pluck)(t.tox,t.toX),path:t.path,css:t.css,wrap:t.wrap,text:t.text,font:(0,r.pluck)(t.font,e.font,o.basefont),bold:(0,r.pluck)(t.bold,t.isbold,t.bold,t.isBold),label:t.label,align:t.align,italic:t.italic,vAlign:(0,r.pluck)(t.valign,t.vAlign),bgColor:(0,r.pluck)(t.bgcolor,t.bgColor),fontSize:(0,r.pluck)(t.fontsize,t.fontSize,e.fontSize,o.basefontsize),wrapWidth:(0,r.pluck)(t.wrapwidth,t.wrapWidth),leftMargin:(0,r.pluck)(t.leftmargin,t.leftMargin),rotateText:(0,r.pluck)(t.rotatetext,t.rotateText),wrapHeight:(0,r.pluck)(t.wrapheight,t.wrapHeight),showShadow:(0,r.pluck)(t.showshadow,t.showShadow),link:t.link,url:t.url,link:t.link,width:t.width,height:t.height,xScale:(0,r.pluck)(t.xscale,t.xScale),yScale:(0,r.pluck)(t.yscale,t.yScale),onload:t.onload,onerror:t.onerror};for(let t in n)if(n.hasOwnProperty(t)){void 0===n[t]&&delete n[t]}return n},R=(t,e)=>{let o={},n=t.items;for(let a in n=t.items=(0,r.arrangeItems)(n),o.annotationType="group",o.id=t.id,o.showBelow=void 0===t.showbelow||null==t.showbelow?1:+t.showbelow,o.x=t.x,o.y=t.y,o.animationLabel=(0,r.pluck)(t.animationlabel,t.animationLabel),o.xPos=(0,r.pluck)(t.xpos,t.xPos),o.yPos=(0,r.pluck)(t.ypos,t.yPos),o.grpXShift=(0,r.pluck)(t.grpxshift,t.grpXShift),o.grpYShift=(0,r.pluck)(t.grpyshift,t.grpYShift),o.xShift=(0,r.pluck)(t.xshift,t.xShift),o.yShift=(0,r.pluck)(t.yshift,t.yShift),o.color=t.color,o.alpha=t.alpha,o.isVisible=1==+(t.visible||1),o.font=(0,r.pluck)(t.font,e.basefont),o.link=t.link,o.fontSize=(0,r.pluck)(t.fontsize,t.fontSize,e.basefontsize),o.textAlign=(0,r.pluck)(t.textalign,t.textAlign),o.textVAlign=(0,r.pluck)(t.textvalign,t.textVAlign),o.rotateText=(0,r.pluck)(t.rotatetext,t.rotateText),o.wrapText=(0,r.pluck)(t.wraptext,t.wrapText),o.toolText=(0,r.pluck)(t.tooltext,t.toolText),o.link=t.link,o.showShadow=(0,r.pluck)(t.showshadow,t.showShadow),o.items=t.items,o.css=t.css,o.autoScale=(0,r.pluck)(t.autoscale,t.autoScale),o.scaleText=(0,r.pluck)(t.scaletext,t.scaleText),o.xScale=(0,r.pluck)(t.xscale,t.xScale),o.yScale=(0,r.pluck)(t.yscale,t.yScale),o.scaleImages=(0,r.pluck)(t.scaleimages,t.scaleImages),o.constrainedScale=(0,r.pluck)(t.constrainedscale),o.origH=(0,r.pluck)(t.origh,t.origH,e.origh),o.origW=(0,r.pluck)(t.origw,t.origW,e.origw),o.onAnnotationClick=t.onAnnotationClick,o.onAnnotationRollover=t.onAnnotationRollover,o.onAnnotationRollout=t.onAnnotationRollout,o)if(o.hasOwnProperty(a)){void 0===o[a]&&delete o[a]}return Array.isArray(n)&&(o.itemConfigs=n.map(function(t){return T(t,o,e)})),o},I=(t,e,o)=>{let n,a,i,l=t._getFromStore("element");t&&l&&(n=o.onAnnotationClick||(0,r.defaultAnnotationClick)(t,e),a=o.onAnnotationRollover||(0,r.defaultAnnotationRollOver)(t,e),i=o.onAnnotationRollout||(0,r.defaultAnnotationRollOut)(t,e),l.on("click",n),l.on("mouseover",a),l.on("mouseout",i))},L=t=>{t.forEach(t=>{t.items.forEach(t=>{t.config.isVisible=!0,t.show(f)}),t.config.isVisible=!0,t.show(f)})},F=(t,e)=>{e.css=e.css||t.css,e.autoscale=(0,r.pluck)(e.autoscale,t.autoscale),e.animationLabel=(0,r.pluck)(e.animationLabel,t.animationLabel),e.constrainedscale=(0,r.pluck)(e.constrainedscale,t.constrainedscale),e.scaletext=(0,r.pluck)(e.scaletext,t.scaletext),e.scaleimages=(0,r.pluck)(e.scaleimages,t.scaleimages),e.xshift=(0,r.pluck)(e.xshift,t.xshift),e.yshift=(0,r.pluck)(e.yshift,t.yshift),e.grpxshift=(0,r.pluck)(e.grpxshift,t.grpxshift),e.grpyshift=(0,r.pluck)(e.grpyshift,t.grpyshift),e.origw=(0,r.pluck)(e.origw,t.origw),e.origh=(0,r.pluck)(e.origh,t.origh),e.showbelow=(0,r.pluck)(e.showbelow,t.showbelow,1),e.onAnnotationClick=t.onAnnotationClick,e.onAnnotationRollover=t.onAnnotationRollover,e.onAnnotationRollout=t.onAnnotationRollout},P=(t,e)=>"itemConfigs"!==e;(0,l.addDep)({name:"annotationAnimation",type:"animationRule",extension:c.default});class _ extends n.default{constructor(t={}){super(),this.annotation=new e.default(t),this.idCounterStore={},this.rawConfig=JSON.parse(JSON.stringify(t)),this.config={}}getName(){return"annotation"}getType(){return"extension"}configureAttributes(t={groups:[]}){let e=this,o=e.getFromEnv("chart"),n=o.getFromEnv("dataSource");e.rawConfig={group:[]},e.config.labelClickFN=(0,r.getLinkAction)(n,o),e.rawConfig.macroEnabled=t.macroEnabled,e.parsedConfigs||(e.parsedConfigs=[]),this.parsedConfigs=t.groups?t.groups.map(e=>(F(t,e),R(e,o.config))):[],e.createAnnotationItems()}createAnnotationItems(){let t=this,e=t.getFromEnv("chartInstance");t.parsedConfigs.forEach(o=>{let n,a,r=o.itemConfigs||{},l=t.annotation;(o=(0,i.default)(P,o)).chartWidth=+e.width,o.chartHeight=+e.height,a={x:o.x,y:o.y,toX:o.toX,toY:o.toY,items:[]},t.rawConfig.group.push(a),n=l.createItem(o),r.forEach(t=>{t.chartWidth=+e.width,t.chartHeight=+e.height,a.items.push({x:t.x,y:t.y,toX:t.toX,toY:t.toY}),l.createItem(t,n)})})}getGraphicalElement(){return{itemElements:this.annotation.items.map(t=>t._getFromStore("element"))}}getChildContainer(){return{groupElements:this.annotation.groups.map(t=>t._getFromStore("element"))}}addItem(t,e={},o,n){let a,i=this.annotation.retrieveGroup(t),r=this.getFromEnv("chart"),l=T(e);if(l.hasTemporaryInvisibility=!1,l.isVisible=!0,i=i||this.addGroup({id:t}),a=this.annotation.createItem(l,i))return this.annotation.injectDependency("component",n),this.annotation.attachModule(a),S(r),i._getFromStore("element")||i._draw(),this.annotation.drawItem(a,i._getFromStore("element")),a.unfilteredConfig=e,I(a,r,i.rawConfig),a}addGroup(t={},e){return this.configureAttributes({groups:[t]}),this.annotation.injectDependency("component",e),this.draw(),L(this.annotation.groups),this.annotation.groups[this.annotation.groups.length-1]}addCustomGroup(t){t&&(this.config.customGroup=t)}update(t,e){let o,n,a,i={};if(t){for(n in e)i[n.toLowerCase()]=e[n]&&e[n].toString();return(o=this.annotation.retrieveItem(t)||this.annotation.retrieveGroup(t))?(void 0===i.visible&&(i.visible=o._getConfig("isVisible")),(a=T(i)).hasTemporaryInvisibility=!1,a.isVisible=i.visible,o&&o.setAttribute(a),S(this.getFromEnv("chart")),this.drawAnnotationItems(),o):void 0}}hide(t){let e;t?(e=this.annotation.retrieveItem(t)||this.annotation.retrieveGroup(t))&&e.hide(f):this.annotation.hide(f)}show(t){let e;t?(e=this.annotation.retrieveItem(t)||this.annotation.retrieveGroup(t))&&e.show(f):this.annotation.show(f)}destroy(t){let e;t?(e=this.annotation.retrieveItem(t)||this.annotation.retrieveGroup(t))&&e.dispose(f,!0):this.annotation.dispose(f,!0)}_dispose(){this.destroy()}clear(){let t;for(t=this.parsedConfigs&&this.parsedConfigs.length;t--;)this.parsedConfigs.pop();for(t=this.rawConfig.group&&this.rawConfig.group.length;t--;)this.rawConfig.group.pop();delete this.rawConfig.group,this.annotation.dispose(f,!0)}updateScale(){let t,e,o,n=this.annotation;for(o=n.groups&&n.groups.length,t=0;t<o;t++)(e=n.groups[t]).updateScale()}injectAllDependency(){let t,e,o,n,a,i,r,s=this,c=s.annotation,h=s.getFromEnv("chart"),p=c.resolveDependency("component")||s,d=(0,l.getDep)("redraphael","plugin");for((0,g.default)(d),(0,u.default)(d),r={width:+h.getFromEnv("chartWidth"),height:+h.getFromEnv("chartHeight")},c.injectDependency("paper",r),c.injectDependency("smartLabel",s.getFromEnv("smartLabel")),c.injectDependency("toolTipController",s.getFromEnv("toolTipController")),c.injectDependency("animationManager",s.getFromEnv("animationManager")),c.injectDependency("component",p),c.injectDependency("clickFN",s.config.labelClickFN),a=c.groups&&c.groups.length,t=0;t<a;t++)for(o=c.groups[t],c.attachModule(o),i=(n=o.items)&&n.length,e=0;e<i;e++)c.attachModule(n[e])}draw(){let t=this,e=t.getFromEnv("chart");t.annotation;t.injectAllDependency(),t.updateScale(),t.rawConfig.macroEnabled&&S(e),t.drawAnnotationItems(t),t.config.drawn=!0}drawAnnotationItems(){let t,e,o,n,a,i,r,l=this,s=l.getFromEnv("chart"),c=l.annotation;for(t=c.groups&&c.groups.length,o=0;o<t;o++)for(e=c.groups[o],r=l.config.customGroup?l.config.customGroup:e.rawConfig.showBelow?l.getLinkedParent().getChildContainer("lowerAnnotationGroup"):l.getLinkedParent().getChildContainer("upperAnnotationGroup"),c.drawItem(e,r),i=(a=e.items)&&a.length,r=e._getFromStore("element"),n=0;n<i;n++)c.drawItem(a[n],r),I(a[n],s,e.rawConfig)}}exports.default=_;
},{"../vendors/fusioncharts-annotations/src/annotation-controller":156,"../../../../core/component-interface":62,"ramda/src/pickBy":157,"./utils":154,"../../../dependency-manager":17,"./annotation-animation":155,"../../../redraphael/redraphael-shapes/redraphael-shapes.ringpath":152,"../../../redraphael/redraphael-shapes/redraphael-shapes.arcpath":153}],165:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}];exports.default={"initial.dataset.entities":function(){return{"path.appearing":()=>(t[0].slot="plot",t),"path.updating":t=>[{finalAttr:function(){return t.finalAttr}}],"labelConnectors.appearing":()=>(t[0].slot="final",t),"labelConnectors.updating":null,"entityLabel.appearing":()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":()=>(t[0].slot="final",t),"markerItem.updating":t=>[{finalAttr:function(){return t.finalAttr}}]}},"initial.group.mapGroup":function(){return{"group.appearing":t=>[{initialAttr:function(){return Object.assign({opacity:0},t.attr)},finalAttr:function(){return t.attr},slot:"plot"}],"group.updating":t=>[{initialAttr:function(){return Object.assign({opacity:0},t.attr)},finalAttr:function(){return t.attr},slot:"plot"}],"*":null}}};
},{}],177:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var e,r,o,i=window.parseFloat,n=t._createNode,a=t._setFillAndStroke,s=t.el.constructor,p={Q:"L",Z:"X",q:"l",z:"x",",":" "},l=/,?([achlmqrstvxz]),?/gi,h=function(){return this.join(",").replace(l,e)};t.svg?(e="$1",r=function(){var r=t.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);r?"string"==typeof r?r=r.replace(l,e):r.toString=h:r="M0,0",this.node.setAttribute("d",r.toString())},t._engine.litepath=function(e,r,o,i,p){var l,h=n("path");return(i||r).canvas.appendChild(h),(l=new s(h,r,i)).type="litepath",l.id=h.raphaelid=t._oid++,h.raphael=!0,a(l,p||{fill:"none",stroke:"#000"}),l},t._getPath.litepath=function(e){return t.parsePathString(e.node.getAttribute("d"))}):t.vml&&(e=function(t,e){return p[e]||e},o=function(){var t=this;return t._transform.apply(t,arguments),t._.bcoord&&(t.node.coordsize=t._.bcoord),t},r=function(t){return t?"string"==typeof t?t=t.replace(l,e):t.toString=h:t="M0,0",this.node.path=t,this},t._engine.litepath=function(e,r,a,p,l){var h,c=n("shape"),d=c.style,u=new s(c,r,p);return d.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",a=i(a),isNaN(a)?c.coordsize="21600 21600":(u._.bzoom=a,d.width="1px",d.height="1px",c.coordsize=u._.bcoord=a+" "+a),c.coordorigin=r.coordorigin,u.type="litepath",u.id=c.raphaelid=t._oid++,c.raphael=!0,u._transform=u.transform,u.transform=o,t._setFillAndStroke(u,l||{fill:"none",stroke:"#000"}),(p||r).canvas.appendChild(c),(h=n("skew")).on=!0,c.appendChild(h),u.skew=h,u},t._getPath.litepath=function(e){return t.parsePathString(e.node.path||"")}),t.fn.litepath=function(e,o,i){var n,a,p;return"object"==typeof e&&e.constructor!==s&&(n=e,a=(e=e.litepath).zoom,i=e.group),o&&o.constructor===s?(i=o,a=void 0):a=o,e&&e.constructor===s&&(i=e,e=""),(p=t._engine.litepath(e,this,a,i,n)).ca.litepath=r,e&&p.attr("litepath",t.is(e,"array")?[e]:e),this.__set__&&this.__set__.push(p),this._elementsById[p.id]=p}};
},{}],134:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../core/component-interface"),t=g(e),o=require("../vendors/fc-ext-annotation/src/ext-annotation.js"),n=g(o),l=require("../dependency-manager"),r=require("../animation-rules/map-entities-animation"),i=g(r),a=require("../lib/lib"),s=require("../lib/lib-graphics"),c=require("../schedular"),h=require("../redraphael/redraphael-shapes/redraphael-shapes.litepath"),d=g(h);function g(e){return e&&e.__esModule?e:{default:e}}let f,p=(0,l.getDep)("redraphael","plugin"),u=window.navigator.userAgent,b=/msie/i.test(u)&&!window.opera,m=",",v="",y="top",C="bottom",k="right",E="left",A="middle",L="center",w="crisp",F=window.Math,T=F.min,S=F.max,x=/stroke/gi,_=/AppleWebKit/.test(u),O=F.ceil,I=function(e,t){let o=t?(0,a.extend2)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=a.toRaphaelColor,o},B=function(e,t){let o,n={};if(t=t||1,!e||"object"!=typeof e)return n;for(o in e)x.test(o)||("stroke-width"===o?(n[o]=+e[o]/t,_&&(n[o]=n[o]&&O(n[o])||0)):n[o]=e[o]);return n},N={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*T(t,e-t)}},R={top:function(){return arguments[1]},middle:function(e,t){return 2*T(t,e-t)},bottom:function(e,t){return e-t}},V=function(e){let t,o=e&&e.length||0,n={};for(;o--;)(t=e[o]).id!==f&&(n[t.id.toLowerCase()]=t);return n};(0,l.addDep)({name:"mapsAnimation",type:"animationRule",extension:i.default}),(0,d.default)(p);class j extends t.default{constructor(){super(),this.components={}}getName(){return"entities"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData={data:e};let t,o,n,l,r,i,s,c,h=this,d=h.getFromEnv("chart").jsonData,g=h.config,f=d.map||d.chart,p=[],u=d.entitydef||[];for(r in g.attachEvent||(h.addExtEventListener("legendUpdate",function(){if("legend"===(c=arguments[1]).component)h.legendInteractivity(c.legendItem,c.colorObj);else for(p=c.maxMinArray,i=p.length,s=0;s<i;s++)h.updateEntityColors(p[s].min,p[s].max)},h.getFromEnv("colorManager")),g.attachEvent=!0),t=d.data&&d.data[0]&&d.data[0].data?h.JSONData=d.data[0].data||[]:h.JSONData=d.data||[],g.useSNameAsId=(0,a.pluckNumber)(f.usesnameasid,0),this._redefineEntities(u),o=h.components.data,g.showTooltip=(0,a.pluckNumber)(f.showtooltip,1),g.showHoverEffect=(0,a.pluckNumber)(f.showhovereffect,0),t=V(t),h.calculateDataLimits(),d.colorrange||h.detachChild(h.getChildren("colorRange")&&h.getChildren("colorRange")[0].getId()),o)n=t[r],l=o[r],n?this._configureEntity(r,l,(0,a.imprint)(j._sanitizeEntityOptions((0,a.extend2)({},n)),l.config)):this._configureEntity(r,l,l.config)}updateEntityColors(e,t){let o,n,l,r,i,a,s=this.components.data,c=this.getFromEnv("chart"),h={"fill-opacity":0};for(r in s)l=(n=(o=s[r]).config).cleanValue,a={"fill-opacity":(i=n.alphaArr||[])[0]/100||1},l<e||l>t?(j.setCustomAttrs(o,h,c),o.hidden=!0):(o.hidden=!1,j.setCustomAttrs(o,a,c))}legendInteractivity(e,t){let o,n,l,r,i,a,s=this,c=s.getFromEnv("chart"),h=s.components.data,d=e.config,g=e.hasState("hidden"),f=s.getFromEnv("colorManager"),p={},u={"fill-opacity":0};for(o in c.getFromEnv("animationManager").setAnimationState("legendInteraction"),h)h.hasOwnProperty(o)&&(l=(d=(n=h[o]).config).cleanValue,a=f.getColorObj(l),r=d.visibleEntityAttr,p["fill-opacity"]=r["fill-opacity"],i=g?p:u,t.code===(!a.outOfRange&&a.code)&&(n.hidden=!g,j.setCustomAttrs(n,i,c),g?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}static setCustomAttrs(e,t){let o,n;e&&(n=(o=e.graphics).outlines).attr(t)}calculateDataLimits(){let e,t,o,n,l=this.getFromEnv("chart"),r=this.config,i=l.jsonData.data||[],a=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(n=0,o=i.length;n<o;n++)t=i[n].value,e=a.getCleanValue(t),s=T(s,e),c=S(c,e);r.max=c,r.min=s}_configureEntity(e,t,o){let n,l,r,i,c,h,d,g,p,u,b,y,C,k,E,w,F,T,S,x,_,O,B=this,N=B.getFromEnv("chart"),R=B.config,V=this.getFromEnv("number-formatter"),j=N.config.entityOpts,D=t.config,P=t.labelConfig,M=o.value,z=D.cleanValue=V.getCleanValue(M),G=D.formattedValue=z===f?f:V.dataLabels(z),H=(0,a.pluckNumber)(o.showtooltip,j.showTooltip),q=this._getDefaultTooltip(t,o,B),J={formattedValue:G,sName:o.shortLabel,lName:o.label},K=j.dataLabels.style,W=D.toolText=H?(0,a.parseUnsafeString)((0,a.pluck)((0,a.parseTooltext)((0,a.pluck)(o.tooltext,j.tooltext,q),[1,2,7,38,39],J,o))):v,Z=D.borderColor=(0,a.pluck)(o.bordercolor,j.borderColor),U=D.borderAlpha=(0,a.pluck)(o.borderalpha,j.borderAlpha),X=D.borderThickness=(0,a.pluckNumber)(o.borderthickness,j.borderThickness),Y=j.hoverOnNull,Q=D.useHoverColor=(0,a.pluckNumber)(o.showhovereffect,o.usehovercolor,Y?j.showHoverEffect:isNaN(M)?0:j.showHoverEffect),$=D.labelAlignment,ee=B.getFromEnv("colorManager");if(t.hidden=!1,D.showLabel=(0,a.pluckNumber)(o.showlabel,j.showLabels),D.labelPadding=(0,a.pluckNumber)(o.labelpadding,j.labelPadding),D.fontFamily=(0,a.pluck)(o.font,K.fontFamily),D.fontSize=(0,a.pluckNumber)(parseInt(o.fontsize,10),parseInt(K.fontSize,10)),D.fontBold=(0,a.pluckNumber)(o.fontbold,0),D.fontColor=(0,a.pluck)(o.fontcolor,K.color),D.connectorColor=(0,a.pluck)(o.labelconnectorcolor,j.connectorColor),D.connectorAlpha=(0,a.pluck)(o.labelconnectoralpha,j.connectorAlpha),D.hoverBorderThickness=(0,a.pluckNumber)(o.borderhoverthickness,o.hoverborderthickness,j.hoverBorderThickness),D.hoverBorderColor=(0,a.pluck)(o.borderhovercolor,o.hoverbordercolor,j.hoverBorderColor,D.borderColor),D.hoverBorderAlpha=(0,a.pluck)(o.borderhoveralpha,o.hoverborderalpha,j.hoverBorderAlpha,D.borderAlpha),D.connectorThickness=(0,a.pluckNumber)(o.labelconnectorthickness,j.connectorThickness),D.origConnectorThickness=D.connectorThickness,D.borderThickness=X,D.link=o.link,D.isVisible=!0,D.id=e,D.originalId=o.origId,null!==z&&((n=ee&&ee.getColor(z))&&!n.outOfRange&&(w=n.code,n.oriAlpha!==f&&(F=n.oriAlpha+""))),(0,a.pluck)(o.color,o.alpha,o.angle,o.ratio)===f?(k=I({color:(0,a.pluck)(w,j.fillColor),alpha:(0,a.pluck)(F,j.fillAlpha),angle:(0,a.pluck)(j.fillAngle),ratio:(0,a.pluck)(j.fillRatio)}),C=I({color:(0,a.pluck)(j.nullEntityColor),alpha:(0,a.pluck)(j.nullEntityAlpha),angle:(0,a.pluck)(j.nullEntityAngle),ratio:(0,a.pluck)(j.nullEntityRatio)}),c=(p=null===z?C:k).FCcolor.color,h=p.FCcolor.alpha,d=p.FCcolor.angle,g=p.FCcolor.ratio):(c=(0,a.pluck)(o.color,w,j.fillColor),h=(0,a.pluck)(o.alpha,F,j.fillAlpha),d=(0,a.pluck)(o.angle,j.fillAngle),g=(0,a.pluck)(o.ratio,j.fillRatio),p=I({color:c,alpha:h,angle:d,ratio:g})),W===v&&(R.showTooltip=0),D.visibleEntityAttr={stroke:(0,s.convertColor)(Z,U),fill:(D.fillColor=p).toString(),"fill-opacity":h/100},O=h.split(m),D.alphaArr=O,Q&&((0,a.pluck)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===f?(!j.hoverColorObject&&(j.hoverColorObject=I({color:j.hoverFillColor,alpha:j.hoverFillAlpha,angle:j.hoverFillAngle,ratio:j.hoverFillRatio})),E=j.hoverColorObject):(c=(0,a.pluck)(o.fillhovercolor,o.hoverfillcolor,j.hoverFillColor),h=(0,a.pluck)(o.fillhoveralpha,o.hoverfillalpha,j.hoverFillAlpha),d=(0,a.pluck)(o.fillhoverangle,o.hoverfillangle,j.hoverFillAngle),g=(0,a.pluck)(o.fillhoverratio,o.hoverfillratio,j.hoverFillRatio),E=I({color:c,alpha:h,angle:d,ratio:g})),D.hoverColor=E),P||(P=t.labelConfig={}),u=D.fontColor,b=D.fontFamily,y=D.fontBold,W=D.toolText,l=D.link,$?(r=$[0],i=$[1]):(r=L,i=A),P.align=r,P.vAlign=i,P.bgColor=v,P.borderColor=v,P.fontColor=u,P.fontFamily=b,P.fontBold=y,P.toolText=W,P.link=l,"object"==typeof D.options)for(T=D.entityLabels=D.entityLabels||[],_=(x=D.labels||[]).length;_--;)T[_]||(T[_]={config:{}}),P=T[_].config,($=x[_].labelAlignment)?(r=$[0],i=$[1]):(r=L,i=A),P.align=r,P.vAlign=i,P.displayValue=B.getDisplayValue(t,x[_],D.options.isDataEnabled,!_,o),P.bgColor=v,P.borderColor=v,P.toolText=W,P.align=r,P.vAlign=i,P.bgColor=v,P.borderColor=v,P.fontColor=u,P.fontFamily=b,P.fontBold=y,P.toolText=W;else S={shortText:D.shortLabel,text:D.label},P.displayValue=B.getDisplayValue(t,S,!0,!0,o)}getDisplayValue(e,t,o,n,l){let r,i=this.getFromEnv("chart").config.entityOpts,s=e.config,c=s.cleanValue,h=s.formattedValue,d=i.labelSepChar;return o?n&&void 0!==l.displayvalue?r=l.displayvalue:(r=(0,a.pluck)(i.includeNameInLabels?i.useShortName?t.shortText:t.text:""),i.includeValueInLabels&&null!==c&&(r=r===f?h:r+d+h)):r=s.label,r}static _sanitizeEntityOptions(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}_redefineEntities(e){let t,o,n,l,r,i,s,c,h,d,g,f,p=this,u=p.config,b={},m={},v=p.getFromEnv("chart").config.entities,y=u.useSNameAsId,C=0;for(t=e.length;t--;)if(n=(o=e[t]).internalid,l=o.newid?o.newid:n,r=o.sname,i=o.lname,f=v[n],n=(0,a.trimString)(n),l=(l=(0,a.trimString)(l))&&l.toLowerCase(),f){for(g in b[l]=c={origId:n},m[n]=!0,f)c[g]=f[g];c.shortLabel=r||f.shortLabel,c.label=i||f.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(s in(d=p.components.data)||(d=p.components.data={}),b)d[s=s.toLowerCase()]||(d[s]={config:{}}),d[s].config=b[s],C+=1;for(s in h=d,v)if(c=v[s],!m[s=(0,a.trimString)(s)]){for(g in y?(!(f=h[c.shortLabel.toLowerCase()])&&(f=h[c.shortLabel.toLowerCase()]={}),f.config={},f.origId=c.shortLabel):(!(f=h[s.toLowerCase()])&&(f=h[s.toLowerCase()]={}),f.config={},f.config.origId=s),c)f.config[g]=c[g];C+=1}u.entityCount=C}draw(){let e,t=this.config,o=this.getFromEnv("chart"),n=a.hasSVG?200:10;this.config.ready=!1,t.BATCH_SIZE=n,t.labelBatchSize=a.hasSVG?200:20,(e=this._batchRender())(0),o.config.entityFlag=!0,o.checkComplete()}_batchRender(){let e,t,o,n,l,r=this,i=r.config,a=r.getFromEnv("chart").config.entities.firstEntity,s=r.components.data,h=i.BATCH_SIZE,d=i.entityKeys=a?r._getKeys(a,s):Object.keys(s),g=i.entityLength=d.length,p=function(i){for(e=i,o=0;d[e]!==f;)if(t=s[d[e]],l=r.drawEntity(t,h),o+=l,t.config.drawn&&((n=e===g-1?t:s[d[e-1]])&&(n.config.drawn=!1,n.config.outlineStartIndex=f),e++),o>=h){r.addJob("entityDraw",p.bind(this,e),c.priorityList.entitydraw);break}e===g&&(r._addEventListenersToEntities(0),r.initComplete())};return p}_addEventListenersToEntities(e){let t,o,n,l,r=this,i=r.components.data,a=r.config,s=a.BATCH_SIZE,h=a.entityKeys,d=a.entityLength,g=0;for(t=e;t<d;t++)if((n=(l=(o=i[h[t]]).config).options)&&!1===n.isDataEnabled||r.addMouseGestures(o),++g===s){r.addJob("_addEventListenersToEntities",r._addEventListenersToEntities.bind(this,t),c.priorityList.entitydraw);break}}static _getKeys(e,t){let o=[e],n=e;for(;t[n];)n=t[n].nextId,o.push(n);return o}_getDefaultTooltip(e,t){let o,n,l=e.config.cleanValue,r=e.config.formattedValue,i=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(n=t.labels&&t.labels[0]))return f;o=(i.useSNameInTooltip?n.shortText:n.text)+(null===l?v:i.tooltipSepChar+r)}else o=(i.useSNameInTooltip?t.shortLabel:t.label)+(null===l?v:i.tooltipSepChar+r);return o}drawEntity(e,t){let o,n,l,r,i,s,c,h,d,g=this,p=g.getFromEnv("chart"),u=p.getFromEnv("animationManager"),m=e.config,v=a.hasSVG||!b?"litepath":"path",y=p.config.entityOpts,C=m.outlines,k=g.getFromEnv("toolTipController"),E=this.getLinkedParent().getChildContainer("plot"),A=this.getLinkedParent().getChildContainer("plotShadow"),L=m.toolText,w=y.shadow,F=[],T={};if(g._configureEntityDrawingParams(e),l=(m=e.config).visibleEntityAttr,d=m.shadowOptions,o=m.outlineStartIndex===f?C.length:m.outlineStartIndex,e.graphics||(e.graphics={}),c=0,F=m.outlinePath||(m.outlinePath=[]),h=m.customStrokeWidthModifier,"object"==typeof m.options){for(;o--;)if(F=C[o].outline,r=!0===m.options.isDataEnabled?l:(0,a.extend2)((0,a.extend2)({},l),B(C[o].style,h)),(i=e.graphics.outlines)||(i=e.graphics.outlines=[]),i[o]||(i[o]={}),s=i[o].outline,r[v]=F,(s=i[o].outline=u.setAnimation({el:v,container:E,attr:r,component:g,label:"path"})).shadow(!!w&&d,A),k.enableToolTip(s,L),c++,m.outlineStartIndex=o,c===t)return c;return m.drawn=!0,c}for(;o--;)if(F=(n=C[o]).concat(F),c++,m.outlineStartIndex=o,c===t)return m.outlinePath=F,c;return e.graphics.outlines||(l[v]=F),Object.assign(T,l,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=u.setAnimation({el:e.graphics.outlines||v,container:E,attr:T,component:g,label:"path"}),m.drawn=!0,m.outlineStartIndex=0,m.outlinePath=[],e.graphics.outlines.shadow(!!w&&d,A),k.enableToolTip(e.graphics.outlines,L),c}_configureEntityDrawingParams(e){let t,o=this.getFromEnv("chart"),n=e.config,l=o.config.entityOpts,r=o.config.scalingParams,i=!b||a.hasSVG,s=r.scaleFactor,c=r.strokeWidth,h=(i?o.baseScaleFactor:1)*c,d=1===l.scaleBorder,g=n.borderThickness,f=n.alphaArr,p=n.origConnectorThickness,u=n.hoverBorderThickness,m=n.visibleEntityAttr,v=m["fill-opacity"];n.shadowOptions={scalefactor:[s,s*o.config.baseScaleFactor],opacity:S.apply(F,f)/100,useFilter:0},n.fillOpacity=e.hidden?0:v,i?(g=n.entityBorderThickness=d?g*h:g/s,p/=s,t=d?s:r.sFactor,u&&(u=n.hoverBorderThickness=d?u*h:u/s)):(g=d?g*c:g,t=d?r.scaleFactor:o.baseScaleFactor),n.entityBorderThickness=g,n.connectorThickness=p,n.customStrokeWidthModifier=t,m["stroke-width"]=g,m.transform=a.hasSVG||!b?"":r.transformStr}drawLabels(e){let t,o,l,r,i=this,a=e,s=i.getFromEnv("chart"),c=i.config,h=c.labelBatchSize,d=c.entityLength,g=[],f=0,p=s.getChildren("mapLabelAnnotations")&&s.getChildren("mapLabelAnnotations")[f],u=0,b=0,m=s.getFromEnv("toolTipController"),v=s.config.annotationConfig;for(t in p||(r=new n.default,s.attachChild(r,"mapLabelAnnotations"),p=s.getChildren("mapLabelAnnotations")[f]),p.clear(),p._renderer&&(p._renderer=null),v.showbelow=0,a){if(i.drawLabel(a[t],g),++u===h){for(p.annotation.injectDependency("paper",s.getFromEnv("paper")),p.annotation.injectDependency("toolTipController",m),o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(l=p.addGroup(Object.assign(v,{id:"entityLabels"+f,items:g,animationLabel:"entityLabelGroup"}),i),s.config.labelsOnTop&&l.store.element.toFront(),o=0;o<l.items.length;o++)l.items[o].addEventListener("mouseover",g[o].onmouseover),l.items[o].addEventListener("mouseout",g[o].onmouseout),l.items[o].addEventListener("click",g[o].onclick);f++,(p=s.getChildren("mapLabelAnnotations")&&s.getChildren("mapLabelAnnotations")[f])||(r=new n.default,s.attachChild(r,"mapLabelAnnotations"),p=s.getChildren("mapLabelAnnotations")[f]),p.clear(),p._renderer&&(p._renderer=null),u=0,g=[]}else if(b==d-1){for(p.annotation.injectDependency("paper",s.getFromEnv("paper")),p.annotation.injectDependency("toolTipController",m),o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(l=p.addGroup(Object.assign(v,{id:"entityLabels"+f,items:g,animationLabel:"entityLabelGroup"}),i),s.config.labelsOnTop&&l.store.element.toFront(),o=0;o<l.items.length;o++)l.items[o].addEventListener("mouseover",g[o].onmouseover),l.items[o].addEventListener("mouseout",g[o].onmouseout),l.items[o].addEventListener("click",g[o].onclick)}b++}i.drawLabelConnFn(0)}drawLabelConnFn(e){let t,o,n,l,r,i=this,a=i.config,s=i.components.data,h=a.BATCH_SIZE,d=a.entityKeys,g=d.length,f=0;for(o=e;o<g;o++){if("object"==typeof(l=(r=s[d[o]]).config).options)for(t=(n=l.labels)&&n.length||0;t--;)n[t].labelConnectors&&(i.drawLabelConnectors(r,n[t].labelConnectors,i),f++);else l.labelConnectors&&(i.drawLabelConnectors(r,l.labelConnectors,i),f++);if(f===h){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),c.priorityList.entitydraw);break}}}_getLabelObject(e,t,o){let n,l,r,i,a,s,c,h,d,g,p,u,b=this,m=b.getFromEnv("chart"),v=e.config,w=m.config.scalingParams,F=e.graphics&&e.graphics.outlines,T=v.fontSize,S=v.labelPadding,x=v.labels||[],_=v.entityLabels||[];return t===f?(n=e.labelConfig,l=v.labelPosition,r=v.labelAlignment):(p=x[t],i=(n=(u=_[t]).config).style=p.style,l=p.labelPosition,r=p.labelAlignment),l?(a=l[0],s=l[1]):(a=(c=F.getBBox()).x+c.width/2,s=c.y+c.height/2),r?(h=r[0],d=r[1],h===k?a-=S:h===E&&(a+=S),d===y?s-=S:d===C&&(s+=S)):(h=L,d=A),g=parseFloat(T)/w.sFactor,!o&&i&&(i.color&&(n.fontColor=i.color),i["font-size"]&&(g=parseFloat(i["font-size"])/w.sFactor),i["font-family"]&&(n.fontFamily=i["font-family"]),i["font-weight"]!==f&&(n.fontBold="bold"===i["font-weight"])),n.x=a.toString(),n.y=s.toString(),n.wrap=1,n.type="text",n.fontSize=g,{x:a.toString(),y:s.toString(),wrapwidth:N[h](void 0,a+void 0)-S,wrapheight:R[d](void 0,s+void 0)-S,wrap:1,type:"text",align:n.align,valign:n.vAlign,text:n.displayValue,tooltext:n.toolText,css:n.link!==f&&{cursor:"pointer",_cursor:"hand"},bgcolor:n.bgColor,bordercolor:n.borderColor,fillcolor:n.fontColor,fontsize:n.fontSize,font:n.fontFamily,bold:n.fontBold,onclick:function(t){let o,n,l=e.graphics.outlines;if(l instanceof Array)for(o=0,n=l.length;o<n;o++)b.entityClick(l[o].outline,t);else b.entityClick(l,t)},onmouseover:function(t){let o,n,l=e.graphics.outlines;if(l instanceof Array)for(o=0,n=l.length;o<n;o++)b.entityRollOver(l[o].outline,t);else b.entityRollOver(l,t)},onmouseout:function(t){let o,n,l=e.graphics.outlines;if(l instanceof Array)for(o=0,n=l.length;o<n;o++)b.entityRollOut(l[o].outline,t);else b.entityRollOut(l,t)},ontouchstart:function(t){let o,n,l=e.graphics.outlines;if(l instanceof Array)for(o=0,n=l.length;o<n;o++)b.entityRollOver(l[o].outline,t);else b.entityRollOver(l,t);b.entityRollOver(l,t)}}}drawLabel(e,t){let o,n,l,r=this,i=e.config;if(i.showLabel)if("object"==typeof i.options)for(n=(l=i.labels)&&l.length||0,o=i.options.isDataEnabled;n--;)t.push(r._getLabelObject(e,n,o,!n));else t.push(r._getLabelObject(e,f,!0,!0))}drawLabelConnectors(e,t,o){let n,l,r=e.config,i=this,c=i.getFromEnv("chart"),h=c.getFromEnv("animationManager"),d=c.config.scalingParams,g=o.getLinkedParent().getChildContainer("plot"),f=t&&t.length||0,p=r.showLabel;for(;f--;)l=t[f],n=e.graphics.connectorElem,p?e.graphics.connectorElem=n=h.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:l,opacity:1,transform:a.hasSVG||!b?"":d.transformStr,stroke:(0,s.convertColor)(r.connectorColor,r.connectorAlpha),"shape-rendering":w,"stroke-width":r.connectorThickness},container:g,component:i,label:"labelConnectors"}):n&&n.hide()}entityClick(e,t){let o=e.node.__entity,n=this.getFromEnv("chart"),l=n.config.scalingParams,r=o.graphics.outlines.getBBox(),i=n.getFromEnv("linkClickFN"),a=o.config,s=a.link;r.width*=l.scaleFactor,r.height*=l.scaleFactor,r.x=r.x*l.scaleFactor+l.translateX,r.y=r.y*l.scaleFactor+l.translateY,r.x2=r.x+r.width,r.y2=r.y+r.height,n.fireChartInstanceEvent("entityclick",a.eventArgs,t),s!==f&&i.call({link:s,entity:o,entityBox:r},!0)}entityRollOver(e,t){let o=e.node.__entity,n=o.config,l=this.getFromEnv("chart"),r=l.getFromEnv("animationManager"),i=n.hoverAttr;l.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):n.useHoverColor&&n.isVisible&&!o.hidden&&i&&(l.config.hoverEntity=e,r.setAnimation({el:e,attr:i,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}entityRollOut(e,t){let o,n=e.node.__entity,l=this,r=l.getFromEnv("chart"),i=r.getFromEnv("animationManager"),a=n.config.revertAttr;r.plotEventHandler(e,t,"entityRollOut"),n.config.timer=setTimeout(function(){!0!==(o=n.hidden)&&a&&(i.setAnimation({el:e,attr:a,component:l,state:"updating",label:"path"}),e.data("hovered",!1))},100)}addMouseGestures(e){let t,o,n,l,r,i=e.config,c=i.originalId,h=this,d=e.graphics,g=i.useHoverColor,p=i.hoverBorderThickness,u=i.hoverBorderColor,b=i.hoverBorderAlpha,m=i.entityBorderThickness,v=i.borderColor,y=i.borderAlpha,C=i.link,k=i.visibleEntityAttr,E=function(t){C!==f&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",i.eventArgs),t.data("groupId","groupId"+c),t.node.__entity=e,e._listenersBinded||t.click(h.entityClick.bind(h,t)).hover(h.entityRollOver.bind(h,t),h.entityRollOut.bind(h,t))};for(t in i.eventArgs={value:i.cleanValue,label:i.label,shortLabel:i.shortLabel,originalId:i.origId,id:i.id||i.origId},i.legacyEventArgs={value:i.value,lName:i.label,sName:i.shortLabel,id:i.originalId||i.id},g&&(i.hoverAttr={fill:(0,a.toRaphaelColor)(i.hoverColor)},i.revertAttr={fill:(0,a.toRaphaelColor)(i.fillColor),stroke:(0,a.toRaphaelColor)(i.borderColor,i.borderAlpha)},i.revertAttr["fill-opacity"]=k["fill-opacity"],p!==m&&(i.hoverAttr["stroke-width"]=(0,a.pluckNumber)(p,m),i.revertAttr["stroke-width"]=m),(u!==v||b!==y)&&(i.hoverAttr.stroke=(0,s.convertColor)(u,b),i.revertAttr.stroke=(0,s.convertColor)(v,y))),d)if(d.hasOwnProperty(t))if(d[t]instanceof Array){for(o=0,l=(r=d[t]).length;o<l;o++)E(n=r[o].outline);e._listenersBinded=!0}else E(n=d[t]),e._listenersBinded=!0}getDataLimits(){let e=this.config;return{max:e.max,min:e.min}}initComplete(){let e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()}}exports.default=j;
},{"../../core/component-interface":62,"../vendors/fc-ext-annotation/src/ext-annotation.js":122,"../dependency-manager":17,"../animation-rules/map-entities-animation":165,"../lib/lib":20,"../lib/lib-graphics":21,"../schedular":18,"../redraphael/redraphael-shapes/redraphael-shapes.litepath":177}],164:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,i=function(t,i,r,n,o){var e=Math.pow;return e(r-t,2)+e(n-i,2)<=e(o,2)},r=Math.PI,n=Math.cos,o=Math.sin,e=Math.max,a=Math.min,u=r/180,h=function(t){return t%360*u},f=function(t,i,r,n,o,e){var a,u,h;return a=(n-i)*(o-r),u=(r-t)*(e-n),isNaN(a)&&(a=0),isNaN(u)&&(u=0),0===(h=a-u)?0:0<h?1:2},s=function(t,i,r,n,o,u){return!!(r<=e(t,o)&&r>=a(t,o)&&n<=e(i,u)&&n>=a(i,u))},c=function(t,i,r,n,o,e,a,u){var h=f(t,i,r,n,o,e),c=f(t,i,r,n,a,u),x=f(o,e,a,u,t,i),p=f(o,e,a,u,r,n);return!!(h!==c&&x!==p||0===h&&s(t,i,o,e,r,n)||0===c&&s(t,i,a,u,r,n)||0===x&&s(o,e,t,i,a,u)||0===p&&s(o,e,r,n,a,u))},x=function(e,a,u,x,p,y,l){var d,v,m,g,M,L,w,_=0,N=!1;if(i(e,a,u,x,p)&&3<=y){for(v=l===t?.5*r:h(l),w=2*r/y,m=u+p*n(-v),L=x+p*o(-v),d=0;d<y;d++){if(g=u+p*n(-(v+=w)),M=x+p*o(-v),c(m,L,g,M,e,a,1/0,a)){if(0===f(m,L,e,a,g,M))return s(m,L,e,a,g,M);_++}m=g,L=M}N=0!=_%2}return N},p=(t,i)=>!t||t&&i&&i.i>t.i?i:t;function y(t){function i(t,i,r){var n=t[i];t[i]=t[r],t[r]=n}var r,n,o,e=t&&t[0]&&t[0].r||5,a=Math.max,u=Math.floor,h=Math.sqrt,f=Math.min,s=Math.log,c=Math.exp,x=Math.pow;for(n=function(t,r,o,e){for(var x,p,y,l,d,v,m,g,M,L;e>o;){for(600<e-o&&(p=r-o+1,y=s(x=e-o+1),l=.5*c(2*y/3),d=.5*h(y*l*(x-l)/x)*(0>p-x/2?-1:1),v=a(o,u(r-p*l/x+d)),m=f(e,u(r+(x-p)*l/x+d)),n(t,r,v,m)),g=t[r],M=o,L=e,i(t,o,r),t[e].x>g.x&&i(t,o,e);M<L;){for(i(t,M,L),M++,L--;t[M].x<g.x;)M++;for(;t[L].x>g.x;)L--}t[o].x===g.x?i(t,o,L):i(t,++L,e),L<=r&&(o=L+1),r<=L&&(e=L-1)}},o=function(t,r,n,e){for(var x,p,y,l,d,v,m,g,M,L;e>n;){for(600<e-n&&(p=r-n+1,y=s(x=e-n+1),l=.5*c(2*y/3),d=.5*h(y*l*(x-l)/x)*(0>p-x/2?-1:1),v=a(n,u(r-p*l/x+d)),m=f(e,u(r+(x-p)*l/x+d)),o(t,r,v,m)),g=t[r],M=n,L=e,i(t,n,r),t[e].y>g.y&&i(t,n,e);M<L;){for(i(t,M,L),M++,L--;t[M].y<g.y;)M++;for(;t[L].y>g.y;)L--}t[n].y===g.y?i(t,n,L):i(t,++L,e),L<=r&&(n=L+1),r<=L&&(e=L-1)}},r=(t=t||[]).length;r--;)t[r].r>e&&(e=t[r].r),t[r].i=r,t[r].x=+t[r].x,t[r].y=+t[r].y;return{tree:0===t.length?{}:function t(i,r,e,a){var u,h={},f=a?"y":"x";return r===e?(h.point=i[r],h):1==e-r?(i[r][f]>i[e][f]?(h.point=i[r],h.left={point:i[e]}):(h.point=i[e],h.left={point:i[r]}),h):(u=r+e>>1,a?o(i,u,r,e):n(i,u,r,e),h.point=i[u],h.left=t(i,r,u-1,!a),h.right=t(i,u+1,e,!a),h)}(t,0,t.length-1,!1),search:function(t,i,r,n){function o(t,i,r,n){return h(x(t-r,2)+x(i-n,2))}function a(n,e){return"circle"===r?o(n,e,t,i)<=d:n>=d&&n<=v&&e>=m&&e<=g}function u(t,i,r){return t>=i&&t<=r}function f(r){var n=u(t,r.x1,r.x2)&&u(i,r.y1,r.y2),e=o(t,i,r.point.x,r.point.y);return c?void(n?M?r.point.i>c.point.i&&(c=r,M=n,L=e):(c=r,M=n,L=e):!M&&e<L&&(c=r,M=n,L=e)):(c=r,M=n,void(L=e))}function s(n,o){"circle"===r?d=n:(d=t-n||0,v=t+n||0,m=i-o||0,g=i+o||0)}var c,p,y,l=this.tree,d=t-e,v=t+e,m=i-e,g=i+e,M=!1,L=0;return n=n||{},y=function(t){t&&t.point&&(s(n.rx||t.point.r,n.ry||t.point.r),a(t.point.x,t.point.y)&&f(t),m<=t.point.y&&p(t.left),g>=t.point.y&&p(t.right))},(p=function(t){t&&t.point&&(s(n.rx||t.point.r,n.ry||t.point.r),a(t.point.x,t.point.y)&&f(t),d<=t.point.x&&y(t.left),v>=t.point.x&&y(t.right))})(l),c&&c.point||c}}}class l{constructor(t){this.configure(t)}configure(t){var i=this;i.validatorFn=t?i.shapeValidator():i.defaultValidator()}defaultValidator(){var t=Math.pow,i=this;return function(r){var n=i.mousePoint;return!!(r&&1>=t((r.x-n.x)/i.xLimit,2)+t((r.y-n.y)/i.yLimit,2))}}shapeValidator(){var t=this;return function(r){var n,o,e,a,u,h,f,s,c,p=t.mousePoint,y=r&&r.shapeInfo,l=!1,d=p.x,v=p.y;return"circle"===(n=y&&y.type)?(e=y.radius,l=i(d,v,r.x,r.y,e)):"arc"===n?(o=y.innerradius,e=y.radius,l=!i(d,v,r.x,r.y,o)&&i(d,v,r.x,r.y,e)):"polygon"===n?(e=y.radius,u=y.startAngle,a=y.sides,l=x(d,v,r.x,r.y,e,a,u)):"rect"===n?(h=r.x,s=r.y,f=h+(y.width||0),c=s+(y.height||0),l=d>=h&&d<=f&&v>=s&&v<=c):"default"===n&&(l=!1),l}}buildKdTree(t){return this.kdTree=y(t),this.tree=this.kdTree.tree,this}getNeighbour(t,i,r){var n=this,o=n.tree,e={x1:t.x-n.xLimit,x2:t.x+n.xLimit,y1:t.y-n.yLimit,y2:t.y+n.yLimit},a=n.validatorFn;return n.mousePoint=t,i?this.kdTree&&this.kdTree.search(t.x,t.y,r,t.options):o?n._searchBtwnLimit(e,o,!0,a):void 0}_searchBtwnLimit(i,r,n,o){var e,a,u=n?"x":"y",h=n?i.x1:i.y1,f=n?i.x2:i.y2;if((e=r&&r.point&&r.point[u])!==t)return o(r.point)&&(a=r.point),e>=h&&r.left&&(a=p(a,this._searchBtwnLimit(i,r.left,!n,o))),e<=f&&r.right&&(a=p(a,this._searchBtwnLimit(i,r.right,!n,o))),a}_setSearchLimit(t,i){this.xLimit=t,this.yLimit=i}}l.prototype.constructor=l,exports.default=l;
},{}],135:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./entities"),t=g(e),r=require("../misc/kdtree"),o=g(r),a=require("../dependency-manager"),l=require("../animation-rules/map-entities-animation"),n=g(l),i=require("../lib/lib"),s=require("../lib/lib-graphics"),c=require("../misc/event-api"),d=require("../schedular");function g(e){return e&&e.__esModule?e:{default:e}}let h,p=window.navigator.userAgent,f=/msie/i.test(p)&&!window.opera,m="",u="top",k="bottom",b="right",v="left",C="middle",x="center",y=.6,w=window.Math,L=w.min,A=w.max,S="items",E=Math.PI,F=E/180,O="rgba(192,192,192,"+(f?.002:1e-6)+")",_=function(e,t){let r=t?(0,i.extend2)(e.FCcolor,t,!1,!0):{FCcolor:e};return r.toString=i.toRaphaelColor,r},I=function(e,t){let r,o=e&&e.length||!1,a=t||"id",l={};if(!e)return e;for(;o--;)(r=e[o])[a]!==h&&(l[r[a].toLowerCase()]=r);return l};(0,a.addDep)({name:"mapsAnimation",type:"animationRule",extension:n.default});class T extends t.default{constructor(){super(),this.components={},this.getLabelAlignment={top:function(e,t,r){return{x:e.toString(),y:(t-r).toString(),align:x,valign:u}},left:function(e,t,r){return{x:(e-r).toString(),y:t.toString(),align:b,valign:C}},right:function(e,t,r){return{x:(e+r).toString(),y:t.toString(),align:v,valign:C}},bottom:function(e,t,r){return{x:e.toString(),y:(t+r).toString(),align:x,valign:k}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:x,valign:C}}},this.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*L(t,e-t)}},this.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*L(t,e-t)},bottom:function(e,t){return e-t}}}getName(){return"markers"}getType(){return"dataset"}configureAttributes(e){if(e){this.JSONData=e;let t=this,r=t.getFromEnv("chart").config.markerOpts;t.calculateDataLimits(),r.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}calculateMarkerRadiusLimits(){if(this.JSONData){let e=this,t=e.JSONData,r=e.config,o=e.getFromEnv("chart"),a=o.config.width,l=o.config.height,n=t.markermaxradius,i=t.markerminradius,s=T.getMarkerRadiusLimits(a,l,n,i);r.minRadius=s.min,r.maxRadius=s.max}}calculateDataLimits(){let e,t,r,o,a,l=this.getFromEnv("chart"),n=this.config,i=(l.jsonData.markers||{})[S]||[],s=this.getFromEnv("number-formatter"),c=1/0,d=-1/0;for(a=0,r=i.length;a<r;a++)o=(e=i[a]).value,null!==(t=s.getCleanValue(o))&&(c=L(t,c),d=A(t,d));n.min=c,n.max=d}_parseMarkers(){let e,t,r,o,a,l,n,s,c=this,d=c.getFromEnv("chart"),g=d.jsonData.markers,p=g[S],f=g.shapes,m=d.config.markerOpts,u=this.getFromEnv("number-formatter"),k=c.components.shapeObjs={},b=c.components.markerObjs={};if(p&&p.length){if(f&&f.length)for(t=f.length;t;t-=1)(s=(o=f[t-1]).id.toLowerCase())&&(k[s]=o);for(t=p.length;t--;)(s=(o=p[t]).id&&o.id.toLowerCase())&&((e=o.value)!==h&&""!==e&&(e=parseFloat(e)),(a=(r=T._initializeMarkerItem(s,o,null,d)).config.options.shapeid)&&"string"==typeof a&&(a=a.toLowerCase()),n=(l=r.config).options,l.cleanValue=u.getCleanValue(e),l.formattedValue=null===l.cleanValue?h:u.dataLabels(e),l.fillColor=(0,i.pluck)(n.fillcolor,n.color,m.fillColor),l.fillAlpha=(0,i.pluck)(n.fillalpha,n.alpha,m.fillAlpha),l.fillRatio=(0,i.pluck)(n.fillratio,m.fillRatio),l.fillAngle=(0,i.pluck)(n.fillangle,m.fillAngle),l.borderThickness=(0,i.pluckNumber)(n.borderthickness,m.borderThickness),l.borderColor=(0,i.pluck)(n.bordercolor,m.borderColor),l.borderAlpha=(0,i.pluck)(n.borderalpha,m.borderAlpha),l.labelPadding=n.labelpadding||m.labelPadding,r.dataset=c,o.__hideMarker&&(r._isHidden=!0),a&&(r.shapeObj=k[a]),b[s]=r)}}defineMarkersNShapes(){let e,t,r,o,a,l,n,s,c=this,d=c.getFromEnv("chart"),g=d.jsonData.markers,p=g.definition,f=this.getFromEnv("number-formatter"),m=d.config.markerOpts,u=I(p)||{},k=I(g.application)||{},b=g.shapes,v=c.components.shapeObjs=c.components.shapeObjs||(c.components.shapeObjs={}),C=c.components.markerObjs=c.components.markerObjs||(c.components.markerObjs={});if(p&&p.length){if(b&&b.length)for(o=b.length;o;o-=1)(s=(l=b[o-1]).id.toLowerCase())&&(v[s]=l);for(s in u)l=u[s],(a=C[s]=T._initializeMarkerItem(s,l,k[s],d)).dataset=c,n=a.config.options.shapeid,t=a.config,r=l.value,t.cleanValue=f.getCleanValue(r),e=t.options,t.formattedValue=null===t.cleanValue?h:f.dataLabels(r),t.fillColor=(0,i.pluck)(e.fillcolor,e.color,m.fillColor),t.fillAlpha=(0,i.pluck)(e.fillalpha,e.alpha,m.fillAlpha),t.fillRatio=(0,i.pluck)(e.fillratio,m.fillRatio),t.fillAngle=(0,i.pluck)(e.fillangle,m.fillAngle),t.borderThickness=(0,i.pluckNumber)(e.borderthickness,m.borderThickness),t.borderColor=(0,i.pluck)(e.bordercolor,m.borderColor),t.borderAlpha=(0,i.pluck)(e.borderalpha,m.borderAlpha),t.labelPadding=e.labelpadding||m.labelPadding,t.options.tooltext=(0,i.pluck)(e.tooltext,m.tooltext),t.link=e.link,n&&(a.shapeObj=v[n.toLowerCase()])}}static getMarkerRadiusLimits(e,t,r,o){let a=L(e,t);return o=parseFloat(o),r=parseFloat(r),isNaN(o)||isNaN(r)?isNaN(o)?isNaN(r)?{min:.02*a,max:.07*a}:{min:parseInt(r/10,10),max:r}:{min:o,max:10*o}:o<r?{min:o,max:r}:{min:r,max:o}}getDataLimits(){let e=this.config;return{min:e.min,max:e.max}}static _initializeMarkerItem(e,t,r){let o,a={},l=a.config;return l||(l=a.config={}),l.id=e,l.definition=t,l.application=r,l.hasValue=null,l.value=null,l.options=null,l.label=null,l.markerShape=null,l.markerLabel=null,l.drawOptions={shape:null,label:null},l.drawComplete=!1,o=a.config.options=(0,i.extend2)({},l.definition),l.dataEnabled?!isNaN(o.value)&&""!==o.value&&(a.value=parseFloat(o.value),a.hasValue=!0):l.applyAll?l.options=(0,i.extend2)(o,l.application):r&&(l.options=(0,i.extend2)(o,l.application)),a}configureConnectors(){let e,t,r,o,a,l,n,s,c,d,g,h,p,f,u=this,k=u.getFromEnv("chart"),b=k.jsonData,v=u.components,y=b.markers||{},w=y.connector||y.connectors||[],L=v.markerObjs,A=w.length,S=u.components.connectors,E=function(e){return function(t){let r=this,o=r.getElement();o&&r.unfilteredConfig.hoverEffect&&o.attr(r.unfilteredConfig._hoverAttrs),k.fireChartInstanceEvent("connectorrollover",e,t)}},F=function(e){return function(t){let r=this,o=r.getElement();o&&r.unfilteredConfig.hoverEffect&&o.attr(r.unfilteredConfig._defaultAttrs),k.fireChartInstanceEvent("connectorrollout",e,t)}},O=function(e){return function(t){k.fireChartInstanceEvent("connectorClick",e,t)}},I=k.config.connectorOpts,T={};for(S=u.components.connectors=[],f=0;f<A;f++)((p=w[f]).from||p.to)&&(t=L[p.from.toLowerCase()],r=L[p.to.toLowerCase()],t&&r)&&(o=w[f].label,(T=S[f])||(T=S[f]={}),T.config||(e=T.config={}),T.graphics||(T.graphics={}),(e=T.config=(0,i.extend2)({},p)).fromMarker=t,e.toMarker=r,e.link=p.link,e.showTooltip=(0,i.pluckNumber)(p.showtooltip,I.showTooltip),a=e.tooltext=e.showTooltip?(0,i.pluck)(p.tooltext,I.tooltext):m,l=e.thickness=(0,i.pluck)(p.thickness,I.thickness),n=e.color=(0,i.pluck)(p.color,I.color),s=e.alpha=(0,i.pluck)(p.alpha,I.alpha),e.hoverEffect=(0,i.pluckNumber)(p.showhovereffect,I.showHoverEffect),c=(0,i.pluck)(p.hovercolor,I.hoverColor,n),d=(0,i.pluck)(p.hoveralpha,I.hoverAlpha,s),g=(0,i.pluck)(p.hoverthickness,I.hoverThickness,l),e.dashed=(0,i.pluck)(p.dashed,I.dashed),e.dashLen=(0,i.pluckNumber)(p.dashlen,I.dashlen),e.dashGap=(0,i.pluckNumber)(p.dashgap,I.dashgap),a&&(e.tooltext=a=(0,i.parseUnsafeString)((0,i.parseTooltext)(a,[3,40,41,42,43],{label:o,fromId:t.config.definition.id,toId:r.config.definition.id,fromLabel:t.config.definition.label,toLabel:r.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:r.config.id,label:o},e._hoverAttrs={stroke:_({color:c,alpha:d}).toString(),"stroke-width":g},e._defaultAttrs={stroke:_({color:n,alpha:s}).toString(),"stroke-width":l},e.type="line",e.onclick=O(e.eventArgs),e.onmouseover=E(e.eventArgs),e.onmouseout=F(e.eventArgs),o&&(!(h=T.labelConfig)&&(h=T.labelConfig={}),h.type="text",h.text=o,h.align=x,h.valign=C,h.font=I.font,h.fillcolor=I.fontColor,h.bgcolor=I.labelBgColor,h.bordercolor=I.labelBorderColor,h.tooltext=e.tooltext))}draw(){let e,t,r,o,a,l,n=this,i=n.getFromEnv("chart"),s=n.config,c=i.getChildren("mapAnnotations")[0],g=n.components.markerObjs,h=i.config,p=h.markerOpts,f=h.scalingParams,m=i.config.annotationConfig,u=n.getFromEnv("toolTipController"),k=[],b=[],v={};for(o in this._drawConnectors(),n.imageLoadCount=0,n.imageCount=0,l=c.addGroup(Object.assign(m,{id:"markers",fillalpha:"100",items:k,scaleimages:1}),n),a=c.addGroup(Object.assign(m,{id:"markerLabels",items:b,scaleimages:1}),n),h.labelsOnTop&&i.getChildren("mapLabelAnnotations")&&i.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),n.components.markerGroup=l,n.components.markerLabelGroup=a,s.autoScale=p.autoScale?f.sFactor:1,g)e=null,(r=(t=g[o]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(r._annotationIndex=k.length,v[o]=t,t.markerShape=e.markerShape&&c.addItem(l.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),!0,n),t.markerShape&&u.enableToolTip(t.markerShape.getElement(),t.config.tooltext),k.push(t.markerShape),t.markerLabel=e.markerLabel&&c.addItem(a.getId(),Object.assign({animationLabel:"markerItem"},e.markerLabel),!0,n),b.push(t.markerLabel));n.addJob("buildKdtree",n._buildKdTree.bind(n),d.priorityList.kdTree)}_buildKdTree(){let e,t,r=this,a=r.components.kdArrayMap,l=r.components.markerGroup,n=[],i=l&&l.items,s=i&&i.length||0;for(t=0;t<s;t++)a[e=i[t].config.id]&&n.push(a[e]);r.components.kDTree||(r.components.kDTree=new o.default(!0)),r.components.kDTree._setSearchLimit(1/0,1/0),r.components.kDTree.buildKdTree(n)}_drawMarkerItem(){let e,t,r,o,a,l,n,c,d,g,p,f,k,b,v,C,x,w,L,A,S=this,E=S.dataset,F=E.getFromEnv("chart"),O=F.config,_=E.config,I=O.scalingParams,T=S.config,j=T.options,M=T.definition,N=O.markerOpts,R=N.dataLabels.style,P=j.shapeid,V=j.scale||1,D=j.label||m,H=F.config.scalingParams.scaleFactor*F.config.baseScaleFactor,G=(j.labelpos||u).toLowerCase(),B=T.formattedValue===h?h:T.formattedValue,W=j.tooltext||N.tooltext,K=(0,i.pluckNumber)(M.radius,T.radius,N.radius)*V*_.autoScale||1e-4,X=T.fillColor,Y=T.fillAlpha,q=T.fillRatio,z=T.fillAngle,J=T.borderThickness,U=T.borderColor,$=T.borderAlpha,Q=E.components.kdArrayMap||(E.components.kdArrayMap={}),Z=S.config.id;if(T.autoScale=N.autoScale?H:1,P)return W=W?(0,i.parseUnsafeString)((0,i.parseTooltext)(W,[1,2,3],{formattedValue:B,label:D},j)):B?D+N.tooltipSepChar+B:D,B!==h&&null!==B?D=D+N.labelSepChar+B:isNaN(V)?V=1:0>V?V=0:5<V&&(V=5),(0,i.extend2)(j,{x:j.x&&j.x.toString(),y:j.y&&j.y.toString(),fillcolor:X,fillalpha:Y,fillratio:q,fillangle:z,borderthickness:J,bordercolor:U,borderalpha:$,hovereffect:(0,i.pluck)(N.showHoverEffect),radius:K&&K.toString(),link:j.link,showshadow:(0,i.pluckNumber)(j.showshadow,T.shadow),_markerLabel:D,_markerId:j.id,id:(j.id+m).toLowerCase()}),delete j.tooltext,T.tooltext=!!N.showTooltip&&W,v=+j.x*I.sFactor+I.translateX,C=+j.y*I.sFactor+I.translateY,K=j.radius,"triangle"===P?((0,i.extend2)(j,{type:"polygon",sides:3,startangle:N.startAngle}),A="polygon",L=3):"diamond"===P?((0,i.extend2)(j,{type:"polygon",sides:4,startangle:N.startAngle}),A="polygon",L=4):"arc"===P?(w=K*y,(0,i.extend2)(j,{type:"arc",startangle:0,endangle:360,innerradius:w}),A="arc"):"circle"===P?(j.type="circle",A="circle"):(p=E.getShapeArgs.call(S),N.dataEnabled&&N.valueToRadius&&j.radius!==h?delete p.radius:(!p.radius&&(p.radius=N.radius),p.radius*=V*T.autoScale),(0,i.extend2)(j,p),j.id=j._markerId&&j._markerId.toLowerCase(),w=p.innerradius,p.radius&&(K=p.radius),A=p.type&&p.type.toLowerCase(),L=p.sides||5,(K=+K)&&w&&K<w&&(b=K,j.radius=K=w,j.innerradius=w=b)),j.type=j.type&&j.type.toLowerCase(),(0,i.extend2)(j,{hoverfillcolor:(0,i.pluck)(j.fillhovercolor,N.hoverFillColor,j.fillcolor),hoverfillalpha:(0,i.pluck)(j.fillhoveralpha,N.hoverFillAlpha,j.fillalpha),hoverfillratio:(0,i.pluck)(j.fillhoverratio,N.hoverFillRatio,j.fillratio),hoverfillangle:(0,i.pluck)(j.fillhoverangle,N.hoverFillAngle,j.fillangle),hoverborderthickness:(0,i.pluckNumber)(j.borderhoverthickness,N.hoverBorderThickness,j.borderthickness),hoverbordercolor:(0,i.pluck)(j.borderhovercolor,N.hoverBorderColor,j.bordercolor),hoverborderalpha:(0,i.pluck)(j.borderhoveralpha,N.hoverBorderAlpha,j.borderalpha)}),f={alpha:j.fillalpha,color:j.fillcolor,angle:360-j.fillangle,ratio:j.fillratio},k={alpha:j.hoverfillalpha,color:j.hoverfillcolor,angle:360-j.hoverfillangle,ratio:j.hoverfillratio},j._defaultattrs={fill:(0,i.toRaphaelColor)(f),"stroke-width":"0"===j.showborder?0:j.borderthickness,stroke:(0,s.convertColor)(j.bordercolor,j.borderalpha)},j._hoverattrs={fill:(0,i.toRaphaelColor)(k),"stroke-width":"0"===j.showborder?0:j.hoverborderthickness,stroke:(0,s.convertColor)(j.hoverbordercolor,j.hoverborderalpha)},"image"===j.type?(j.borderthickness=j.borderthickness||0,j.onload=function(e){let t=this.config,r=e.width,o=e.height,a={},l=(+t.x-r/(2*I.sFactor))*I.sFactor,n=(+t.y-o/(2*I.sFactor))*I.sFactor;(a=Q[Z]||(Q[Z]={})).x=l+I.translateX,a.y=n+I.translateY,a.element=S,a.shapeInfo={type:"rect",width:r,height:o},r&&o&&this.getElement().attr({x:l,y:n,width:r,height:o}),E.imageLoadCount++,E.imageLoadCount===E.imageCount&&E._buildKdTree()},j.onerror=function(){E.imageLoadCount++,E.imageLoadCount===E.imageCount&&E._buildKdTree()},E.imageCount++):((x=Q[Z]||(Q[Z]={})).x=v,x.y=C,x.element=S,x.shapeInfo={type:A,sides:L,radius:+K+j.borderthickness/2,innerradius:w}),T.drawOptions.shape=j,N.showLabels?(g=j.labelpadding||N.labelPadding,t=(e=E._getLabelOptions(G,g,j)).align,r=e.valign,o=T._labelBaseWidth,a=T._labelBaseHeight,l=T._labelXOffset,n=T._labelYOffset,(c=N.labelWrapWidth?N.labelWrapWidth:E.getWrapWidth[t](o,+e.x+l))>g&&(c-=g),(d=N.labelWrapHeight?N.labelWrapHeight:E.getWrapHeight[r](a,+e.y+n))>g&&(d-=g),T.drawOptions.label=(0,i.extend2)({type:"text"},{text:D,tooltext:j.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:c,wrapheight:d,fontsize:R.fontSize/I.sFactor,font:R.fontFamily,fillcolor:R.fontColor}),{markerShape:j,markerLabel:T.drawOptions.label}):{markerShape:j}}getHoverFn(){let e=this.getFromEnv("chart");return function(){let t,r,o=this.data("marker"),a=o.markerShape,l=a.unfilteredConfig,n=l._markerEventArgs,s=a.getElement(),d=s.getBBox(),g=o.config;s&&l.hovereffect&&("circle"===a.config.type&&(r={color:l.hoverfillcolor,alpha:l.hoverfillalpha,angle:360-l.hoverfillangle,ratio:l.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===a.config.rawFillPattern},l._hoverattrs.fill=(0,i.toRaphaelColor)(r)),t=(0,i.extend2)({},l._hoverattrs),"image"===s.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),s.attr(t)),n||(n=l._markerEventArgs={x:d.x,y:d.y,scaledX:d.x/a.groupConfig.scaleX,scaledY:d.y/a.groupConfig.scaleY,chartX:d.x+d.width/2,chartY:d.y+d.height/2,id:l.id,label:l.label}),(0,c.raiseEventGroup)(g.options.id,"markerRollOver",n,e.getFromEnv("chartInstance"),g,h,h,h)}}getHoverOutFn(){let e=this.getFromEnv("chart");return function(){let t,r=this.data("marker"),o=r.markerShape,a=o.getElement(),l=r.config,n=o.unfilteredConfig;a&&o.unfilteredConfig.hovereffect&&("circle"===o.config.type&&(n._defaultattrs.fill=(0,i.toRaphaelColor)({alpha:o.config.rawAlpha,color:o.config.rawColor,angle:360-o.config.rawAngle,ratio:o.config.rawRatio,radialGradient:"radial"===o.config.rawFillPattern})),t=(0,i.extend2)({},o.unfilteredConfig._defaultattrs),"image"===a.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),a.attr(t)),(0,c.raiseEventGroup)(l.id,"markerRollOut",o.unfilteredConfig._markerEventArgs,e.getFromEnv("chartInstance"),h,h,h)}}getClickFn(){let e=this;return function(t){let r=this.data("marker"),o=r.config.options,a=e.getFromEnv("chart"),l=r.markerShape,n=l.config,i=this.getBBox(),s=n._markerEventArgs;s||(s=n._markerEventArgs={x:i.x,y:i.y,scaledX:i.x/l.groupConfig.scaleX,scaledY:i.y/l.groupConfig.scaleY,chartX:i.x+i.width/2,chartY:i.y+i.height/2,id:o.id,label:o.label}),a.fireChartInstanceEvent("markerClick",s,t)}}highlightPoint(e){let t,r,o,a,l,n,i,s,c,d,g=e.element,h=this,p=h.getFromEnv("chart"),f=p.graphics,m=h.getFromEnv("animationManager"),u=f.trackerElems||(f.trackerElems={}),k=e.shapeInfo,b=h.getFromEnv("toolTipController"),v=e.x,C=e.y,x=p.config.lastHoveredPoint,y=!1;return!1===e?((r=u[t=x&&x.shapeInfo.type])&&r.hide(),void(p.config.lastHoveredPoint=null)):(o={fill:O,stroke:O},"circle"===(t=k.type)&&(t="polygon"),r=u[t],"polygon"===t?(a=k.sides||1,l=k.startAngle,i=k.radius,!r&&(y=!0),r=f.trackerElems[t]=m.setAnimation({el:f.trackerElems[t]||"polypath",container:r,attr:Object.assign({polypath:[a,v,C,i,l]},o),component:h,label:"markers"})):"rect"===t?(n=k.width,c=k.height,!r&&(y=!0),r=f.trackerElems[t]=m.setAnimation({el:f.trackerElems[t]||"rect",container:r,attr:Object.assign({x:v,y:C,width:n,height:c},o),component:h,label:"markers"})):"arc"===t&&(s=g.markerShape.config.innerRadius,l=(360-g.markerShape.config.startAngle)*F,d=(360-g.markerShape.config.endAngle)*F,i=k.radius,!r&&(y=!0),r=f.trackerElems[t]=m.setAnimation({el:f.trackerElems[t]||"ringpath",container:r,attr:Object.assign({ringpath:[v,C,i,s,d,l]},o),component:h,label:"markers"})),p.config.lastHoveredPoint=e,y&&r.click(h.getClickFn()).hover(h.getHoverFn(),h.getHoverOutFn()),r.show().data("marker",g),void b.enableToolTip(r,g.config.tooltext))}_drawConnectors(){let e,t,r,o,a,l,n,i,s=this,c=s.getFromEnv("chart"),d=c.config.annotationConfig,g=s.components.connectors||(s.components.connectors=[]),h=g.length,p=c.config.scalingParams,f=c.config.connectorOpts,m=f.showLabels,u=c.getChildren("mapAnnotations")[0],k=[],b=[],v=[];for(v.push({id:"connectorLabels",fillalpha:"100",items:b}),v.push({id:"connectors",fillalpha:"100",items:k}),u.addGroup(Object.assign(d,v[1]),s),u.addGroup(Object.assign(d,v[0]),s),t=0;t<h;t++)g[t]&&(n=g[t].config.fromMarker.config,i=g[t].config.toMarker.config,r=n.options.x,o=n.options.y,a=i.options.x,l=i.options.y,g[t].config.x=r,g[t].config.y=o,g[t].config.tox=a,g[t].config.toy=l,k.push(g[t].config),(e=u.addItem("connectors",Object.assign({animationLabel:"markerItem"},g[t].config),!0,s)).addEventListener("mouseover",g[t].config.onmouseover),e.addEventListener("mouseout",g[t].config.onmouseout),e.addEventListener("click",g[t].config.onclick),g[t].labelConfig&&m&&(g[t].labelConfig.x=((+r+ +a)/2).toString(),g[t].labelConfig.y=((+o+ +l)/2).toString(),g[t].labelConfig.fontsize=f.fontSize/(p.scaleFactor*c.config.baseScaleFactor),b.push(g[t].labelConfig),u.addItem("connectorLabels",Object.assign({animationLabel:"markerItem"},g[t].labelConfig),!0,s)))}getShapeArgs(){let e,t=this.config,r=(0,i.extend2)({},this.shapeObj);return t.autoScale=1,r?("polygon"===r.type?3>r.sides?r.type="circle":r.startangle=t.startAngle:"arc"===r.type&&(e=(r.radius||t.markerRadius)*t.autoScale,r.radius=e,r.innerradius=r.innerradius&&r.innerradius*t.autoScale||e*y),r):null}_getLabelOptions(e,t,r,o,a){let l,n,i,s=e&&e.toLowerCase();return this.getLabelAlignment[s]||(s="center"),n=+r.x,i=+r.y,l=+(l=o===h||a===h?r.radius||0:/^(top|bottom)$/gi.test(s)&&.5*a||/^(left|right)$/gi.test(s)&&.5*o||0)+ +t,this.getLabelAlignment[s](n,i,l)}addMarkerItem(e){let t,r,o,a,l,n,s=this,c=s.getFromEnv("chart"),d=e,g=s.components.markerObjs,p=s.components.shapeObjs,f=s.components.markerGroup,m=s.components.markerLabelGroup,u=c.getChildren("mapAnnotations")[0],k=s.getFromEnv("number-formatter"),b=c.config.markerOpts;if(n=d.id.toLowerCase()){if(g[n])return;delete d.value,s.imageLoadCount=0,(t=T._initializeMarkerItem(n,d,null)).dataset=s,l=t.config.options.shapeid,o=t.config,a=d.value,o.cleanValue=k.getCleanValue(a),e=o.options,o.formattedValue=null===o.cleanValue?h:k.dataLabels(a),o.fillColor=(0,i.pluck)(e.fillcolor,e.color,b.fillColor),o.fillAlpha=(0,i.pluck)(e.fillalpha,e.alpha,b.fillAlpha),o.fillRatio=(0,i.pluck)(e.fillratio,b.fillRatio),o.fillAngle=(0,i.pluck)(e.fillangle,b.fillAngle),o.borderThickness=(0,i.pluckNumber)(e.borderthickness,b.borderThickness),o.borderColor=(0,i.pluck)(e.bordercolor,b.borderColor),o.borderAlpha=(0,i.pluck)(e.borderalpha,b.borderAlpha),o.labelPadding=e.labelpadding||b.labelPadding,o.options.tooltext=(0,i.pluck)(e.tooltext,b.tooltext),o.link=e.link,l&&(t.shapeObj=p[l&&l.toLowerCase()]),g[n]=t,r=s._drawMarkerItem.call(t),f&&m&&(t.markerShape=r.markerShape&&u.addItem(f.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},r.markerShape),!0,s),t.markerLabel=r.markerLabel&&u.addItem(m.getId(),Object.assign({animationLabel:"markerItem"},r.markerLabel),!0,s)),s._buildKdTree()}}updateMarkerItem(e,t){let r,o,a=this,l=a.getFromEnv("chart").getChildren("mapAnnotations")[0],n=a.components.markerObjs[e];n&&(r=n.config.options,(0,i.extend2)(r,t),a.imageLoadCount=0,o=a._drawMarkerItem.call(n).markerShape,a._buildKdTree(),l.update(e,o))}_removeMarkerItem(e){let t,r,o=this.components,a=o.markerObjs,l=a[e],n=o.kdArrayMap;l&&(t=l.markerShape,r=l.markerLabel,t&&t.dispose(),r&&r.dispose(),delete n[e],this._buildKdTree()),delete a[e]}getElement(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}exports.default=T;
},{"./entities":134,"../misc/kdtree":164,"../dependency-manager":17,"../animation-rules/map-entities-animation":165,"../lib/lib":20,"../lib/lib-graphics":21,"../misc/event-api":22,"../schedular":18}],136:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../../core/component-interface"),e=o(t),a=require("../../lib/lib"),n=require("../../dependency-manager"),i=require("../../animation-rules/map-entities-animation"),r=o(i);function o(t){return t&&t.__esModule?t:{default:t}}(0,n.addDep)({name:"mapsAnimation",type:"animationRule",extension:r.default});class s extends e.default{getType(){return"group"}getName(){return"mapGroup"}configure(){this._mapChildren(t=>{t.configure&&t.configure()})}createContainer(){let t,e=this,a=e.getLinkedParent(),n=e.getFromEnv("animationManager");t=a.getChildContainer().plotGroup,e.getChildContainer("plotShadow")||e.addChildContainer("plotShadow",n.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:t,component:e,label:"group"})),e.getChildContainer("plot")||e.addChildContainer("plot",n.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:t,component:e,label:"group"}))}_transformGroup(){let t=this,e=this.getFromEnv("chart"),n=e.getFromEnv("chartInstance"),i=t.getFromEnv("animationManager"),r=e.jsonData,o=t.getChildContainer("plot"),s=t.getChildContainer("plotShadow"),l=e.config.scalingParams;o.hide(),s.hide(),e.config.entitiesReady=!1,n.addEventListener("internal.mapdrawingcomplete",function(e){e.detachHandler(),a.hasSVG&&(n.args.link&&n.args.clickedEntityBox&&r.chart.linkedcharttransition,o&&i.setAnimation({el:o,attr:{transform:l.transformStr},component:t,state:"appearing",label:"group"}),s&&i.setAnimation({el:s,attr:{transform:l.transformStr},component:t,state:"appearing",label:"group"})),o.show(),s.show()}),e.checkComplete()}draw(){this.createContainer(),this._transformGroup()}getDataLimits(t){let e,a=this,n=1/0,i=-1/0,r=0,o=function(t){i=Math.max(i,t.max),n=Math.min(n,t.min)};return a._mapChildren(a=>a.getState("removed")||!1===a.getState("visible")?void(t&&(e=a.getDataLimits(t),o(e))):(r++,e=a.getDataLimits(t),void o(e))),r?a.setState("visible",!0):a.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:i,min:n}}}exports.default=s;
},{"../../../core/component-interface":62,"../../lib/lib":20,"../../dependency-manager":17,"../../animation-rules/map-entities-animation":165}],118:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var r,u=t.getFromEnv("dataSource"),d=u.data||{},i=u.markers;(0,e.componentFactory)(t,o.default,"mapGroup"),r=t.getChildren("mapGroup")[0],(0,e.datasetFactory)(r,a.default,"entities",1,[d]),i?(0,e.datasetFactory)(r,s.default,"markers",1,[i]):t.getDatasets()[1]&&t.getDatasets()[1].remove()};var e=require("../lib/lib"),t=require("../datasets/entities"),a=d(t),r=require("../datasets/markers"),s=d(r),u=require("../datasets/groups/maps"),o=d(u);function d(e){return e&&e.__esModule?e:{default:e}}
},{"../lib/lib":20,"../datasets/entities":134,"../datasets/markers":135,"../datasets/groups/maps":136}],185:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let e="100",t="#000000",r="";exports.HUNDREDSTRING=e,exports.BLANK=r,exports.COLOR_BLACK=t;
},{}],166:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../lib/lib"),a=require("./strings-lib"),l=require("../../core/component-interface"),r=o(l);function o(e){return e&&e.__esModule?e:{default:e}}let n,t=function(e,l,r){let o=e[0],n=e[1],t=e[2],u=o+(l[0]-o)*r,i=n+(l[1]-n)*r,m=t+(l[2]-t)*r;return{hex:(a.COLOR_BLACK+(u<<16|i<<8|m).toString(16)).slice(-6),rgb:[u,i,m]}};class u extends r.default{constructor(){super();let e=this;e.mapByCategory=!1,e.colorArr=[],e.noValidRange=!0,e.sortLegend=!1}__setDefaultConfig(){super.__setDefaultConfig(),this.config.defaultObj={code:"CCCCCC",alpha:"100",bordercolor:"000000",borderalpha:"100"}}getType(){return"colorComponent"}getName(){return"colorBucket"}configure(a){if(!a)return;let l,r,o,t,u,i,m,d,s,c,p,g=this,v=g.mapByCategory,b=a.numberFormatter,h=a.colorRange||{},f=(0,e.extend2)([],h.color),x=(0,e.pluckNumber)(b.getCleanValue(h.maxvalue),1/0),C=(0,e.pluckNumber)(b.getCleanValue(h.minvalue),-1/0),A=g.colorArr;if(a.mapByCategory!==n&&(v=g.mapByCategory=!!+a.mapByCategory),(f=v?f.filter(e=>e.code||e.color):f.filter(e=>(e.minvalue||e.maxvalue)&&(e.code||e.color))).forEach(e=>{e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(d=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=d),e.minvalue?e.maxvalue?(c=b.getCleanValue(e.minvalue),s=b.getCleanValue(e.maxvalue),e.rangeLabel=b.dataLabels(c)+"-"+b.dataLabels(s)):(c=b.getCleanValue(e.minvalue),e.maxvalue=s=x,e.rangeLabel=s===1/0?">"+b.dataLabels(c):b.dataLabels(c)+"-"+b.dataLabels(s)):(e.minvalue=c=C,s=b.getCleanValue(e.maxvalue),e.rangeLabel=c===-1/0?"<"+b.dataLabels(s):b.dataLabels(c)+"-"+b.dataLabels(s))}),f.sort((e,a)=>+e.minvalue==+a.minvalue?e.maxvalue-a.maxvalue:e.minvalue-a.minvalue),f&&(l=f.length)){for(A.length=0,r=0;r<l;r+=1)m=f[r],o=(0,e.pluck)(m.color,m.code),t=(0,e.pluck)(m.alpha),i=(0,e.pluck)(m.bordercolor),u=(0,e.pluck)(m.borderalpha,100),s=(0,e.pluckNumber)(m.maxvalue),c=(0,e.pluckNumber)(m.minvalue),p=(0,e.pluck)(m.label,m.displayvalue,m.rangeLabel),(o&&s>=c||v&&p)&&A.push({code:o,alpha:t||"100",oriAlpha:t,maxvalue:s,minvalue:c,label:(0,e.parseUnsafeString)(p),labelId:p.toLowerCase(),bordercolor:i,borderAlpha:u,name:m.name});g.sortedColorArr=g.colorArr.slice(0)}else g.noValidRange=!0,g.colorArr=[],g.sortedColorArr=[]}getColorObj(a){if(a===n)return{outOfRange:!0};let l,r=this,o=r.sortedColorArr,u=r.gradient?1:0,i=o[u];if(r.mapByCategory){for(a=(0,e.parseUnsafeString)(a).toLowerCase()||a.toString().toLowerCase();i;){if(i.labelId===a||i.maxvalue>=a&&i.minvalue<=a)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:u,legendItemId:i.legendItemId};i=o[u+=1]}return{outOfRange:!0}}if(r.gradient){if(r.scaleMin<=a&&r.scaleMax>=a){for(;i&&i.maxvalue<a;)i=o[u+=1];return l=(a-i.minvalue)/i.range,{code:t(o[u-1].codeRGB,i.codeRGB,l).hex}}return{outOfRange:!0}}for(;i;){if(a<i.minvalue)return 0==u?{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:u,name:i.name,label:i.label,outOfRange:!0}:{code:o[u-1].code,alpha:o[u-1].alpha||"100",oriAlpha:o[u-1].oriAlpha,seriesIndex:u,name:o[u-1].name,label:o[u-1].label,outOfRange:!0};if(a>i.maxvalue&&u==o.length-1)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:u,name:i.name,label:i.label,outOfRange:!0};if(i.maxvalue>=a&&i.minvalue<=a)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:u,name:i.name,label:i.label};i=o[u+=1]}return o.length?void 0:{outOfRange:!0}}getColorRangeArr(a,l){var r,o,n,t,u,i,m,d,s=this.colorArr,c=[];if(!this.defaultAsigned&&(a>l&&(r=a,a=l,l=r),a<l&&(t=this.getColorObj(a),i=this.getColorObj(l),t&&i))){for(u=a,o=t.seriesIndex,n=i.seriesIndex;o<=n;o+=1)(m=(0,e.extend2)({},s[o])).minvalue!==u&&(m.minvalue=u),c.push(m),d=m,u=m.maxvalue;d&&(d.maxvalue=l)}return c}}exports.default=u;
},{"../lib/lib":20,"./strings-lib":185,"../../core/component-interface":62}],167:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../core/component-interface"),r=o(e),t=require("../lib/lib"),a=require("../lib/lib-graphics");function o(e){return e&&e.__esModule?e:{default:e}}let l,u=",",i=(e,r,t)=>{var o,l,u=Math.round,i=e.value,n=e.code,s=(0,a.HEXtoRGB)(n),v=r.value,c=r.code,h=(0,a.HEXtoRGB)(c);return o=v-i,l=[u(s[0]+(h[0]-s[0])/o*(t-i)),u(s[1]+(h[1]-s[1])/o*(t-i)),u(s[2]+(h[2]-s[2])/o*(t-i))],(0,a.RGBtoHex)(l)};class n extends r.default{constructor(){super(),this.colorRange={},this.valueRatio={},this.data={},this.mapByPercent=void 0}getType(){return"colorComponent"}getName(){return"gradientColorRange"}configure(e){if(!e)return;let r,t,a,o=this;for(o.data=e,o.appender="",a=o.colorRange=e.colorRange.sort(function(e,r){return e.value-r.value}),o.valueRatio=l,o.values=[],r=0,t=a.length;r<t;r++)o.values.push(a[r].value)}getValueRatio(){var e,r,t=this.colorRange,a=t.length,o=this.valueRatio,l=t[a-1].value,u=t[0].value,i=0;if(o)return o;for(o=this.valueRatio=[],e=0;e<a;e++)r=(t[e].value-u)/(l-u),o.push(100*(r-i)),i=r;return o}getCumulativeValueRatio(){var e,r,t=this.colorRange,a=t.length,o=t[0].value,l=t[a-1].value,u=[];for(r=0;r<a;r++)e=t[r],u.push((e.value-o)/(l-o)*100);return u}getBoxFill(e){var r,a,o,l,i=this.colorRange,n=i.length,s=[];for(l=e?90:0,a=0;a<n;a++)r=i[a],s.push(r.code);return o={FCcolor:{alpha:"100,100,100",angle:l,color:s.join(u),ratio:this.getValueRatio().join(u)}},(0,t.toRaphaelColor)(o)}getColorByValue(e){var r,t,a,o,u=this.values,n=this.colorRange;if(e!==l&&null!==e){for(t=0,r=u.length;t<r;t++){if(e===u[t]){o=n[t].code;break}if(!t&&e<u[t]){a=!0;break}if(t===r-1&&e>u[t]){a=!0;break}if(e>u[t]&&e<u[t+1]){o=i(n[t],n[t+1],e);break}}return a?void 0:o}}}exports.default=n;
},{"../../core/component-interface":62,"../lib/lib":20,"../lib/lib-graphics":21}],137:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../core/component-interface"),t=d(e),a=require("./color-bucket"),o=d(a),n=require("./gradient-color-range"),r=d(n),l=require("../lib/lib"),i=require("../lib/lib-graphics");function d(e){return e&&e.__esModule?e:{default:e}}function g(e){return(0,i.getLightColor)(e,1)}function c(e){return(0,i.getValidColor)(e||f)||f}let u,m="rgba(192,192,192,"+(l.isIE?.002:1e-6)+")",s="%",f="#000000",h=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,l.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:m,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:m,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,a){var o,n,r,i,d,m,f,h,v,p,F,b,y=Math.max,x=Math.min,C={},I=e.getFromEnv("number-formatter"),E=e.getFromEnv("dataSource"),k=E.dataset,R=E.data;if(a=a||{},!t)return!1;for("maps"!==e.defaultDatasetType||a.min!==u&&a.max!==u?"HeatMap"===e.getName()&&(a.min===u||a.max===u)&&(a={min:1/0,max:-1/0},k.forEach(e=>{e.data&&e.data.forEach(e=>{a.min=x(a.min,(0,l.pluckNumber)(e.value,a.min)),a.max=y(a.max,(0,l.pluckNumber)(e.value,a.max))})})):(a={min:1/0,max:-1/0},R&&R.forEach(e=>{a.min=x(a.min,(0,l.pluckNumber)(e.value,a.min)),a.max=y(a.max,(0,l.pluckNumber)(e.value,a.min))})),C.mapByPercent=F=!!(0,l.pluckNumber)(t.mapbypercent,0),o=t.color||[],t.minvalue===u&&(t.minvalue=a.min===u?0:F?0:a.min),t.maxvalue===u&&(t.maxvalue=a.max===u?100:F?100:a.max),(t.maxvalue===t.minvalue||a.min===1/0||a.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),b=!1,d=0,f=o.length;d<f;d++)if(o[d].maxvalue){b=!0;break}for(b||(o=[]),r=t.code,h=C.colorRange=[],C.gradient=!!(0,l.pluckNumber)(t.gradient,1),o.length?r=c(r):(r?(i=c(r),r=c()):i=g(r=c()),o.push({code:i,maxvalue:t.maxvalue,label:u})),function(t){var a,o,n,r=e.getFromEnv("number-formatter");for(a=0,o=t.length;a<o;a++)(n=t[a].maxvalue)&&(t[a].maxvalue=r.getCleanValue(n))}(o),o=o.sort(function(e,t){return e.maxvalue-t.maxvalue}),v=p=t.minvalue&&I.getCleanValue(t.minvalue),p=(v!==u||null!==v)&&(F?v+s:I.legendValue(v)),h.push({code:(0,l.dehashify)(r),value:v,displayValue:p,label:t.startlabel}),d=0,f=o.length;d<f;d++)m=c((n=o[d]).code||n.color),v=p=n.maxvalue,!isNaN(parseInt(v,10))&&(p=(v!==u||null!==v)&&(F?v+s:I.legendValue(v)),h.push({code:(0,l.dehashify)(m),value:v,displayValue:p,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,C},getDefaultConf:function(e){return t[e]}}}();class v extends t.default{constructor(){super(),this.datasource={},this.config.legendItemIds=[]}configure(){let e,t,a,n=this,i=this.getFromEnv("chart"),d="maps"===i.defaultDatasetType,g="TreeMap"===i.getName(),c=this.getFromEnv("dataSource").chart.mapbycategory,u=i.getFromEnv("number-formatter"),m=i.config.showLegend,s=i.getChildren("colorRange")&&i.getChildren("colorRange")[0];i.addToEnv("colorManager",n),n.datasource=i.getFromEnv("dataSource"),e=n.datasource.colorrange,s&&s.remove({instant:!0}),m||(n.config.legendItemIds=[]),"gradient"===(t=d?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":g?"gradient":e.gradient&&"0"!=e.gradient&&!+c?"gradient":"icon")?(h.init({chart:i}),a=h.legacyDataParser(e),(0,l.componentFactory)(i,r.default,"colorRange",1,[a]),s=i.getChildren("colorRange")[0],i.addToEnv("colorRange",s),a||(s._dontPlot=!0),n.config.legendItemIds=[],n._configureGradientLegend(s)):"icon"===t?((0,l.componentFactory)(i,o.default,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:(0,l.pluckNumber)(c,0),defaultColor:"cccccc",numberFormatter:u}]),i.addToEnv("colorRange",i.getChildren("colorRange")[0]),m&&n._addLegendItems()):"none"===t&&(i.deleteFromEnv("colorManager"),n.config.legendItemIds=[])}_configureGradientLegend(e){let t=this,a=t.getFromEnv("chart").getFromEnv("gLegend");a&&(a.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,a){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:a,component:"gradientlegend"})},a))}_addLegendItems(){let e,t,a,o,n,r=this,d=r.config,g=r.getFromEnv("chart"),c=g.getChildren("legend")[0],u=g.getFromEnv("colorRange").colorArr,m=u.length;for(o=0;o<m;o++)n={label:(0,l.pluck)(u[o].label,u[o].displayvalue),datasetObj:u[o],index:o},t=(0,i.getLightColor)(u[o].code,40),e={FCcolor:{color:u[o].code+","+u[o].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(a=c.getItem(d.legendItemIds[o]))||(d.legendItemIds.push(c.createItem(r)),(a=c.getItem(d.legendItemIds[o])).addEventListener("click",a.itemClickFn)),a.removeLegendState("hidden"),u[o].legendItemId=a&&a.getId(),a.configure(n),a.setStateCosmetics("default",{symbol:{fill:(0,l.toRaphaelColor)(e),rawFillColor:u[o].code}});for(o=m;o<d.legendItemIds.length;o++)c.disposeItem(d.legendItemIds[o]);d.legendItemIds.splice(m)}legendInteractivity(e){let t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}getColor(e){let t=this,a=t.datasource.colorrange;return!+t.datasource.chart.mapbycategory&&+a.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}getValueRatio(){return this.getFromEnv("colorRange").getValueRatio()}getCumulativeValueRatio(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}getBoxFill(e){return this.getFromEnv("colorRange").getBoxFill(e)}getColorByValue(e){return this.getFromEnv("colorRange").getColorByValue(e)}getColorObj(e){return this.getFromEnv("colorRange").getColorObj(e)}}exports.default=v;
},{"../../core/component-interface":62,"./color-bucket":166,"./gradient-color-range":167,"../lib/lib":20,"../lib/lib-graphics":21}],120:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){n(e)};var e=require("../color-utils/colorrange"),o=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function n(e){let r=e.getChildren("colorManager");return e.getFromEnv("dataSource").colorrange?r?(e.addToEnv("colorManager",r[0]),void r[0].configure()):(r=new o.default,e.attachChild(r,"colorManager"),e.addToEnv("colorManager",r),void r.configure()):(r&&(r[0].config.legendItemIds=[]),void e.deleteFromEnv("colorManager"))}
},{"../color-utils/colorrange":137}],145:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../lib/lib"),t=require("../../lib/lib-graphics"),i=require("../../../core/component-interface"),o=n(i);function n(e){return e&&e.__esModule?e:{default:e}}let r,a,s,l,h={},d="rgba(192,192,192,"+(e.isIE?.002:1e-6)+")",g=!1,c=!0,u="%",p=",",m="#000000",f={}.hasOwnProperty,x="M",y="L",w=window.document,v=void 0!==w.documentElement.ontouchstart;function C(e,t){return function e(t,i){var o,n;for(n in t)f.call(t,n)&&(o=t[n],i[n]===r?i[n]=o:"object"==typeof o&&null!==o&&e(o,i[n]))}(e,t),t}function b(e){return(0,t.getValidColor)(e||m)||m}function S(e){return(0,t.getLightColor)(e,1)}function L(e){var t,i=e.fontSize+"";return i?(t=i.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function P(e){return!(e!==r&&null!=e&&!isNaN(e))}h.CAPTION="CAPTION",h.LEGEND_BODY="LEGEND_BODY",h.AXIS_LABEL="LEGEND_LABEL",h.LEGEND_AXIS="LEGEND_AXIS",h.RANGE="RANGE",h.AXIS_VALUE="AXIS_VALUE",a=function(){var t,i={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return i.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:(0,e.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},i.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:d,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:d,stroke:"#FFFFFF"}}},i.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(e){t=e.chart},legacyDataParser:function(i,o){var n,a,s,l,h,d,g,c,p,m,f,x,y={},w=t.getFromEnv("number-formatter");if(!i)return!1;for(y.mapByPercent=f=!!(0,e.pluckNumber)(i.mapbypercent,0),n=i.color||[],i.minvalue===r&&(i.minvalue=o.min===r?0:f?0:o.min),i.maxvalue===r&&(i.maxvalue=o.max===r?100:f?100:o.max),x=!1,h=0,g=n.length;h<g;h++)if(n[h].maxvalue){x=!0;break}for(x||(n=[]),s=i.code,c=y.colorRange=[],y.gradient=!!(0,e.pluckNumber)(i.gradient,1),n.length?s=b(s):(s?(l=b(s),s=b()):l=S(s=b()),n.push({code:l,maxvalue:i.maxvalue,label:r})),function(e){var i,o,n,r=t.getFromEnv("number-formatter");for(i=0,o=e.length;i<o;i++)(n=e[i].maxvalue)&&(e[i].maxvalue=r.getCleanValue(n))}(n),n=n.sort(function(e,t){return e.maxvalue-t.maxvalue}),p=m=i.minvalue&&w.getCleanValue(i.minvalue),m=(p!==r||null!==p)&&(f?p+u:w.legendValue(p)),c.push({code:(0,e.dehashify)(s),value:p,displayValue:m,label:i.startlabel}),h=0,g=n.length;h<g;h++)d=b((a=n[h]).code||a.color),p=m=a.maxvalue,!isNaN(parseInt(p,10))&&(m=(p!==r||null!==p)&&(f?p+u:w.legendValue(p)),c.push({code:(0,e.dehashify)(d),value:p,displayValue:m,label:a.label||a.displayvalue}));return c[c.length-1].label=i.endlabel||a.label,y},getDefaultConf:function(e){return i[e]}}}();class A extends o.default{getType(){return"gradientLegend"}getName(){return"gLegend"}constructor(){super(),l=this,this.enabled=!1,this.drawOptions={},this.components={}}setColorRange(e){let t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}configureAttributes(){var i,o,n,l,h,d,g,c,u,p,m=this,f=m.getFromEnv("chart"),x=m.getFromEnv("dataSource").chart,y=m.conf={},w=x.outcnvbasefont,v=x.outcnvbasefontsize,C=x.outcnvbasefontcolor,b=f.config.dataLabelStyle;a.init({chart:f}),m.data=m.getFromEnv("dataSource").colorrange,m._dontPlot||(m.drawOptions={smartLabel:m.getFromEnv("smartLabel"),gLegend:m},m._dontPlot=!1,m._recalculateLogicalSpace=!0,s=m.getFromEnv("toolTipController"),y.caption=(0,e.pluck)(x.legendcaption),y.legendPosition=(0,e.pluck)(x.legendposition,"bottom").toLowerCase(),y.showLegend=(0,e.pluckNumber)(x.showlegend,1),y.interactiveLegend=(0,e.pluckNumber)(x.interactivelegend,1),y.showLegendLabels=(0,e.pluckNumber)(x.showlegendlabels,1),i=x.legenditemfontcolor||C,o=x.legenditemfont||w,n=x.legenditemfontsize||v,l=(0,e.pluckNumber)(x.legenditemfontbold,0),h=x.legendcaptionfontcolor||C,d=x.legendcaptionfont||w,g=x.legendcaptionfontsize||v,c=(0,e.pluckNumber)(x.legendcaptionfontbold,1),p=(u=x.legendaxisbordercolor?(0,e.hashify)((0,e.dehashify)(x.legendaxisbordercolor)):r)?(0,e.pluckNumber)(x.legendaxisborderalpha,100)/100:r,y.axisTextItemConf={style:{fill:i?(0,t.convertColor)((0,e.pluck)(i)):b.color,fontFamily:o?(0,e.pluck)(o):b.fontFamily,fontSize:n?(0,e.pluckNumber)(n):b.fontSize.match(/\d+/)[0],fontWeight:l?"bold":b.fontWeight}},y.legendCaptionConf={style:{fill:h?(0,t.convertColor)((0,e.pluck)(h)):b.color,fontFamily:d?(0,e.pluck)(d):b.fontFamily,fontSize:g?(0,e.pluckNumber)(g):b.fontSize.match(/\d+/)[0],fontWeight:c?"bold":b.fontWeight,fontStyle:"normal"}},y.legendAxisConf={legendAxisHeight:11,style:{stroke:u,"stroke-opacity":p},line:{style:{stroke:(0,t.convertColor)((0,e.pluck)(x.legendscalelinecolor,"FFF8E9"),(0,e.pluckNumber)(x.legendscalelinealpha,100)),"stroke-width":(0,e.pluckNumber)(x.legendscalelinethickness)}}},y.sliderGroupConf={showTooltip:(0,e.pluckNumber)(x.showtooltip,1),outerCircle:{rFactor:(0,e.pluckNumber)(x.sliderdiameterfactor),style:{stroke:(0,t.convertColor)((0,e.pluck)(x.legendpointerbordercolor,"757575"),(0,e.pluckNumber)(x.legendpointerborderalpha,100))}},innerCircle:{rFactor:(0,e.pluckNumber)(x.sliderholediameterfactor),style:{stroke:(0,t.convertColor)((0,e.pluck)(x.legendpointercolor,"FFFFFF"),(0,e.pluckNumber)(x.legendpointeralpha,100))}}},y.legendCarpetConf={spreadFactor:(0,e.pluckNumber)(x.legendspreadfactor),allowDrag:!!(0,e.pluckNumber)(x.legendallowdrag,0),captionAlignment:(0,e.pluck)(x.legendcaptionalignment,"center"),style:{fill:(0,t.convertColor)((0,e.pluck)(x.legendbgcolor,"e4d9c1"),(0,e.pluckNumber)(x.legendbgalpha,100)),stroke:(0,t.convertColor)((0,e.pluck)(x.legendbordercolor,"c4b89d"),(0,e.pluckNumber)(x.legendborderalpha,100)),"stroke-width":(0,e.pluckNumber)(x.legendborderthickness,1)}})}postConfigureInit(){var e,t,i,o,n,r,s,l,d,g,c,u=this,p=u.conf;u.elem={},p.interactiveLegend?(o=C(a.getDefaultConf("sliderGroupConf"),p.sliderGroupConf),this.sGroup?((i=u.elem.sGroup=this.sGroup).configure(o),u.elem.sGroup.gLegend=u):(this.sGroup=u.elem.sGroup=i=new O(o),i.configure(o),u.elem.sGroup.gLegend=u)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(o=C(a.getDefaultConf("legendCarpetConf"),p.legendCarpetConf)).legendPosition=p.legendPosition,c=a.getDefaultConf("legendBodyConf"),"bottom"===p.legendPosition?(u.drawOptions.refSideKey="canvasWidth",u.drawOptions.refOffsetKey="canvasLeft",n=C(a.getDefaultConf("axisTextItemConf"),p.axisTextItemConf),c.legendPosition="bottom",(g=C(a.getDefaultConf("legendAxisConf"),p.legendAxisConf)).legendPosition="bottom",n.legendPosition="bottom"):(u.drawOptions.refSideKey="canvasHeight",u.drawOptions.refOffsetKey="canvasTop",n=C(a.getDefaultConf("axisTextItemConf"),p.axisTextItemConf),c.legendPosition="right",(g=C(a.getDefaultConf("legendAxisConf"),p.legendAxisConf)).legendPosition="right",n.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new _,this.components.LegendBody=new k,this.components.LegendAxis=new T,this.components.LegendValues=new N,p.showLegendLabels&&(this.components.LegendLabels=new E)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,r=this.components.LegendBody,p.showLegendLabels&&(s=this.components.LegendLabels),this.components.LegendCarpet.configure(o),this.components.LegendValues.configure(n),this.components.LegendAxis.configure(g),this.components.LegendBody.configure(u.drawOptions.colorRange,c,n),p.showLegendLabels&&s.configure(n),p.caption?(d=C(a.getDefaultConf("legendCaptionConf"),p.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(p.caption,d):(this.componentCaption=new I).configure(p.caption,d),e.addCompositions(this.componentCaption,h.CAPTION)):(e.removeCompositions(h.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),i&&t.addCompositions(i,h.RANGE),s&&r.addCompositions(s,h.AXIS_LABEL),r.addCompositions(t,h.LEGEND_AXIS),r.addCompositions(l,h.AXIS_VALUE),e.addCompositions(r,h.LEGEND_BODY),u.elem.gl=new F(e)}getValueRange(){var e,t,i=this.elem&&this.elem.sGroup,o=i.sliders,n=i.extremes;return e=o.false.currPos,t=n[1]-n[0]+o.true.currPos,[{min:i.getValueFormPixel(e),max:i.getValueFormPixel(t)}]}_dispose(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},super._dispose()}getCalculatedLogicalSpace(){return this._logicalArea}setCalculatedLogicalSpace(e){this._logicalArea=e}getLogicalSpace(e){var t,i,o,n=this,r=n.conf,a={height:0,width:0},s=n.drawOptions,l=n.getFromEnv("chartConfig");return n._recalculateLogicalSpace?n._dontPlot?a:(n._recalculateLogicalSpace=!1,n.postConfigureInit(),r.showLegend?(i=s.refSideKey,o=s.refOffsetKey,n.drawOptions.refSide=l[i],n.drawOptions.refOffset=l[o],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,n.elem.gl&&(t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.elem.gl&&n.setCalculatedLogicalSpace(t)),n.getCalculatedLogicalSpace()):a):(i=s.refSideKey,o=s.refOffsetKey,n.drawOptions.refSide=l[i],n.drawOptions.refOffset=l[o],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.setCalculatedLogicalSpace(t),n.getCalculatedLogicalSpace()||a)}resetLegend(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}allocatePosition(){var e,t,i,o,n,r,a=this.getFromEnv("chart"),s=a.config,l=this.conf||{},h=l.legendPosition,d=s.canvasLeft,g=s.canvasTop,c=s.canvasWidth,u=s.canvasHeight,p=s.marginBottom,m=s.marginRight;a.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),i=l.width=e.width,o=l.height=e.height,"bottom"===h?(n=d+(0>(t=c-i)?0:t/2),r=s.height-e.height-p-(s.actionBarHeight||0)):(r=g+(0>(t=u-o)?0:t/2),n=s.width-e.width-m),l.xPos=n,l.yPos=r)}draw(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,i=this.conf||{},o=e.hasGradientLegend;!e.config.gLegendEnabled||t&&o&&this.drawLegendComponent(i.xPos,i.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}drawLegendComponent(e,t,i){var o,n=this,r=n.conf;return n._dontPlot?void 0:r.showLegend?(n.drawOptions.animationManager=i.animationManager,n.drawOptions.parentGroup=i.parentGroup,n.drawOptions.x=e,n.drawOptions.y=t,n.drawOptions.maxOtherSide=n.drawOptions.maxOtherSide||i.maxOtherSide,o=n.elem.gl.draw(n.drawOptions).getBBox(),r.xPos=o.x,r.yPos=o.y,r.height=o.height,r.width=o.width,void(n.enabled=!0)):void(n.enabled=!1)}}class F{constructor(e){this.carpet=e}draw(e){return this.carpet.draw(e)}getLogicalSpace(e,t){return this.carpet.getLogicalSpace(e,t)}dispose(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}class _{constructor(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=r,this.group=r,this._lSpace=r,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}configure(e){this.conf=e}getName(){return"LegendCarpet"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}removeCompositions(e){delete this.compositionsByCategory[e]}getBoundingBox(e){var t,i,o=this.conf,n=o.spreadFactor,a=e.refSide,s=e.alignment,l=e.refOffset,h=e.x,d=e.y;return"bottom"===this.conf.legendPosition?(t=o.width=a*n,i=e.maxOtherSide,s&&(h===r||null===h)&&(h=(l+a)/2-t/2)):(i=o.height=a*n,t=e.maxOtherSide,s&&(d===r||null===d)&&(d=(l+a)/2-i/2)),{width:t,height:i,x:h,y:d}}getPostCalcDecisionsH(e,t){var i,o=this.conf.padding,n=0;for(i in this.moveInstructions={},t)n+=t[i].height||0;e.height=n+2*o.v}getLogicalSpace(e,t){var i,o,n,r,a,s=this._lSpace,l=["CAPTION","LEGEND_BODY"],h=this.conf.padding,d=this.compositionsByCategory,g=0,c={},u=0;if(s&&!t)return s.isImpure=!0,s;(P((s=this._lSpace=o=this.getBoundingBox(e)).x)||P(s.y)||P(s.height)||P(s.width))&&(this.autoRecalculate=!0),(n=C(o,{})).height-=2*h.v,n.width-=2*h.h,n.x+=h.h,n.y+=h.v;for(let o=0;o<l.length;o++)(i=d[l[o]])&&((a=C(n,{})).y+=g,g=n.height*i.conf.spreadFactor,a.height=g+u,r=i.getLogicalSpace(C(a,{}),e,t),u=a.height-r.height,c[l[o]]=r,g=r.height);return this.getPostCalcDecisions(o,c),this._lSpace=o,o}setupDragging(){var t=this.group,i=0,o=0,n=0,r=0;t.css({cursor:"move"}),t.drag(function(e,a){i=e,o=a,t.attr({transform:"t"+(n+i)+","+(r+o)})},function(){n+=i,r+=o},e.stubFN)}draw(e){var t,i,o,n=this.conf,r=["CAPTION","LEGEND_BODY"],a=this.compositionsByCategory,s=e.animationManager,h=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),o=this._lSpace,this.group=t=s.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:l,container:h,label:"carpetGroup"}),this.node=s.setAnimation({el:this.node||"rect",attr:o,css:n.style,component:l,container:t,label:"rect"});for(let l=0;l<r.length;l++)(i=a[r[l]])&&i.draw(n.captionAlignment,o,{animationManager:s,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return n.allowDrag&&this.setupDragging(),this.node}getPostCalcDecisions(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}getPostCalcDecisionsV(e,t){var i,o,n,r=this.conf.padding,a=Number.NEGATIVE_INFINITY,s=this.moveInstructions;for(o in this.getPostCalcDecisionsH(e,t),t)a=a<(i=t[o].width)?i:a;for(o in e.width=a+2*r.h,t)(n=a-(i=t[o].width))&&(s[o]="t"+n/2+",0")}}class I{constructor(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=r,this.bound=r,this._lSpace=r,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){let e=arguments[1];return e.x+e.width/2}}}configure(e,t){this.rawText=e,this.conf=t}getName(){return"LegendCaption"}getType(){return"caption"}getLogicalSpace(e,t,i){var o,n,a,s,l=this.conf.padding,h=this._lSpace,d=this.rawText,g=t.gLegend.getFromEnv("chartConfig");return h&&!i?(h.isImpure=!0,h):(h=this._lSpace={bound:{height:0,width:0},node:{logicArea:r,smartText:r}},o=t.smartLabel,d?((n=C(e,{})).height-=2*l.v,n.width-=2*l.h,n.x+=l.h,n.y+=l.v,o.useEllipsesOnOverflow(g.useEllipsesWhenOverflow),L(s=C(this.conf.style,{})),o.setStyle(this._metaStyle=s),a=o.getSmartText(d,n.width,n.height),n.height=a.height,n.width=a.width,e.height=a.height+2*l.v,e.width=a.width+2*l.h,h.node.smartText=a,h.node.logicArea=n,h.bound=e,e):h.bound)}draw(){var e,t,i,o,n,r,a,s,h,d,g,c=this.conf,u=c.bound||{};return 3<=arguments.length?(a=arguments[0],s=arguments[1],h=arguments[2]):2<=arguments.length&&(a=arguments[0],h=arguments[1]),e=h.parentLayer,g=h.animationManager,this.group=t=g.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:c.style,component:l,container:e}),this.getLogicalSpace(s,h),d=(n=this._lSpace).node,o=n.bound,this.bound=i=g.setAnimation({el:this.bound||"rect",attr:o,css:u.style,container:t,component:l}),r="string"==typeof a?this.LegendCaption[a.toUpperCase()].x(d.smartText,s||d.logicArea):a,this.node=g.setAnimation({el:this.node||"text",attr:{text:d.smartText.text,x:r,y:d.logicArea.y+d.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:c.style.fill},container:t,component:l}),{group:t,bound:i,node:this.node}}dispose(){this.group.remove(),this.bound.remove(),this.node.remove()}}class k{constructor(e,t,i){this.colorRange=e,this.conf=t,this.childTextConf=i,this._id="GL_BODY",this.bound=r,this.group=r,this.compositionsByCategory={},this._lSpace=r,this.SC_STACK=[h.AXIS_LABEL,h.LEGEND_AXIS,h.AXIS_VALUE],this.DARW_STACK=[h.AXIS_VALUE,h.LEGEND_AXIS,h.AXIS_LABEL]}configure(e,t,i){this.colorRange=e,this.conf=t,this.childTextConf=i,this.compositionsByCategory={}}getName(){return"LegendBody"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}getSpaceTaken(e){return"bottom"===this.conf.legendPosition?e.height:e.width}getLogicalSpace(e,t,i){var o,n,a,s,l,h,d,g=this._lSpace,c=this.conf.padding,u=this.compositionsByCategory,p=0;if(g&&!i)return g.isImpure=!0,g;for(g=this._lSpace={bound:{height:0,width:0},node:{logicArea:r}},(s=C(e,{})).height-=2*c.v,s.width-=2*c.h,s.x+=c.h,s.y+=c.v,l=this.getCompositionPlotAreaFor(s),t.colorRange=this.colorRange,h=0,d=this.SC_STACK.length;h<d;h++)(o=u[this.SC_STACK[h]])&&(n=l(a,o.conf.spreadFactor),a=o.getLogicalSpace(C(n,{}),t,i),p+=this.getSpaceTaken(a));return this.updateEffectivePlotArea(e,s,p),g.node.logicArea=s,g.bound=e,e}draw(){var e,t,i,o,n,r,a,s,h,d,g=this.childTextConf,c=this.conf.bound.style||{},u=this.compositionsByCategory;for(3<=arguments.length?(r=arguments[1],s=arguments[2]):2<=arguments.length&&(s=arguments[1]),t=s.parentLayer,e=s.animationManager,this.getLogicalSpace(r,s),a=this._lSpace,this.group=n=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:g.style,container:t,component:l}),this.bound=i=e.setAnimation({el:this.bound||"rect",attr:a.bound,css:c,container:n,component:l}),s.colorRange=this.colorRange,s.parentLayer=n,h=0,d=this.DARW_STACK.length;h<d;h++)(o=u[this.DARW_STACK[h]])&&o.draw(s);return s.moveInstructions&&n.attr({transform:s.moveInstructions}),{bound:i,group:n}}getCompositionPlotAreaFor(e){var t,i="bottom"===this.conf.legendPosition;return t=C(e,{}),function(o,n){return o=o||{},i?(t.y+=o.height||0,t.height=e.height*n):(t.x+=o.width||0,t.width=e.width*n),t}}updateEffectivePlotArea(e,t,i){var o=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=i,e.height=i+2*o.v):(t.width=i,e.width=i+2*o.h)}}class E{constructor(e){this.conf=e,this.node=[],this._id="GL_LABELS"}configure(e){this.conf=e}getType(){return"label"}getName(){return"LegendLabel"}getEffectivePlotArea(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}getLogicalSpace(e,t,i){var o,n,a,s,l,h,d,g,c,u,p,m,f,x,y,w,v,b,S,P,A,F,_,I=Math.max,k="bottom"===this.conf.legendPosition,E=this._lSpace,T=this.conf,R=T.padding,O=[],N=t.gLegend.getFromEnv("chartConfig"),G=[];if(E&&!i)return E.isImpure=!0,E;for(o=t.colorRange,n=t.smartLabel,u=o.getCumulativeValueRatio(),a=o.colorRange,f=(E=this._lSpace={bound:{height:0,width:0},node:{logicArea:r,smartTexts:[]}}).node.smartTexts,g=C(e,{}),y=this.getEffectivePlotArea(g),_=k?y.width:y.height,n.useEllipsesOnOverflow(N.useEllipsesWhenOverflow),F=C(T.style,{}),L(this._metaStyle=F),n.setStyle(F),w=n.getSmartText("W"),s=0,l=a.length;s<l;s++)(c=a[s].label)?G.push({oriIndex:s,label:c}):f[s]=r;if(0===(l=G.length))return{height:0,width:0};for(m=p=1<l?(u[G[l-1].oriIndex]-u[G[0].oriIndex])/2*_/100:I(u[G[0].oriIndex],100-u[G[0].oriIndex])/2*_/100,k?((P=n.getSmartText(G[0].label,m,y.height)).x=u[G[0].oriIndex]*y.width/100,h=P.x+P.width):((P=n.getSmartText(G[0].label,m,y.width)).y=u[G[0].oriIndex]*y.height/100,h=P.y+P.width),O.push(P.height),f[G[0].oriIndex]=P,k?((P=n.getSmartText(G[l-1].label,m,y.height)).x=u[G[l-1].oriIndex]*y.width/100,d=P.x-P.width):((P=n.getSmartText(G[l-1].label,m,y.width)).y=u[G[l-1].oriIndex]*y.height/100,d=P.y-P.width),O.push(P.height),f[G[l-1].oriIndex]=P,S=h,s=1;s<l-1;s++)c=G[s].label,A=G[s].oriIndex,P=r,v=s+1===l-1?d:u[G[s+1].oriIndex]*_/100,b=u[G[s].oriIndex]*_/100,(p=Math.min(b-S,v-b))>2*w.width&&(k?(P=n.getSmartText(c,p,y.height)).x=u[A]*y.width/100:(P=n.getSmartText(c,p,y.width)).y=u[A]*y.height/100,S=p,O.push(P.height)),f[G[s].oriIndex]=P;return x=I.apply(Math,O),k?(y.height=x,e.height=x+2*R.v):(y.width=x,e.width=x+2*R.v),E.node.logicArea=y,E.bound=e,e}draw(){var e,t,i,o,n,r,a,s,h,d,g,c,u="bottom"===this.conf.legendPosition,p=this.conf,m=p.bound&&p.bound.style||{stroke:"none"},f={};2<=arguments.length&&arguments[1]?(o=arguments[0],a=arguments[1]):1<=arguments.length&&(a=arguments[0]),c=a.animationManager,e=a.parentLayer,this.getLogicalSpace(o,a),h=(r=this._lSpace).node.logicArea,d=r.node.smartTexts,this.group=i=c.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:l}),this.bound=t=c.setAnimation({el:this.bound||"rect",attr:r.bound,css:m,container:i,component:l});for(let e=0;e<this.node.length;e++)this.node[e].remove();for(this.node=[],s=0,g=d.length;s<g;s++)(n=d[s])&&(u?(f.y=h.y+n.height/2,f.x=s===g-1?h.x+n.x-n.width/2:s?h.x+n.x:h.x+n.x+n.width/2):(f.x=h.x+n.height/2,f.y=s===g-1?h.y+n.y-n.width/2:s?h.y+n.y:h.y+n.y+n.width/2),this.node.push(c.setAnimation({el:"text",attr:{text:n.text,x:f.x,y:f.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill,transform:u?"R0":"R270,"+f.x+","+f.y},container:i,component:l})));return{group:i,bound:t,node:this.node}}}class T{constructor(e){this.conf=e,this._id="FL_AXIS",this.node=r,this.group=r,this.shadow=r,this.markerLine=r,this.compositionsByCategory={}}configure(e){this.conf=e}getName(){return"LegendAxis"}getType(){return"axis"}addCompositions(e,t){this.compositionsByCategory[t]=e}getLogicalSpace(){var e,t,i,o,n,a,s="bottom"===this.conf.legendPosition,l=arguments[0],d=arguments[2],g=this._lSpace,c=this.conf,u=c.padding,p=c.legendAxisHeight,m=this.compositionsByCategory,f=0;return g&&!d?(g.isImpure=!0,g):(g=this._lSpace={bound:{height:0,width:0},node:{logicArea:r}},(n=C(l,{})).height-=2*u.v,n.width-=2*u.h,n.x+=u.h,n.y+=u.v,e=p/2+c.line.offset,t=p/2,(o=m[h.RANGE])&&(a=o.sliders.false.conf.outerCircle.rFactor*p,t+=f=Math.max(a/2-p/2,0)),s?(n.y+=f,n.height=i=t+e+f,l.height=i+2*u.v):(n.x+=f,n.width=i=t+e+f,l.width=i+2*u.v),g.node.logicArea=n,g.bound=l,l)}getDrawableAxisArea(e){var t=this.conf,i="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:i?e.width:t.legendAxisHeight,height:i?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}preDrawingRangeParamV(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}preDrawingRangeParamH(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}preDrawingRangeParam(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}getScaleMarkerPathStrH(e,t){var i,o,n,r,a,s=C(e,{}),l=this.conf.line,h="",d="";for(s.x+=s.r,s.width-=2*s.r,a=s.y+s.height,i=0,o=t.length;i<o;i++)n=t[i],r=s.x+n*s.width/100,h+=x+r+p+(a-l.grooveLength)+y+r+p+(a+l.offset);return h+(d+=x+s.x+p+(a+l.offset)+y+(s.x+s.width)+p+(a+l.offset))}getColorGradientH(t){return{axis:t.getBoxFill(),shadow:(0,e.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}draw(){var e,t,i,o,n,r,a,s,d,g,c,u,p,m,f=this.conf,x=f.bound||{},y=f.line,w=x.style||{},v=this.compositionsByCategory;for(i in 2<=arguments.length?(t=arguments[0],u=arguments[1]):1<=arguments.length&&(u=arguments[0]),p=u.animationManager,e=u.parentLayer,n=(o=u.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,u),c=this._lSpace,this.group=a=p.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:l}),this.bound=p.setAnimation({el:this.bound||"rect",attr:c.bound,css:w,component:l,container:a}),g=this.getDrawableAxisArea(c.node.logicArea),d=this.getColorGradient(o),f.style.fill=d.axis,f.shadow.style.fill=d.shadow,this.node=p.setAnimation({el:this.node||"rect",attr:g,css:f.style,container:a,component:l}),this.shadow=p.setAnimation({el:this.shadow||"rect",attr:g,css:f.shadow.style,container:a,component:l}),m=this.getScaleMarkerPathStr(g,n),this.path=p.setAnimation({el:this.path||"path",attr:{path:m},css:y.style,container:a,component:l}),v)r=v[i],i===h.RANGE&&(u[(s=this.preDrawingRangeParam(g)).prop]=s[s.prop],u.key=s.prop,u.rCalcBase=s.calculationBase,u.parentLayer=a,r.draw(s.rangeStart,s.rangeEnd,u))}getScaleMarkerPathStr(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}getColorGradient(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}getScaleMarkerPathStrV(e,t){var i,o,n,r,a,s=C(e,{}),l=this.conf.line,h="",d="";for(s.y+=s.r,s.height-=2*s.r,r=s.x+s.width,i=0,n=t.length;i<n;i++)o=t[i],a=s.y+o*s.height/100,h+=x+(r-l.grooveLength)+p+a+y+(r+l.offset)+p+a;return h+(d+=x+(r+l.offset)+p+s.y+y+(r+l.offset)+p+(s.y+s.height))}getColorGradientV(t){return{axis:t.getBoxFill(!0),shadow:(0,e.toRaphaelColor)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}}class R{constructor(e,t,i){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=i,this.node=r,this.tracker=r,this.currPos=0,this.swing=[]}configure(e,t,i){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=i,this.currPos=0,this.swing=[]}getType(){return"slider"}getName(){return"Slider"}updateSwingRange(e,t){this.swing[+e]=t}draw(e,t,i,o){var n,r,a,h,g,c,u=Math.ceil,p=o.parentLayer,m=this,f=o.animationManager,x=this.conf,y=x.outerCircle,w=x.innerCircle,v=u(y.rFactor*o.rCalcBase/2),C=u(w.rFactor*o.rCalcBase/2),b=v-C,S=this.sliderIndex;return x.outerRadius=v,x.innerRadius=C,this._scaleVal=t,w.style["stroke-width"]=b,C+=a=u(y.style["stroke-width"]/2),n=this.node=f.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:p,component:l}),"x"===o.key?(h=i,g=e,g+=S?-C:+C):(h=e,g=i,h+=S?-C:+C),this.oCircle=f.setAnimation({el:this.oCircle||"circle",attr:{cx:h,cy:g,r:v},css:y.style,container:n,component:l}),this.iCircle=f.setAnimation({el:this.iCircle||"circle",attr:{cx:h,cy:g,r:C},css:w.style,container:n,component:l}),c=this.tracker=f.setAnimation({el:this.tracker||"circle",attr:{cx:h,cy:g,r:v+5,fill:d,stroke:d,cursor:"pointer"},container:n,component:l}),n.attr({transform:"x"===o.key?"t0,"+m.currPos:"t"+m.currPos+",0"}),s.enableToolTip(c,t),this._dragAPI=r=this.getDragAPI("x"===o.key),m.dragHandlerAttached||(c.drag(r.dragging,r.dragStart,r.dragEnd),m.dragHandlerAttached=!0),{translateAscending:v+a}}getDragAPI(e){var t,i,o,n,r=this,a=r.node,l=r.sliderIndex,h=r.rangeGroup,d=r.conf.innerRadius;return{dragging:function(g){var c,u,p,m,f;return g.stopPropagation(),g.preventDefault(),p=e?g.data[1]:g.data[0],l?(c=t[0]-t[1]+d,u=0):(c=0,u=t[1]-t[0]-d),(f=r.currPos+p)<c?p+=c-f:f>u&&(p-=f-u),a.attr({transform:e?"t0,"+(r.currPos+p):"t"+(r.currPos+p)+",0"}),i=p,o&&clearTimeout(o),o=setTimeout(function(){h.updateWhenInRest(r,r.currPos+p)},100),m=h.updateWhenInMove(r,r.currPos+p),r.tracker.data("__FC_tooltipText",m),v&&s.config.lastActiveToolip.show(m),n=!0,!0},dragStart:function(e){e.stopPropagation(),e.preventDefault(),t=r.swing,n=!1,h.dragStarted(r)},dragEnd:function(){var e;h.dragCompleted(r,n,r.currPos+i),n&&(o&&clearTimeout(o),o=setTimeout(function(){h.updateWhenInRest(r,r.currPos)},100),r.currPos+=i,e=t[+l]+r.currPos,h.updateRange(r,e))}}}dispose(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}class O{constructor(e){var t={};this._id="GL_SG1",this.conf=e,t.conf=e,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,t.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[g]=new R(g,t,this._id+"_0"),this.sliders[c]=new R(c,t,this._id+"_1")}configure(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[g].configure(g,t,this._id+"_0"),this.sliders[c].configure(c,t,this._id+"_1")}getType(){return"slider"}getName(){return"SliderGroup"}initRange(e,t){var i=e.sliderIndex;this.extremes[+i]=t}updateRange(e,t){var i=e.sliderIndex;this.sliders[!i].updateSwingRange(i,t)}reset(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[g].configure(g,e,this._id+"_0"),this.sliders[c].configure(c,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}draw(e,t,i){var o,n,r,a,s,l=Math.ceil,h=this.sliders,d=h[!1],g=h[!0],c=i.colorRange,p=c.colorRange,m=c.data.mapByPercent,f=i.gLegend.getFromEnv("number-formatter");return this._fcChart=i.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,i,o){this.getValueFormPixel=function(n){return e+(t-e)/(o-i)*n}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(i,o){var n,r,a=this.extremes;return n=i.sliderIndex?a[1]-a[0]+o:o,r=this.getValueFormPixel(n),r=t?parseFloat(r).toFixed(2)+u:e.legendValue(r)}},this._drawParams=[e,t,i],this.updateWhenInMove(f,m),n=d.conf.outerCircle,r=l(d.conf.innerCircle.rFactor*i.rCalcBase/2),r+=l(n.style["stroke-width"]/2),this.extremes[0]=e+r,this.extremes[1]=t-r,a=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:p[0].value,this.max=this.max?this.max:p[p.length-1].value,s=p[p.length-1].value-p[0].value,d.currPos=a*(this.min-p[0].value)/s,g.currPos=a*(this.max-p[0].value)/s-a,d.draw(e,m?f.legendPercentValue(this.min):f.legendValue(this.min),i[i.key],i),o=g.draw(t,m?f.legendPercentValue(this.max):f.legendValue(this.max),i[i.key],i),d.swing=this.extremes.slice(0),g.swing=this.extremes.slice(0),d.swing[1]+=g.currPos,g.swing[0]+=d.currPos,this.getValueFormPixel(p[0].value,p[p.length-1].value,this.extremes[0],this.extremes[1]),o}updateWhenInRest(e,t){var i,o,n=this.sliders,r=this.extremes,a=e.sliderIndex;a?(i=n[!a].currPos,o=r[1]-r[0]+t):(i=t,o=r[1]-r[0]+n[!a].currPos),this.min=+this.getValueFormPixel(i).toFixed(2),this.max=+this.getValueFormPixel(o).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}dragStarted(e){var t=this.sliders,i=this.extremes,o=e.conf,n=this._fcChart;n.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(i[1]-i[0]+t.true.currPos)}],legendPointerHeight:o.outerRadius,legendPointerWidth:o.innerRadius,outerRadius:o.outerRadius,innerRadius:o.innerRadius},[n.id])}dragCompleted(e,t,i){var o,n,r=this.sliders,a=this.extremes,s=e.conf,l=this.getValueFormPixel(r.false.currPos),h=this.getValueFormPixel(a[1]-a[0]+r.true.currPos),d=this._fcChart;e.sliderIndex?(o=l,n=this.getValueFormPixel(a[1]-a[0]+i)):(o=this.getValueFormPixel(i),n=h),t&&d.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:l,previousMaxValue:h,minValue:o,maxValue:n},[d.id]),d.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:o},{value:n}],legendPointerHeight:s.outerRadius,legendPointerWidth:s.innerRadius,outerRadius:s.outerRadius,innerRadius:s.innerRadius},[d.id])}dispose(){this.sliders[g].dispose(),this.sliders[c].dispose()}}class N extends E{constructor(){super(arguments[0]),this._id="GL_VALUES",this.node=[]}configure(e){this.conf=e}getName(){return"LegendValues"}getType(){return"legend"}getLogicalSpace(e,t,i){var o,n,a,s,l,h,d,g,c,u,p,m,f,x,y,w,v,b,S,P,A,F,_,I,k,E=Math.min,T=Math.max,R="bottom"===this.conf.legendPosition,O=this._lSpace,N=this.conf,G=N.padding,V=t.gLegend.getFromEnv("chartConfig"),D=[],B=[];if(O&&!i)return O.isImpure=!0,O;for(o=t.colorRange,n=t.smartLabel,a=o.colorRange,d=o.getCumulativeValueRatio(),k=(O=this._lSpace={bound:{height:0,width:0},node:{logicArea:r,smartTexts:[]}}).node.smartTexts,(P=C(e,{})).height-=2*G.v,P.width-=2*G.h,P.x+=G.h,P.y+=G.v,n.useEllipsesOnOverflow(V.useEllipsesWhenOverflow),I=C(N.style,{}),L(this._metaStyle=I),n.setStyle(I),_=n.getSmartText("W"),h=a.length,R?(p=g=(d[h-1]-d[0])/2*P.width/100,F=a[0].displayValue,(s=n.getSmartText("string"!=typeof F&&F!==r&&F.toString()||F,p,P.height)).x=d[0]*P.width/100,m=s.x+s.width,D.push(s.height)):(p=g=(d[h-1]-d[0])/2*P.height/100,(s=n.getSmartText(a[0].displayValue,P.width,p)).y=d[0]*P.height/100,y=s.y+s.width,B.push(s.width)),k[0]=s,R?((s=n.getSmartText(a[h-1].displayValue,p,P.height)).x=d[h-1]*P.width/100,x=s.x-s.width,D.push(s.height),f=m):((s=n.getSmartText(a[h-1].displayValue,P.width,p)).y=d[h-1]*P.height/100,v=s.y-s.height,B.push(s.width),w=y),k[h-1]=s,l=1;l<h-1;l++)s=r,A=a[l].displayValue,R?(c=l+1===h-1?x:d[l+1]*P.width/100,(g=E((u=d[l]*P.width/100)-f,c-u))>1.5*_.width&&((s=n.getSmartText(A,2*g,P.height)).x=d[l]*P.width/100,f=g,D.push(s.height))):(c=l+1===h-1?v:d[l+1]*P.height/100,(g=E((u=d[l]*P.height/100)-w,c-u))>2*_.height&&((s=n.getSmartText(A,P.width,2*g)).y=d[l]*P.height/100,w=g,B.push(s.width))),k[l]=s;return R?(b=T.apply(Math,D),P.height=b,e.height=b+2*G.v):(S=T.apply(Math,B),P.width=S,e.width=S+2*G.h),O.node.logicArea=P,O.bound=e,e}draw(){var e,t,i,o,n,r,a,s,h,d,g,c,u,p=this.conf,m="bottom"===p.legendPosition,f=p.bound&&p.bound.style||{stroke:"none"},x={};2<=arguments.length&&arguments[1]?(o=arguments[0],a=arguments[1]):1<=arguments.length&&(a=arguments[0]),u=a.animationManager,e=a.parentLayer,s=a.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(o,a),r=(n=this._lSpace).node.logicArea,g=n.node.smartTexts,this.group=i=u.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:l}),this.bound=t=u.setAnimation({el:this.bound||"rect",attr:n.bound,css:f,container:i,component:l});for(let e=0;e<this.node.length;e++)this.node[e].remove();for(this.node=[],h=0,d=s.length;h<d;h++)(c=g[h])&&(m?(x.y=r.y+c.height/2,x.x=h===d-1?r.x+c.x-c.width/2:h?r.x+c.x:r.x+c.x+c.width/2):(x.x=r.x+c.width/2,x.y=h===d-1?r.y+c.y-c.height/2:h?r.y+c.y:r.y+c.y+c.height/2),this.node.push(u.setAnimation({el:"text",attr:{text:c.text,x:x.x,y:x.y,lineHeight:this._metaStyle.lineHeight,fill:p.style.fill},container:i,component:l})));return{group:i,bound:t}}}exports.default=A;
},{"../../lib/lib":20,"../../lib/lib-graphics":21,"../../../core/component-interface":62}],121:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){o(e)};var e=require("../lib/lib"),n=require("../legend/gradient/gradient-legend"),r=g(n),d=require("../legend/discrete/legend"),t=g(d);function g(e){return e&&e.__esModule?e:{default:e}}function o(n){let d,g=n.getFromEnv("dataSource").colorrange,o=n.getFromEnv("dataSource").chart.mapbycategory,a="maps"===n.defaultDatasetType,i="TreeMap"===n.getName(),l=n.getFromEnv("legend"),c=n.getFromEnv("gLegend");"gradient"===(d=g&&n.config.showLegend?a?g.gradient&&+g.gradient?"gradient":g.color?"icon":"none":i?g.gradient&&"0"!=g.gradient?"gradient":"none":g.gradient&&"0"!=g.gradient&&!+o?"gradient":"icon":"none")?(n.deleteFromEnv("legend"),l&&l.remove(),(0,e.componentFactory)(n,r.default,"gLegend",1),(c=n.getChildren("gLegend")[0]).configure(),n.addToEnv("gLegend",c)):"icon"===d?(n.deleteFromEnv("gLegend"),c&&c.remove(),(0,e.componentFactory)(n,t.default,"legend",1,{showLegend:!0}),(l=n.getChildren("legend")[0]).configure(),n.addToEnv("legend",l)):"none"===d&&(n.deleteFromEnv("gLegend"),n.deleteFromEnv("legend"),c&&c.remove(),l&&l.remove())}
},{"../lib/lib":20,"../legend/gradient/gradient-legend":145,"../legend/discrete/legend":146}],100:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./mscartesian"),r=w(e),a=require("../core/component-interface"),o=w(a),t=require("../_internal/color-utils/chart-palette-colors"),l=N(t),n=require("../_internal/dom/dom-event"),i=w(n),c=require("../_internal/misc/event-api"),s=require("../_internal/lib/lib"),h=require("../_internal/lib/lib-graphics"),u=require("../_internal/vendors/fc-ext-annotation/src/ext-annotation.js"),p=w(u),d=require("../_internal/vendors/redraphael/source/raphael.lib"),g=w(d),k=require("../_internal/factories/maps-dataset"),b=w(k),m=require("../_internal/factories/canvas"),f=w(m),v=require("../_internal/factories/colorrange"),F=w(v),y=require("../_internal/factories/legendmanager"),C=w(y);function N(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}function w(e){return e&&e.__esModule?e:{default:e}}let A,M=(0,g.default)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},l),E="0,100",x={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},D={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){let e,r,a,o,t,l,n,i=this.jsVars.instanceAPI.getDatasets()||[],c=i.length,s=[];for(e=0;e<c;e++)if("entities"===(n=(a=i[e]||[]).getName())){r=a;break}for(e in c=(o=r.components.data).length,o)o.hasOwnProperty(e)&&(l=(t=o[e]||{}).config||{},s.push({id:l.id,originalId:l.originalId||l.id,label:l.label,shortlabel:l.shortLabel,value:l.value,formattedValue:l.formattedValue,toolText:l.toolText}));return s},getMapAttribute:function(){return(0,c.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){let e=this;return(0,c.raiseWarning)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){let r,a,o,t,l=this.jsVars.instanceAPI.getDatasets()||[],n=l.length;for(r=0;r<n;r++)if("markers"===(t=(a=l[r]||[]).getName())){o=a;break}o&&!o.addMarkerItem(e)&&(0,c.raiseWarning)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,r){let a,o,t,l,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(a=0;a<i;a++)if("markers"===(l=(o=n[a]||[]).getName())){t=o;break}t&&e&&(e=(e+P).toLowerCase(),t.updateMarkerItem(e,r))},removeMarker:function(e){let r,a,o,t,l=this.jsVars.instanceAPI.getDatasets()||[],n=l.length;for(r=0;r<n;r++)if("markers"===(t=(a=l[r]||[]).getName())){o=a;break}e&&(e=(e+P).toLowerCase(),o._removeMarkerItem(e))}},S="none",B=", ",P="",_="bottom",T="circle",L=window.Math,R=L.min,I=L.max,j=function(e,r){let a=(0,s.getMouseCoordinate)(r.getFromEnv("chart-container"),e),o=a.chartX,t=a.chartY,l=r.config,n=l.canvasLeft,i=l.canvasTop,c=l.canvasLeft+l.canvasWidth,h=l.canvasHeight+l.canvasTop;return a.insideCanvas=!1,a.originalEvent=e,o>n&&o<c&&t>i&&t<h&&(a.insideCanvas=!0),a};class H extends o.default{constructor(e,r){for(this.key in super(),this.subpalette="",this.key="",this.index=r,e)this.subpalette=M[e[this.key]],this[this.key]=this.subpalette instanceof Array?this.subpalette[r]:this.subpalette}}class O extends r.default{constructor(){super(),this.friendlyName="Map",this.revision=1,this.hasCanvas=!0,this.standaloneInit=!1,this.defaultDatasetType="maps",this.defaultSeriesType="geo",this.fireGroupEvent=!0,this.legendposition="right",this.hasGradientLegend=!0,this.isMap=!0,this.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[E,E,E,E,E],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},this.colorPaletteMap=x,this.eiMethods=D,this.registerFactory("legend",C.default,["canvas"]),this.registerFactory("axis",()=>{},["canvas"]),this.registerFactory("colormanager-decider",F.default,["legend"]),this.registerFactory("dataset",b.default,["colormanager-decider"]),this.registerFactory("canvas",f.default)}_checkInvalidSpecificData(){return this.config.invalid=!1,!1}__setDefaultConfig(){var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}static getName(){return"maps"}static getType(){return"chartAPI"}getName(){return this.config.name||"GEO"}getType(){return"chartAPI"}configureAttributes(e){let r,a=this,o=a.getChildren("colorPalette")&&a.getChildren("colorPalette")[0];r=e.chart=e.chart||e.graph||e.map||{},a.jsonData=e,(0,s.componentFactory)(a,p.default,"mapAnnotations"),o||(o=new H(this.colorPaletteMap,(0<r.palette&&6>r.palette?r.palette:(0,s.pluckNumber)(a.paletteIndex,1))-1),a.attachChild(o,"colorPalette")),a.config.skipCanvasDrawing=!0,super.configureAttributes(e),a._parseBackgroundCosmetics()}parseChartAttr(e){let r,a,o,t,l,n=this,i=n.jsonData,c=i.chart||i.map,h=i.markers,u=new H(this.colorPaletteMap,(0<c.palette&&6>c.palette?c.palette:(0,s.pluckNumber)(n.paletteIndex,1))-1),p=(0,s.pluck)(c.entitybordercolor,c.bordercolor,u.plotbordercolor),d=(0,s.pluck)(c.entityfillcolor,c.fillcolor,u.plotfillcolor),g=(0,s.pluck)(c.entityfillalpha,c.fillalpha,u.plotfillalpha),k=(0,s.pluck)(c.entityfillratio,c.fillratio,u.plotfillratio),b=(0,s.pluck)(c.entityfillangle,c.fillangle,u.plotfillangle),m=(0,s.pluck)(c.nullentityfillcolor,c.nullentitycolor,d),f=(0,s.pluckNumber)(c.usevaluesformarkers,i.markers&&i.markers.items&&i.markers.items.length,!(i.markers&&i.markers.application&&i.markers.application.length&&i.markers.definition&&i.markers.definition.length));super.parseChartAttr(e),(r=n.config).origMarginTop=(0,s.pluckNumber)(c.charttopmargin,c.maptopmargin,11),r.origMarginLeft=(0,s.pluckNumber)(c.chartleftmargin,c.mapleftmargin,11),r.origMarginBottom=(0,s.pluckNumber)(c.chartbottommargin,c.mapbottommargin,11),r.origMarginRight=(0,s.pluckNumber)(c.chartrightmargin,c.maprightmargin,11),r.labelsOnTop=(0,s.pluckNumber)(c.entitylabelsontop,1),a=(l=r.style).inCancolor,o=l.inCanfontFamily,t=l.inCanfontSize,r.entityOpts={baseScaleFactor:r.baseScaleFactor,dataLabels:{style:{fontFamily:o,fontSize:t,lineHeight:l.inCanLineHeight,color:l.inCancolor}},fillColor:d,fillAlpha:g,fillRatio:k,fillAngle:b,borderColor:p,borderAlpha:(0,s.pluck)(c.entityborderalpha,c.borderalpha,n.borderAlpha,"100"),borderThickness:(0,s.pluckNumber)(c.showentityborder,c.showborder,1)?(0,s.pluckNumber)(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:(0,s.pluckNumber)(c.scaleentityborder,c.scaleborder,0),hoverFillColor:(0,s.pluck)(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,u.plothoverfillcolor),hoverFillAlpha:(0,s.pluck)(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,u.plothoverfillalpha),hoverFillRatio:(0,s.pluck)(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,u.plothoverfillratio),hoverFillAngle:(0,s.pluck)(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,u.plothoverfillangle),hoverBorderThickness:(0,s.pluck)(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:(0,s.pluck)(c.entityborderhovercolor,p,u.plotbordercolor),hoverBorderAlpha:(0,s.pluck)(c.entityborderhoveralpha,u.plotborderalpha),nullEntityColor:m,nullEntityAlpha:(0,s.pluck)(c.nullentityfillalpha,c.nullentityalpha,g),nullEntityRatio:(0,s.pluck)(c.nullentityfillratio,c.nullentityratio,k),nullEntityAngle:(0,s.pluck)(c.nullentityfillangle,c.nullentityangle,b),connectorColor:(0,s.pluck)(c.labelconnectorcolor,c.connectorcolor,a),connectorAlpha:(0,s.pluck)(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:(0,s.pluckNumber)(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:(0,s.pluckNumber)(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:(0,s.pluckNumber)(c.hoveronnull,c.entityhoveronnull,1),labelPadding:(0,s.pluckNumber)(c.labelpadding,5),showLabels:(0,s.pluckNumber)(c.showlabels,1),labelsOnTop:(0,s.pluckNumber)(c.entitylabelsontop,1),includeNameInLabels:(0,s.pluckNumber)(c.includenameinlabels,1),includeValueInLabels:(0,s.pluckNumber)(c.includevalueinlabels,0),useSNameInTooltip:(0,s.pluckNumber)(c.usesnameintooltip,0),useShortName:(0,s.pluckNumber)(c.usesnameinlabels,1),labelSepChar:(0,s.pluck)(c.labelsepchar,B),showTooltip:(0,s.pluckNumber)(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:(0,s.pluck)(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:(0,s.pluckNumber)(c.hidenullentities,0),showHiddenEntityBorder:(0,s.pluckNumber)(c.showhiddenentityborder,1),showNullEntityBorder:(0,s.pluckNumber)(c.shownullentityborder,1),hiddenEntityColor:(0,s.pluck)(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?m:"ffffff"),hiddenEntityAlpha:(0,s.pluck)(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:(0,s.pluckNumber)(c.showshadow,n.defaultPlotShadow,u.shadow)},r.markerOpts={dataLabels:{style:{fontFamily:(0,s.pluck)(c.markerfont,o),fontSize:(0,s.pluckNumber)(c.markerfontsize,parseInt(t,10)),fontColor:(0,s.pluck)(c.markerfontcolor,a)}},showTooltip:(0,s.pluckNumber)(c.showmarkertooltip,c.showtooltip,1),showLabels:(0,s.pluckNumber)(c.showmarkerlabels,c.showlabels,1),showHoverEffect:(0,s.pluckNumber)(c.showmarkerhovereffect,1),labelPadding:(0,s.pluck)(c.markerlabelpadding,"5"),labelWrapWidth:(0,s.pluckNumber)(c.markerlabelwrapwidth,0),labelWrapHeight:(0,s.pluckNumber)(c.markerlabelwrapheight,0),fillColor:(0,s.pluck)(c.markerfillcolor,c.markerbgcolor,u.markerfillcolor),fillAlpha:(0,s.pluck)(c.markerfillalpha,u.markerfillalpha),fillAngle:(0,s.pluck)(c.markerfillangle,u.markerfillangle),fillRatio:(0,s.pluck)(c.markerfillratio,u.markerfillratio),fillPattern:(0,s.pluck)(c.markerfillpattern,u.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:(0,s.pluck)(c.markerborderthickness,1),borderColor:(0,s.pluck)(c.markerbordercolor,u.markerbordercolor),borderAlpha:(0,s.pluckNumber)(c.markerborderalpha,u.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:(0,s.pluckNumber)(c.markerradius&&(0,s.trimString)(c.markerradius),7),shapeId:(0,s.pluck)(c.defaultmarkershape,T),labelSepChar:(0,s.pluck)(c.labelsepchar,B),tooltipSepChar:(0,s.pluck)(c.tooltipsepchar,", "),autoScale:(0,s.pluckNumber)(c.autoscalemarkers,0),tooltext:(0,s.pluck)(h&&h.tooltext,c.markertooltext),dataEnabled:f,valueToRadius:(0,s.pluckNumber)(c.markerradiusfromvalue,1),valueMarkerAlpha:(0,s.pluck)(c.valuemarkeralpha,"75"),hideNull:(0,s.pluckNumber)(c.hidenullmarkers,0),nullRadius:(0,s.pluckNumber)(c.nullmarkerradius,c.markerradius,7),adjustViewPort:(0,s.pluckNumber)(c.adjustviewportformarkers,0),startAngle:(0,s.pluckNumber)(c.markerstartangle,90),maxRadius:(0,s.pluckNumber)(c.maxmarkerradius,0),minRadius:(0,s.pluckNumber)(c.minmarkerradius,0),applyAll:(0,s.pluckNumber)(c.applyallmarkers,0),shadow:(0,s.pluckNumber)(c.showmarkershadow,c.showshadow,0)},r.connectorOpts={showHoverEffect:(0,s.pluckNumber)(c.showconnectorhovereffect,1),thickness:(0,s.pluckNumber)(c.connectorthickness,c.markerconnthickness,"2"),color:(0,s.pluck)(c.connectorcolor,c.markerconncolor,u.markerbordercolor),alpha:(0,s.pluck)(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:(0,s.pluckNumber)(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:(0,s.pluck)(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,u.markerbordercolor),hoverAlpha:(0,s.pluck)(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:(0,s.pluckNumber)(c.connectordashed,c.markerconndashed,0),dashLen:(0,s.pluckNumber)(c.connectordashlen,c.markerconndashlen,3),dashGap:(0,s.pluckNumber)(c.connectordashgap,c.markerconndashgap,2),font:(0,s.pluck)(c.connectorfont,c.markerconnfont,o),fontColor:(0,s.pluck)(c.connectorfontcolor,c.markerconnfontcolor,a),fontSize:(0,s.pluckNumber)(c.connectorfontsize,c.markerconnfontsize,parseInt(t,10)),showLabels:(0,s.pluckNumber)(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:(0,s.pluck)(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,u.plotfillcolor),labelBorderColor:(0,s.pluck)(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,u.markerbordercolor),shadow:(0,s.pluckNumber)(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:(0,s.pluckNumber)(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:(0,s.pluck)(h&&h.connectortooltext,c.connectortooltext),hideOpen:(0,s.pluckNumber)(c.hideopenconnectors,1)},r.adjustViewPortForMarkers=(0,s.pluckNumber)(c.adjustviewportformarkers,f)}_attachMouseEvents(){let e=this,r=e.getFromEnv("eventListeners"),a=e.getFromEnv("chart-container");r||(r=[],e.addToEnv("eventListeners",r)),i.default.unlisten(a,s.hasTouch?"touchstart":"mousemove",O.searchMouseMove),r.push(i.default.listen(a,"touchstart mousemove",O.searchMouseMove,e))}static searchMouseMove(e){let r,a=e.data,o=a.config,t={};!a.getFromEnv("chart-container")||(r=j(e,a))&&r.insideCanvas&&(o.lastMouseEvent=e,t={x:r.chartX,y:r.chartY},a._searchNearestNeighbour(t))}_searchNearestNeighbour(e){let r,a=this,o=a.getDatasets()[1];if(o){if(!o.components.kDTree)return;(r=o.getElement(e))?a.config.lastHoveredPoint!==r&&o.highlightPoint(r):o.highlightPoint(!1)}}_createLayers(){super._createLayers(),this._attachMouseEvents()}_parseBackgroundCosmetics(){let e,r=this,a=r.getChildren("background")[0].config,o=r.getChildren("colorPalette")[0],t=r.getFromEnv("chart-attrib");e=a.showBorder=(0,s.pluckNumber)(t.showcanvasborder,1),a.borderWidth=e?(0,s.pluckNumber)(t.canvasborderthickness,1):0,a.borderRadius=a.borderRadius=(0,s.pluckNumber)(t.canvasborderradius,0),a.borderDashStyle=a.borderDashStyle=(0,s.pluckNumber)(t.borderdashed,0)?(0,s.getDashStyle)((0,s.pluckNumber)(t.borderdashlen,4),(0,s.pluckNumber)(t.borderdashgap,2)):S,a.borderAlpha=(0,s.pluck)(t.canvasborderalpha,o.borderAlpha),a.borderColor=a.borderColor=(0,h.convertColor)((0,s.pluck)(t.canvasbordercolor,o&&o.borderColor),a.borderAlpha)}_getBackgroundCosmetics(){let e=this,r=e.getFromEnv("chart-attrib")||e.jsonData.map,a=e.getChildren("colorPalette")[0];return{FCcolor:{color:(0,s.pluck)(r.bgcolor,r.canvasbgcolor,a.bgcolor),alpha:(0,s.pluck)(r.bgalpha,r.canvasbgalpha,a.bgalpha),angle:(0,s.pluck)(r.bgangle,r.canvasbgangle,a.bgangle),ratio:(0,s.pluck)(r.bgratio,r.canvasbgratio,a.bgratio)}}}_parseCanvasCosmetics(){super._parseCanvasCosmetics();let e=this,r=e.config,a=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("canvas")[0].config;r.origMarginTop=(0,s.pluckNumber)(a.maptopmargin,11),r.origMarginLeft=(0,s.pluckNumber)(a.mapleftmargin,11),r.origMarginBottom=(0,s.pluckNumber)(a.mapbottommargin,11),r.origMarginRight=(0,s.pluckNumber)(a.maprightmargin,11),r.origCanvasLeftMargin=(0,s.pluckNumber)(a.canvasleftmargin,0),r.origCanvasRightMargin=(0,s.pluckNumber)(a.canvasrightmargin,0),r.origCanvasTopMargin=(0,s.pluckNumber)(a.canvastopmargin,0),r.origCanvasBottomMargin=(0,s.pluckNumber)(a.canvasbottommargin,0),o.canvasBorderRadius=(0,s.pluckNumber)(a.canvasborderradius,0),o.origCanvasTopPad=(0,s.pluckNumber)(a.canvastoppadding,0),o.origCanvasBottomPad=(0,s.pluckNumber)(a.canvasbottompadding,0),o.origCanvasLeftPad=(0,s.pluckNumber)(a.canvasleftpadding,0),o.origCanvasRightPad=(0,s.pluckNumber)(a.canvasrightpadding,0)}preliminaryScaling(){let e,r,a,o=this.jsonData,t=o.markers&&o.markers.items||[],l=t&&t.length||0,n=1/0,i=1/0,c=-1/0,s=-1/0;for(;l--;)e=+(a=t[l]).x,r=+a.y,n=R(n,e),i=R(i,r),c=I(c,e),s=I(s,r);return{x:n,y:i,x1:c,y1:s}}getScalingParameters(e,r,a,o){let t,l,n=e/r,i=a/(e*this.config.baseScaleFactor),c=o/(r*this.config.baseScaleFactor),s=0,h=0;return i>c?(s+=(a-o*n)/2,l=200/(r*(t=c))):(h+=(o-a/n)/2,l=200/(e*(t=i))),{scaleFactor:t,strokeWidth:l,translateX:s,translateY:h}}calculateMarkerBounds(e,r,a){let o,t,l,n,i,c,s,h,u,p,d,g,k,b,m=this,f=m.config,v=f.markerOpts,F=m.getDatasets(),y=m.getDataLimits(),C=y.dataMin,N=y.dataMax,w=v.hideNull,M=v.nullRadius,E=v.valueToRadius,x=1/0,D=1/0,S=-1/0,B=-1/0;for(c=0,u=F.length;c<u;c++)"markers"===(s=(h=F[c]).getName())&&(o=h);if(o)for(c in o.calculateMarkerRadiusLimits(),l=(t=o.config||{}).minRadius,n=t.maxRadius,i=o.components&&o.components.markerObjs||{})k=(f=(b=i[c]).config).definition||{},null!==f.cleanValue?(E&&k.radius===A&&(f.radius=l+(n-l)*(f.cleanValue-C)/(N-C)),g=+f.radius,p=(+k.x+r)*e,d=(+k.y+a)*e,x=R(x,p-g),D=R(D,d-g),S=I(S,p+g),B=I(B,d+g)):w?f.__hideMarker=!0:null===f.radius&&(f.radius=M);return{x:x,y:D,x1:S,y1:B}}_spaceManager(){let e,r,a,o,t,l,n,i,c,h=this,u=h.config,p=h.getChildren("legend")&&h.getChildren("legend")[0],d=p&&p.config.legendPos,g=h.getFromEnv("chart-attrib"),k=u.showBorder,b=u.origMarginLeft,m=u.origMarginTop,f=h.config.baseWidth,v=h.config.baseHeight,F={},y=0,C=0,N=u.markerOpts,w=u.borderWidth=k?(0,s.pluckNumber)(g.borderthickness,1):0;h._allocateSpace({top:w,bottom:w,left:w,right:w}),h._allocateSpace(h._manageActionBarSpace&&h._manageActionBarSpace(.225*u.availableHeight)||{}),i="right"===d?.3*u.canvasWidth:.3*u.canvasHeight,u.showLegend&&h._manageLegendSpace(i),e=d===_?.225*u.canvasHeight:.225*u.canvasWidth,c=h._manageChartMenuBar(e),a=u.canvasWidth,o=u.canvasHeight,N.dataEnabled?(u.adjustViewPortForMarkers?((F=h.preliminaryScaling()).x1>f&&(f=F.x1),0>F.x&&(f+=-F.x,y=-F.x),F.y1>v&&(v=F.y1),0>F.y&&(v+=-F.y,C=-F.y),r=h.getScalingParameters(f,v,a,o),l=o,n=a,0>(F=h.calculateMarkerBounds(r.scaleFactor*h.config.baseScaleFactor,y,C)).x&&(b+=-F.x,a+=F.x),0>F.y&&(m+=-F.y,o+=F.y),F.x1>n&&(a-=F.x1-n),F.y1>l&&(o-=F.y1-l)):(r=h.getScalingParameters(f,v,a,o),h.calculateMarkerBounds(r.scaleFactor*h.config.baseScaleFactor,y,C)),b+=y*(r=h.getScalingParameters(f,v,a,o)).scaleFactor*h.config.baseScaleFactor,m+=C*r.scaleFactor*h.config.baseScaleFactor):r=h.getScalingParameters(f,v,a,o),h.config.scalingParams=r,t=r.scaleFactor,r.translateX+=b,r.translateY=r.translateY+m+c.top||0,r.sFactor=t*h.config.baseScaleFactor*100/100,r.transformStr=["t",r.translateX,",",r.translateY,"s",t,",",t,",0,0"].join(""),h.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:r.translateX?r.translateX:0,grpyshift:r.translateY?r.translateY:0,xscale:100*(t?t*h.config.baseScaleFactor:1),yscale:100*(t?t*h.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},h.getChildren("mapAnnotations")[0].clear(),h.getChildren("mapAnnotations")[0].configureAttributes()}getDataLimits(){let e,r,a,o=this.getDatasets(),t=o.length,l=1/0,n=-1/0;for(a=0;a<t;a++)r=(e=o[a]).getDataLimits(),l=R(l,r.min),n=I(n,r.max);return{dataMin:l,dataMax:n}}getEntityPaths(e){let r,a={},o=this.config.entities;if(e){for(r in o)a[r]=o[r];return a}return o}checkComplete(){let e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}exports.default=O;
},{"./mscartesian":116,"../core/component-interface":62,"../_internal/color-utils/chart-palette-colors":117,"../_internal/dom/dom-event":73,"../_internal/misc/event-api":22,"../_internal/lib/lib":20,"../_internal/lib/lib-graphics":21,"../_internal/vendors/fc-ext-annotation/src/ext-annotation.js":122,"../_internal/vendors/redraphael/source/raphael.lib":84,"../_internal/factories/maps-dataset":118,"../_internal/factories/canvas":119,"../_internal/factories/colorrange":120,"../_internal/factories/legendmanager":121}],56:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Maps=void 0;var e=require("../viz/maps"),t=s(e);function s(e){return e&&e.__esModule?e:{default:e}}exports.Maps=t.default,exports.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:e=>e.addDep(t.default)};
},{"../viz/maps":100}]},{},[56], null)
//# sourceMappingURL=/maps.257c8243.map